{"version":3,"file":"default-src_app_modules_search_search_module_ts.js","mappings":";;;;;;;;;;;;;AAAO,MAAM,YAAY,GAAG;IACxB,KAAK,EAAE,0BAA0B;IACjC,OAAO,EAAE,aAAa;IACtB,SAAS,EAAE,MAAM;IACjB,SAAS,EAAE,CAAC;IACZ,SAAS,EAAE,CAAC;IACZ,SAAS,EAAE,CAAC;IACZ,OAAO,EAAE,EAAE;IACX,OAAO,EAAE,CAAC;IACV,WAAW,EAAE,mBAAmB;IAChC,UAAU,EAAE,KAAK;IACjB,cAAc,EAAE,IAAI;IACpB,QAAQ,EAAE,CAAC;IACX,IAAI,EAAE,IAAI;CACb,CAAC;;;;;;;;;;;;;;;ACdF,IAAY,aAIX;AAJD,WAAY,aAAa;IACrB,sCAAqB;IACrB,sCAAqB;IACrB,2CAA0B;AAC9B,CAAC,EAJW,aAAa,KAAb,aAAa,QAIxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACMsB;AACqB;AACX;AAGF;AACY;AAE2E;AAEjC;AAEzB;;;;;;;;;;;;;;ICExD,0EAKC;IACG,6EAAoE;IACxE,6DAAM;;;IALF,qGAAwC;IAIF,2DAAe;IAAf,yEAAe;;;IAEzD,qEAKO;;;IAHH,qGAAwC;;;;IAI5C,0FAeC;IALG,mVAAmB,4BAAqB,IAAC,sQAChC,gBAAS,IADuB,4QAEhC,kCAA2B,IAFK;IAM7C,6DAAsB;;;IAblB,gHAA+B;IAE/B,yGAAwC;IADxC,qGAAwC;;;ADbzC,MAAM,iBAAiB;IAuC1B,YACY,YAA0B,EAC1B,iBAAoC,EACpC,eAAgC,EAChC,YAA0B,EAC3B,eAAgC;QAJ/B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,oBAAe,GAAf,eAAe,CAAiB;QAChC,iBAAY,GAAZ,YAAY,CAAc;QAC3B,oBAAe,GAAf,eAAe,CAAiB;QAzClC,YAAO,GAAG;YACf,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,EAAE;YACV,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,EAAE;YACV,YAAY,EAAE,WAAW;YACzB,QAAQ,EAAE,IAAI;YACd,YAAY,EAAE,KAAK;SACtB,CAAC;QAQO,aAAQ,GAAG,KAAK,CAAC;QACjB,oBAAe,GAAG,KAAK,CAAC;QACxB,eAAU,GAAW,iEAAe,CAAC;QAEpC,iBAAY,GAAG,IAAI,wDAAY,EAAwC,CAAC;QACxE,iBAAY,GAAG,IAAI,wDAAY,EAAQ,CAAC;QACxC,yBAAoB,GAA0B,IAAI,wDAAY,EAAW,CAAC;QAE7E,YAAO,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,EAAE,YAAY,CAAC,CAAC;QAClD,8HAA8H;QACvH,aAAQ,GAAG,KAAK,CAAC;QACjB,WAAM,GAAG;YACZ,MAAM,EAAE,2BAA2B;YACnC,aAAa,EAAE,aAAa;YAC5B,UAAU,EAAE,MAAM;YAClB,UAAU,EAAE,OAAO,EAAE,qBAAqB;SAC7C,CAAC;QACK,aAAQ,GAAqB,IAAI,0CAAO,EAAW,CAAC;QACnD,aAAQ,GAAG,sEAAQ,CAAC;IAQzB,CAAC;IAEJ,eAAe;QACX,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;QACpC,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,cAAc,CAAC;SAC9C;QACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,IAAI,CAAC,0DAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YACvF,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;IACP,CAAC;IAED,WAAW,CAAC,OAAsB;QAC9B,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,YAAY,EAAE;YACvD,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,YAAY,EAAE;gBACjC,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACnD;SACJ;IACL,CAAC;IAED,WAAW;QACP,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAEM,oBAAoB,CAAC,KAAa;QACrC,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACrC,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;YACvC,IAAI,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC;YAC5F,IAAI,UAAU,GAAG,mBAAmB,CAAC;YAErC,IAAI,OAAO,KAAK,IAAI,CAAC,QAAQ,CAAC,iBAAiB,IAAI,OAAO,KAAK,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE;gBAC1F,aAAa,GAAG,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAC;gBACvD,UAAU,GAAG,6BAA6B,CAAC;aAC9C;YAED,MAAM,IAAI,GAAG;gBACT,YAAY,EAAE,IAAI,CAAC,UAAU;gBAC7B,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;gBACnD,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;gBACnD,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;gBACvC,eAAe,EAAE,IAAI,CAAC,eAAe;aACxC,CAAC;YAEF,IAAI,OAAO,KAAK,IAAI,CAAC,QAAQ,CAAC,iBAAiB,IAAI,OAAO,KAAK,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE;gBAC1F,IAAI,CAAC,YAAY;qBACZ,mBAAmB,CAAC,8HAAwB,EAAE;oBAC3C,IAAI;oBACJ,KAAK,EAAE,UAAU;oBACjB,QAAQ,EAAE,aAAa;iBAC1B,CAAC;qBACD,IAAI,CAAC,CAAC,KAAU,EAAE,EAAE;oBACjB,IAAI,KAAK,CAAC,IAAI,EAAE;wBACZ,IAAI,CAAC,mBAAmB,CAAC,EAAE,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;qBAChF;gBACL,CAAC,CAAC,CAAC;aACV;iBAAM;gBACH,IAAI,CAAC,YAAY;qBACZ,eAAe,CAAC,8HAAwB,EAAE;oBACvC,IAAI;oBACJ,KAAK,EAAE,UAAU;oBACjB,QAAQ,EAAE,aAAa;iBAC1B,CAAC;qBACD,IAAI,CAAC,CAAC,KAAU,EAAE,EAAE;oBACjB,IAAI,KAAK,CAAC,IAAI,EAAE;wBACZ,IAAI,CAAC,mBAAmB,CAAC,EAAE,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;qBAChF;gBACL,CAAC,CAAC,CAAC;aACV;SACJ;aAAM;YACH,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC,uCAAuC;YACnF,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACxC;IACL,CAAC;IAEM,mBAAmB;QACtB,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;IAC/D,CAAC;IAEM,mBAAmB,CAAC,MAAW;QAClC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,MAAM,CAAC;QACtC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,QAAQ,CAAC;QACrC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;QAC1D,QAAQ,CAAC,YAAY,GAAG,QAAQ,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YACpB,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1B;aAAM;YACH,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;SAC3B;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QACjF,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,EAAE;YACX,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;YAC1D,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;SAC5B;IACL,CAAC;IAEM,aAAa,CAAC,KAAU;QAC3B,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1B;aAAM;YACH,MAAM,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,KAAK,IAAI,CAAC;YACpF,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;YAC7D,IAAI,gBAAgB,EAAE;gBAClB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;aAC5D;YAED,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAExD,IAAI,gBAAgB,EAAE;oBAClB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;iBACvD;aACJ;SACJ;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QACjF,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;IAC7B,CAAC;IAEM,OAAO;QACV,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC;QACtD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IAEO,aAAa;QACjB,IAAI,WAAW,GAAG,EAAE,CAAC;QAErB,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC;QAC5C,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,KAAK,8DAAY,CAAC;QAEzD,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC5B,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,KAAK,CAAC;YACjD,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC;YACpF,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC;SACjF;QACD,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAEO,gBAAgB;QACpB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;YACrC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,EAClG;YACE,IAAI,CAAC,OAAO,mCAAQ,IAAI,CAAC,OAAO,GAAK,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAE,CAAC;SAChF;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAChB,IAAI,CAAC,aAAa,EAAE,CAAC;aACxB;SACJ;IACL,CAAC;IAEO,4BAA4B,CAAC,OAAY;QAC7C,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC9D,MAAM,QAAQ,GAAG,0GAA+B,CAC5C,IAAI,CAAC,SAAS,CAAC,SAAS,EACxB,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAClC,CAAC;QACF,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;QAC/E,MAAM,iBAAiB,GAAG,WAAW,IAAI,OAAO,CAAC,QAAQ,KAAK,iEAAe,CAAC;QAE9E,IACI,CAAC,CAAC,CAAC,WAAW,IAAI,QAAQ,CAAC,IAAI,iBAAiB,CAAC;YACjD,CAAC,OAAO,CAAC,MAAM;YACf,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC;;mFAEgD,EAC7E;YACE,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1B;aAAM;YACH,MAAM,IAAI,GAAQ,EAAE,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACtD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;SACnC;IACL,CAAC;IAEO,WAAW,CAAC,GAAW;QAC3B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG;YACnB,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,EAAE;YACV,YAAY,EAAE,IAAI;YAClB,UAAU,EAAE,KAAK;YACjB,cAAc,EAAE,EAAE;YAClB,YAAY,EAAE,EAAE;YAChB,eAAe,EAAE,KAAK;YACtB,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,KAAK;YACjB,YAAY,EAAE,WAAW;YACzB,UAAU,EAAE,EAAE;SACjB,CAAC;IACN,CAAC;IAEO,eAAe;QACnB,cAAc,CAAC,GAAG,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAC/E,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,UAAU,CAAC,OAAY;QAC3B,OAAO,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAC1C,OAAO,CAAC,QAAQ,EAChB,OAAO,CAAC,MAAM,EACd,OAAO,CAAC,SAAS,EACjB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,OAAO,CAAC,QAAQ,EACrB,IAAI,CAAC,OAAO,CAAC,MAAM,EACnB,IAAI,CAAC,UAAU,CAClB,CAAC;IACN,CAAC;;kFA5QQ,iBAAiB;gHAAjB,iBAAiB;QC7B9B,0EAAoG;QAqB5F,yIAAS,6CAAqC,IAAC,0FACjC,yBAAqB,IADY;;QApBnD,6DAsBE;QACF,8GAOM;QACN,8GAKO;QACP,8IAgBsB;QAC1B,6DAAM;;QAvDD,qFAAuB;QAOpB,2DAIE;QAJF,6MAIE;QANF,iGAAmC;QASnC,mGAAyC;QAWxC,2DAAoC;QAApC,qGAAoC;QAQpC,2DAAqC;QAArC,sGAAqC;QAMrC,2DAAkF;QAAlF,iNAAkF;;;;;;;;;;;;;;;;;;;ACvCZ;;;;;;ICK3E,uEAIC;IADG,iYAAS,4BAAkB,IAAC;IAE5B,yEAAqC;IACjC,oEAAmC;IAEnC,yEAA4D;IAEpD,uDACJ;;IAAA,4DAAM;;;IADF,0DACJ;IADI,2MACJ;;;IAKZ,0EAQC;IACG,uDACJ;;IAAA,4DAAM;;IADF,0DACJ;IADI,qKACJ;;;IASQ,yEAA+D;IAC3D,iEAAwE;IAExE,yEAAqC;IAE7B,uDACJ;IAAA,4DAAM;;;IALL,0DAA4D;IAA5D,+HAA4D;IAIzD,0DACJ;IADI,qHACJ;;;IAIR,yEAA8F;IAC1F,iEAA8E;IAE9E,yEAAqC;IAE7B,uDACJ;IAAA,4DAAM;;;IALL,0DAAkE;IAAlE,qIAAkE;IAI/D,0DACJ;IADI,gIACJ;;;IAIR,yEAAmG;IAC/F,iEAAqE;IAErE,yEAAqC;IAE7B,uDACJ;IAAA,4DAAM;;;IALL,0DAAyD;IAAzD,4HAAyD;IAItD,0DACJ;IADI,8HACJ;;;IAYJ,qEAAyD;;;IAErD,qEAAiF;;;IACjF,qEAAqF;;;IAFzF,sEAAoD;IAChD,6JAAiF;IACjF,6JAAqF;IACzF,4DAAM;;;IAFI,0DAAoC;IAApC,mGAAoC;IACpC,0DAAyC;IAAzC,wGAAyC;;;;IAXvD,yEAOC;IACG,uJAAyD;IACzD,uJAGM;IAEN,yEAAqC;IACF,uDAAwD;IAAA,4DAAM;;;IAZjG,4NAGE;IAEI,0DAAmB;IAAnB,kFAAmB;IACnB,0DAA4C;IAA5C,8GAA4C;IAMf,0DAAwD;IAAxD,4HAAwD;;;IAI/F,yEAGC;IACG,iEAAwE;IAExE,yEAAqC;IACF,uDAAe;IAAA,4DAAM;;;IAHnD,0DAA4D;IAA5D,+HAA4D;IAG9B,0DAAe;IAAf,6EAAe;;;IAzD1D,wEAAgD;IAC5C,iJAQM;IAEN,iJAQM;IAEN,iJAQM;IAEN,iJAiBM;IAEN,iJASM;IACV,qEAAe;;;IA3DL,0DAAuB;IAAvB,sFAAuB;IAUvB,0DAAsD;IAAtD,wHAAsD;IAUtD,0DAA2D;IAA3D,6HAA2D;IAW5D,0DAA6F;IAA7F,qKAA6F;IAmB7F,0DAAyE;IAAzE,8IAAyE;;;IAY9E,qEAAyD;;;IAErD,qEAAmF;;;IACnF,qEAAmE;;;IACnE,qEAAqE;;;IACrE,qEAAyE;;;IACzE,qEAAuE;;;IACvE,qEAAsE;;;IACtE,qEAAuE;;;IAP3E,sEAA4B;IACxB,8IAAmF;IACnF,8IAAmE;IACnE,8IAAqE;IACrE,8IAAyE;IACzE,8IAAuE;IACvE,8IAAsE;IACtE,8IAAuE;IAC3E,4DAAM;;;IAPI,0DAA4C;IAA5C,8GAA4C;IAC5C,0DAA6B;IAA7B,4FAA6B;IAC7B,0DAA4B;IAA5B,2FAA4B;IAC5B,0DAA4B;IAA5B,2FAA4B;IAC5B,0DAA2B;IAA3B,0FAA2B;IAC3B,0DAAyB;IAAzB,wFAAyB;IACzB,0DAA2B;IAA3B,0FAA2B;;;IATzC,yEAAkG;IAC9F,wIAAyD;IACzD,wIAQM;IAEN,yEAAqC;IAE7B,uDACJ;IAAA,4DAAM;;;IAdJ,0DAAmB;IAAnB,kFAAmB;IACnB,0DAAoB;IAApB,mFAAoB;IAYlB,0DACJ;IADI,iJACJ;;;;;IAnFZ,wEAKC;IADG,mYAAS,6BAAkB,IAAC;IAE5B,oJA4De;IAEf,kIAiBM;IAEV,4DAAI;;;IArFA,mKAAwD;IAIzC,0DAA+B;IAA/B,8FAA+B;IA8DxC,0DAA0D;IAA1D,4HAA0D;;;;IArGxE,yEAIC;IACG,yHAcI;IAEJ,6HAUM;IAEN,yHAuFI;IACR,4DAAM;;;;;IAtHF,6JAAuD;IAIlD,0DAAuB;IAAvB,sFAAuB;IAevB,0DAMP;IANO,kPAMP;IAMO,0DAA+E;IAA/E,iKAA+E;;AD1BjF,MAAM,2BAA2B;IAQpC;QAPS,YAAO,GAAoB,EAAE,CAAC;QAC9B,SAAI,GAAG,EAAE,CAAC;QAIT,eAAU,GAAgC,IAAI,uDAAY,EAAiB,CAAC;IAEvE,CAAC;IAEhB,QAAQ,KAAI,CAAC;IAEN,YAAY,CAAC,IAAmB;QACnC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;;sGAdQ,2BAA2B;yHAA3B,2BAA2B;QCRxC,uHAyHM;;QAxHe,gFAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAW;AACgB;AAC3B;AAIoC;AAC1B;AACZ;AAC8B;;;;;;;;;AAOtD,MAAM,yBAAyB;IA6BlC,YAAoB,YAA0B,EAAU,eAAgC;QAApE,iBAAY,GAAZ,YAAY,CAAc;QAAU,oBAAe,GAAf,eAAe,CAAiB;QAb/E,iBAAY,GAAkB,8DAAY,CAAC;QAC3C,YAAO,GAAG,oFAAsB,CAAC;QACjC,iBAAY,GAAQ,uEAAY,CAAC;QAEnC,yBAAoB,GAAQ,CAAC,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;QAC/C,WAAM,GAAG,yDAAQ,CAAC;QAClB,YAAO,GAAQ,mCAAM,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QAI1C,YAAO,GAAG,sEAAQ,CAAC;QACnB,aAAQ,GAAqB,IAAI,yCAAO,EAAW,CAAC;IAE+B,CAAC;IAE5F,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;IAC9D,CAAC;IAED,IAAI,kBAAkB;QAClB,OAAO,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC;IAChE,CAAC;IAED,IAAI,UAAU;QACV,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,OAAO,sBAAsB,CAAC;SACjC;QAED,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAED,IAAI,QAAQ;QACR,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,OAAO,uBAAuB,CAAC;SAClC;QAED,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAED,IAAI,sBAAsB;QACtB,IACI,IAAI,CAAC,aAAa;YAClB,IAAI,CAAC,mBAAmB;YACxB,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAC7B;YACE,OAAO,KAAK,CAAC;SAChB;QAED,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE;YAChF,IACI,CAAC,IAAI,CAAC,aAAa;gBACnB,IAAI,CAAC,mBAAmB;gBACxB,IAAI,CAAC,OAAO;gBACZ,IAAI,CAAC,OAAO;gBACZ,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,EAChE;gBACE,OAAO,IAAI,CAAC;aACf;YAED,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,WAAW;QACP,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAEM,QAAQ,CAAC,KAA8C;QAC1D,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC,KAAK,CAAC;IAC3C,CAAC;IAEM,aAAa;;QAChB,IAAI,CAAC,WAAI,CAAC,mBAAmB,0CAAE,MAAM,KAAI,IAAI,CAAC,sBAAsB,EAAE;YAClE,OAAO;SACV;QAED,MAAM,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACjD,MAAM,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAEpF,MAAM,kBAAkB,GAAG,mCAAM,CAAC,YAAY,CAAC,CAAC;QAChD,MAAM,gBAAgB,GAAG,UAAU,CAAC,CAAC,CAAC,mCAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAChE,MAAM,QAAQ,GAAG,gBAAgB,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC;QAE3D,MAAM,IAAI,GAAG;YACT,UAAU,EAAE,kBAAkB,CAAC,MAAM,CAAC,YAAY,CAAC;YACnD,QAAQ,EAAE,kBAAkB,CAAC,MAAM,CAAC,YAAY,CAAC;YACjD,QAAQ,EAAE,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC;YAC5C,MAAM,EAAE,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI;YACvE,YAAY,EAAE,EAAE;YAChB,QAAQ;YACR,MAAM,EAAE,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI;YAClE,QAAQ,EAAE,CAAC,CAAC,gBAAgB;SAC/B,CAAC;QAEF,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;IAClD,CAAC;IAEM,YAAY;QACf,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;IAChC,CAAC;IAEO,eAAe;;QACnB,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YAClD,IAAI,CAAC,oBAAoB,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;YAC/C,OAAO;SACV;QAED,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,MAAM,YAAY,GAAG,mCAAM,CAAC,WAAI,CAAC,YAAY,0CAAE,QAAQ,IAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC5F,MAAM,UAAU,GAAG,mCAAM,CAAC,WAAI,CAAC,YAAY,0CAAE,MAAM,IAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAEtF,IAAI,CAAC,oBAAoB,GAAG,CAAC,YAAY,CAAC,CAAC;YAE3C,IAAI,UAAU,EAAE;gBACZ,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAC9C;YAED,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,oBAAoB,CAAC;SACxD;IACL,CAAC;IAEO,OAAO;QACX,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,KAAK,OAAO,EAAE;YAC3C,IAAI,CAAC,MAAM,GAAG,yDAAQ,CAAC;SAC1B;QAED,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,KAAK,OAAO,EAAE;YAC3C,IAAI,CAAC,MAAM,GAAG,2DAAU,CAAC;SAC5B;QAED,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,KAAK,OAAO,EAAE;YAC3C,IAAI,CAAC,MAAM,GAAG,yDAAQ,CAAC;SAC1B;IACL,CAAC;IAEO,UAAU;QACd,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,IAAI,CAAC,yDAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YACvF,IAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,aAAa;QACjB,MAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACvC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAE3B,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;YACtB,OAAO;SACV;QAED,KAAK,MAAM,GAAG,IAAI,YAAY,CAAC,MAAM,EAAE;YACnC,IAAI,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;gBAClC,QAAQ,GAAG,EAAE;oBACT,KAAK,UAAU;wBACX,IAAI,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE;4BAC3C,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;yBACtE;wBACD,MAAM;oBACV,KAAK,QAAQ;wBACT,IAAI,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE;4BACzC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;yBACpE;wBACD,MAAM;iBACb;aACJ;SACJ;IACL,CAAC;;kGA/LQ,yBAAyB;wHAAzB,yBAAyB;QCjBtC,+FAAwD;QAA9B,8KAAc,kBAAc,IAAC;QAAC,6DAA2B;QAEnF,0EAAuC;QAO3B,uKAAY,oBAAgB,IAAC;;;;;QAgBhC,6DAAkB;QAGvB,0EAAsC;QAI9B,kJAAS,mBAAe,IAAC;QAEzB,yDACJ;;QAAA,6DAAS;;QA9BL,2DAAyB;QAAzB,8IAAyB;QAyBzB,2DAAsE;QAAtE,+HAAsE;QAItE,2DACJ;QADI,gKACJ;;;;;;;;;;;;;;;;;;;;;ACnC4G;AACzE;AACqC;AAEjB;;;AAE/D,MAAM,UAAU,GAAG;IACf,SAAS,EAAE,WAAW;IACtB,QAAQ,EAAE,KAAK;IACf,WAAW,EAAE,QAAQ;IACrB,WAAW,EAAE,cAAc;IAC3B,QAAQ,EAAE,eAAe;CAC5B,CAAC;AACF,MAAM,SAAS,GAAG,SAAS,CAAC;AAC5B,MAAM,iBAAiB,GAAG,CAAC,CAAC;AAMrB,MAAM,wBAAwB;IAajC,YAAoB,MAAkB,EAAU,gBAAkC;QAA9D,WAAM,GAAN,MAAM,CAAY;QAAU,qBAAgB,GAAhB,gBAAgB,CAAkB;QAXzE,oBAAe,GAAG,IAAI,qDAAS,CAAC,EAAE,CAAC,CAAC;QACpC,mBAAc,GAAG,EAAE,CAAC;QACpB,cAAS,GAAG,EAAE,CAAC;QACf,mBAAc,GAAG,KAAK,CAAC;QAEtB,eAAU,GAAG,IAAI,uDAAY,EAAQ,CAAC;QAGxC,wBAAmB,GAAG,CAAC,CAAC,CAAC;QAI7B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,aAA4B,CAAC;IACjE,CAAC;IAGD,OAAO,CAAC,KAAoB;QACxB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAE3B,MAAM,aAAa,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,CAAC,aAAa,CAAgB,CAAC;QACrG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,EAAE;YAChC,EAAE,EAAE,aAAa,CAAC,EAAE;SACP,CAAC,CAAC;IACvB,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAC7D,2FAA4B,EAC5B,IAAI,CAAC,QAAQ,EACb,IAAI,CACP,CAAC;IACN,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,mBAAmB,KAAK,CAAC,CAAC,EAAE;YACjC,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;SACtE;IACL,CAAC;IAEO,YAAY,CAAC,SAAiB,EAAE,GAAW;QAC/C,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,GAAG,SAAS,CAAgB,CAAC;QAE/E,IAAI,SAAS,IAAI,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,MAAM,EAAE;YACrE,4DAA4D;YAC5D,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;SAClD;QAED,IAAI,CAAC,SAAS,EAAE;YACZ,IAAI,SAAS,IAAI,iBAAiB,EAAE;gBAChC,gEAAgE;gBAChE,OAAO,QAAQ,CAAC,aAAa,CAAC,SAAS,GAAG,iBAAiB,CAAgB,CAAC;aAC/E;iBAAM,IAAI,SAAS,KAAK,CAAC,EAAE;gBACxB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;aAClD;SACJ;QAED,OAAO,SAAS,CAAC;IACrB,CAAC;IAED,2BAA2B;IACnB,iBAAiB;QACrB,qBAAqB,CAAC,GAAG,EAAE;YACvB,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YACvB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;YACzB,IAAI,CAAC,YAAY,CAAC,aAAa,CAC3B,IAAI,aAAa,CAAC,SAAS,EAAE;gBACzB,OAAO,EAAE,EAAE;gBACX,OAAO,EAAE,IAAI;aAChB,CAAC,CACL,CAAC;QACN,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,eAAe,CAAC,OAAwB;QAC5C,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,MAAM,gBAAgB,GAAG,GAAY,EAAE;YACnC,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC;YAC5E,OAAO,OAAO,UAAU,KAAK,QAAQ,IAAI,UAAU,KAAK,EAAE,CAAC;QAC/D,CAAC,CAAC;QAEF,QAAQ,OAAO,EAAE;YACb,KAAK,mFAAa;gBACd,IAAI,IAAI,CAAC,cAAc,EAAE;oBACrB,OAAO;iBACV;gBAED,IAAI,IAAI,CAAC,QAAQ,KAAK,iBAAiB,EAAE;oBACrC,0BAA0B;oBAC1B,OAAO;iBACV;qBAAM;oBACH,GAAG,GAAG,CAAC,CAAC;iBACX;gBACD,MAAM;YAEV,KAAK,yFAAmB;gBACpB,IAAI,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,SAAS,IAAI,CAAC,gBAAgB,EAAE,EAAE;oBAChE,OAAO;iBACV;YACL,iBAAiB;YACjB,KAAK,2FAAqB;gBACtB,GAAG,GAAG,CAAC,CAAC;gBACR,MAAM;YAEV,KAAK,wFAAkB;gBACnB,IAAI,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,SAAS,IAAI,CAAC,gBAAgB,EAAE,EAAE;oBAChE,OAAO;iBACV;gBAED,GAAG,GAAG,CAAC,CAAC,CAAC;gBACT,MAAM;YAEV,KAAK,iFAAW;gBACZ,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE;oBAC7B,GAAG,GAAG,CAAC,CAAC,CAAC;iBACZ;qBAAM;oBACH,GAAG,GAAG,CAAC,CAAC;iBACX;gBACD,MAAM;YAEV,KAAK,oFAAc;gBACf,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,OAAO;YAEX,KAAK,iGAA2B;gBAC5B,MAAM;YAEV;gBACI,OAAO;SACd;QAED,OAAO,GAAG,CAAC;IACf,CAAC;IAEO,mBAAmB,CAAC,OAAwB,EAAE,UAAwB;QAC1E,MAAM,gBAAgB,GAAG,UAAU,CAAC,EAAE,KAAK,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC;QAChE,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;QAClC,IAAI,CAAC,gBAAgB,IAAI,CAAC,WAAW,EAAE;YACnC,OAAO;SACV;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QAC1C,IAAI,GAAG,KAAK,SAAS,EAAE;YACnB,OAAO;SACV;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QAC3C,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;QACvD,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO;SACV;QAED,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAEzB,MAAM,cAAc,GAChB,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,WAAW;YACzC,IAAI,CAAC,eAAe,CAAC,KAAK;YAC1B,SAAS,CAAC,EAAE,KAAK,QAAQ,GAAG,iBAAiB,CAAC;QAClD,IAAI,cAAc,EAAE;YAChB,qBAAqB,CAAC,GAAG,EAAE;gBACvB,SAAS,CAAC,KAAK,EAAE,CAAC;YACtB,CAAC,CAAC,CAAC;YACH,OAAO;SACV;QAED,IAAI,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,QAAQ,IAAI,OAAO,KAAK,mFAAa,EAAE;YACrE,OAAO,GAAG,iGAA2B,CAAC;YACtC,UAAU,CAAC,iBAAiB,GAAG,IAAI,CAAC;SACvC;QAED,IAAI,OAAO,KAAK,2FAAqB,IAAI,OAAO,KAAK,iGAA2B,EAAE;YAC9E,MAAM,WAAW,GAAG;gBAChB,EAAE,EAAE,SAAS,CAAC,EAAE;gBAChB,iBAAiB,EAAE,IAAI;aAC1B,CAAC;YAEF,IAAI,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,iBAAiB,EAAE;gBAC/B,MAAM,mBAAmB,GACrB,CAAC,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,WAAW,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC;oBACzE,CAAC,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,WAAW;wBACtC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;;;wGAG6B;gBAChG,IAAI,mBAAmB,EAAE;oBACrB,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE,WAAW,CAAC,CAAC;oBACjF,OAAO;iBACV;gBAED,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC;aACjC;iBAAM;gBACH,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE,WAAW,CAAC,CAAC;gBACjF,OAAO;aACV;SACJ;QAED,qBAAqB,CAAC,GAAG,EAAE;YACvB,SAAS,CAAC,KAAK,EAAE,CAAC;YAClB,SAAS,CAAC,KAAK,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,QAAQ,CAAC,UAAwB;QACrC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE,KAAK,UAAU,CAAC,EAAE,EAAE;YACvD,OAAO;SACV;QAED,IAAI,CAAC,mBAAmB,CACpB,UAAU,CAAC,MAAM,KAAK,iGAA2B,CAAC,CAAC,CAAC,iGAA2B,CAAC,CAAC,CAAC,2FAAqB,EACvG,UAAU,CACb,CAAC;IACN,CAAC;;gGApNQ,wBAAwB;sHAAxB,wBAAwB;0JAAxB,mBAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTL;AAC2B;AACwC;AAGF;AAE7C;AAGoB;AACQ;;;;;;;;;;;;;;ICMnE,iEAKO;;;IADH,iHAA0C;;;IAE9C,iEAGO;;;IADH,+IAAiE;;;IAW7D,0EAA4C;IAAA,uDAAgB;IAAA,4DAAM;;;IAAtB,0DAAgB;IAAhB,8EAAgB;;;IAJpE,uEAA8D;IAEtD,qEAAmC;IACnC,qEAAI;IAAA,uDAAsC;;IAAA,4DAAK;IAC/C,gIAAkE;IACtE,4DAAM;;;IAFE,0DAAsC;IAAtC,sJAAsC;IACpC,0DAAgB;IAAhB,+EAAgB;;;IAKtB,sEAA4B;IACxB,iEAAqE;IACrE,qEAAI;IAAC,+EAAmF;IAAC,4DAAK;;;;;IADzF,0DAAyD;IAAzD,4HAAyD;IAC1C,0DAAwC;IAAxC,uGAAwC;;;;IAEhE,sEAA2F;IACvF,iEAA2E;IAC3E,qEAAI;IAAC,+EAAyF;IAAC,4DAAK;;;;;IAFhD,+IAAkC;IACjF,0DAA+D;IAA/D,kIAA+D;IAChD,0DAA8C;IAA9C,6GAA8C;;;IAEtE,sEAAgG;IAC5F,iEAA0E;IAC1E,qEAAI;IAAC,+EAAuF;IAAC,4DAAK;;;;;IAFzC,+IAAkC;IACtF,0DAA8D;IAA9D,iIAA8D;IAC/C,0DAA4C;IAA5C,2GAA4C;;;IAOhE,qEAAsD;;;IAElD,qEAA8E;;;IAC9E,qEAAkF;;;IAFtF,sEAA8C;IAC1C,2JAA8E;IAC9E,2JAAkF;IACtF,4DAAM;;;IAFI,0DAAiC;IAAjC,gGAAiC;IACjC,0DAAsC;IAAtC,qGAAsC;;;IAEhD,qEAA8D;IAC1D,+EAAsF;IAC1F,4DAAK;;;;;IADc,0DAA2C;IAA3C,0GAA2C;;;;IAVlE,sEAGC;IACG,qJAAsD;IACtD,qJAGM;IACN,mJAEK;IACL,qEAAI;IAAC,+EAA4D;IAAC,4DAAK;;;;;IAVvE,gNAAwG;IAElG,0DAAgB;IAAhB,+EAAgB;IAChB,0DAAsC;IAAtC,wGAAsC;IAIvC,0DAAuD;IAAvD,yHAAuD;IAGxC,0DAAiB;IAAjB,6EAAiB;;;IAGzC,sEAAwE;IACpE,iEAAqE;IACrE,qEAAI;IAAC,+EAA4D;IAAC,4DAAK;;;;;IADlE,0DAAyD;IAAzD,4HAAyD;IAC1C,0DAAiB;IAAjB,6EAAiB;;;IA/B7C,wEAA6C;IACzC,+IAGM;IACN,8IAGM;IACN,8IAGM;IAEN,+IAaM;IAEN,+IAGM;IACV,qEAAe;;;IAhCL,0DAAoB;IAApB,mFAAoB;IAIpB,0DAAgD;IAAhD,kHAAgD;IAIhD,0DAAqD;IAArD,uHAAqD;IAMtD,0DAAiF;IAAjF,yJAAiF;IAchF,0DAAgE;IAAhE,qIAAgE;;;IAOtE,qEAAsD;;;IAElD,qEAA6E;;;IAC7E,qEAAgE;;;IAChE,qEAAkE;;;IAClE,qEAAsE;;;IACtE,qEAAoE;;;IACpE,qEAAmE;;;IACnE,qEAAoE;;;IAPxE,sEAAyB;IACrB,4IAA6E;IAC7E,4IAAgE;IAChE,4IAAkE;IAClE,4IAAsE;IACtE,4IAAoE;IACpE,4IAAmE;IACnE,4IAAoE;IACxE,4DAAM;;;IAPI,0DAAsC;IAAtC,wGAAsC;IACtC,0DAA0B;IAA1B,yFAA0B;IAC1B,0DAAyB;IAAzB,wFAAyB;IACzB,0DAAyB;IAAzB,wFAAyB;IACzB,0DAAwB;IAAxB,uFAAwB;IACxB,0DAAsB;IAAtB,qFAAsB;IACtB,0DAAwB;IAAxB,uFAAwB;;;IATtC,sEAA4D;IACxD,sIAAsD;IACtD,sIAQM;IACN,qEAAI;IACA,+EAGiB;IACrB,4DAAK;;;;;IAfC,0DAAgB;IAAhB,+EAAgB;IAChB,0DAAiB;IAAjB,gFAAiB;IAWf,0DAA8D;IAA9D,gIAA8D;;;IAK1E,yEAA+F;;;;IAtDnG,wEAAiF;IAC7E,kJAiCe;IAEf,gIAiBM;IACN,wIAA+F;IACnG,4DAAI;;;IAvDuB,gKAAqD;IAC7D,0DAA4B;IAA5B,2FAA4B;IAmCrC,0DAAoD;IAApD,sHAAoD;IAkBhD,0DAAuB;IAAvB,sFAAuB;;;IA7DrC,uHAMI;IACJ,uHAuDI;;;IA9DA,mFAAoB;IAOpB,0DAAqB;IAArB,oFAAqB;;;;ADzB7B,MAAM,gBAAgB,GAAG,mDAAmD,CAAC;AAQtE,MAAM,iBAAiB;IAoB1B,YACY,cAA8B,EAC9B,yBAAgD,EAChD,gBAAkC,EAClC,aAA4B;QAH5B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,8BAAyB,GAAzB,yBAAyB,CAAuB;QAChD,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,kBAAa,GAAb,aAAa,CAAe;QAtB/B,cAAS,GAAG,IAAI,sDAAS,CAAC,EAAE,CAAC,CAAC;QAG9B,aAAQ,GAAG,KAAK,CAAC;QACjB,aAAQ,GAAG,KAAK,CAAC;QAChB,gBAAW,GAAG,IAAI,uDAAY,EAAwC,CAAC;QACvE,iBAAY,GAAG,IAAI,uDAAY,EAAQ,CAAC;QACxC,yBAAoB,GAA0B,IAAI,uDAAY,EAAW,CAAC;QAG7E,sBAAiB,GAAG,gBAAgB,CAAC;QAE5C,WAAM,GAAG,IAAI,0CAAO,EAAU,CAAC;QAEvB,eAAU,GAAG,EAAE,CAAC;QAChB,qBAAgB,GAAG,KAAK,CAAC;QACzB,aAAQ,GAAqB,IAAI,0CAAO,EAAW,CAAC;QAkErD,WAAM,GAAG,CAAC,KAAyB,EAAmB,EAAE;YAC3D,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;YAChC,MAAM,cAAc,GAAG,KAAK,CAAC,IAAI,CAAC,6DAAY,CAAC,GAAG,CAAC,EAAE,qEAAoB,EAAE,CAAC,CAAC;YAE7E,OAAO,4CAAK,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC,IAAI,CAC1C,0DAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CACf,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAC9F,CACJ,CAAC;QACN,CAAC,CAAC;IApEC,CAAC;IAEJ,IAAI,aAAa;;QACb,OAAO,CACH,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,IAAI;YAC7B,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,SAAS,CAAC,SAAS,KAAK,CAAC;aAC9B,UAAI,CAAC,UAAU,CAAC,IAAI,0CAAE,UAAU;YAChC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAChC,CAAC;IACN,CAAC;IAEO,MAAM,CAAC,WAAW,CAAC,UAAkB,EAAE,WAAmB;QAC9D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,WAAW,CAAC,CAAC,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC,EAAE;gBAClC,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;aACxB;SACJ;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC7E,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC3D,IAAI,QAAQ,EAAE;gBACV,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,aAAa,CAAC;aACjG;iBAAM;gBACH,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,aAAa,CAAC;aAC3F;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,eAAe;;QACX,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,UAAU,EAAE;YAC3F,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC;YACpE,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,GAAG,UAAU,CAAC;YAC/C,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;SAChC;aAAM;YACH,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;YACvC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;SACxB;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC5D,WAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,YAAY,0CAAE,SAAS,CAAC,GAAG,EAAE;;YAChC,IAAI,CAAC,MAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,GAAE;gBACf,OAAO;aACV;YAED,IAAI,YAAK,CAAC,KAAK,0CAAE,UAAU,KAAI,KAAK,CAAC,KAAK,CAAC,UAAU,KAAK,EAAE,EAAE;gBAC1D,IAAI,CAAC,UAAU,GAAG,WAAK,CAAC,KAAK,0CAAE,UAAU,CAAC;aAC7C;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,WAAW;QACP,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAaM,eAAe;QAClB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;IAC7B,CAAC;IAEM,YAAY;QACf,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAED,uEAAuE;IAChE,aAAa,CAAC,KAAc;QAC/B,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,aAAa,CACrC,IAAI,aAAa,CAAC,SAAS,EAAE;YACzB,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,IAAI;SAChB,CAAC,CACL,CAAC;QAEF,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,OAAO;SACV;QAED,MAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC3D,IAAI,KAAK,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,OAAO,IAAI,YAAY,CAAC,OAAO,KAAK,EAAE,EAAE;YAChF,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;YACvC,IAAI,CAAC,YAAY,CAAC;gBACd,WAAW,EAAE,4GAA2B,EAAE;gBAC1C,SAAS,EAAE,IAAI,CAAC,SAAS;aAC5B,CAAC,CAAC;SACN;QAED,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SACvC;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE;YACvE,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC;SACvD;IACL,CAAC;IAEM,YAAY,CAAC,WAA+C;QAC/D,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,IAAI,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE;YAC/B,MAAM,kBAAkB,GAAG,CAAC,OAAsB,EAAE,EAAE;gBAClD,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,CAAC,YAAY,CAAC;oBACd,WAAW,EAAE,OAAO;oBACpB,SAAS,EAAE,IAAI,CAAC,SAAS;iBAC5B,CAAC,CAAC;gBAEH,qBAAqB,CAAC,GAAG,EAAE;oBACvB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;oBAChE,IAAI,CAAC,cAAc,EAAE,CAAC;gBAC1B,CAAC,CAAC,CAAC;YACP,CAAC,CAAC;YAEF,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;gBAC1B,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBACrC,OAAO;aACV;YAED,IAAI,CAAC,cAAc;iBACd,uBAAuB,EAAE;iBACzB,IAAI,CAAC,0DAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC9B,SAAS,CACN,CAAC,mBAAmB,EAAE,EAAE;gBACpB,kBAAkB,CAAC,mBAAmB,CAAC,CAAC;YAC5C,CAAC,EACD,CAAC,KAAK,EAAE,EAAE;gBACN,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC;gBACtD,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;gBACpD,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,KAAK,CAAC,CAAC;YAClE,CAAC,CACJ,CAAC;YAEN,OAAO;SACV;QAED,MAAM,eAAe,GAAG,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC;QAClD,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAC1G,CAAC,GAAQ,EAAE,EAAE;YACT,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;YACrC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC;YACjC,IAAI,CAAC,cAAc,CAAC,qBAAqB,iCAChC,WAAW,CAAC,IAAI,GAAK,GAAG,GAC7B,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,SAAS,CACjB,CAAC;YAEF,IAAI,CAAC,eAAe,EAAE;gBAClB,qBAAqB,CAAC,GAAG,EAAE;oBACvB,IAAI,CAAC,cAAc,EAAE,CAAC;gBAC1B,CAAC,CAAC,CAAC;aACN;QACL,CAAC,EACD,CAAC,GAAQ,EAAE,EAAE;YACT,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;YACrC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC/B,CAAC,CACJ,CAAC;QAEF,IAAI,eAAe,EAAE;YACjB,IAAI,CAAC,cAAc,EAAE,CAAC;SACzB;IACL,CAAC;IAED,mCAAmC;IAC5B,SAAS,CAAC,GAAoC;QACjD,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YACzB,OAAO,GAAG,CAAC;SACd;aAAM,IAAI,GAAG,CAAC,UAAU,EAAE;YACvB,OAAO,GAAG,CAAC,UAAU,CAAC;SACzB;aAAM;YACH,OAAO,EAAE,CAAC;SACb;IACL,CAAC;IAED,wDAAwD;IACjD,eAAe;QAClB,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QACnD,MAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAE3D,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,QAAQ,CAAC,IAAI,EAAE,KAAK,YAAY,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE;YACnG,OAAO;SACV;QAED,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,MAAM,oBAAoB,GAAG,QAAQ,CAAC,MAAM,GAAG,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC;QAC/E,IAAI,oBAAoB,EAAE;YACtB,IAAI,YAAY,CAAC,WAAW,KAAK,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE;gBACrF,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aACzC;iBAAM;gBACH,MAAM,QAAQ,GAAG,iBAAiB,CAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,CAAC,WAAW,CAAC,CAAC;gBACnF,IAAI,QAAQ,EAAE;oBACV,KAAK,GAAG,QAAQ,CAAC;iBACpB;qBAAM;oBACH,OAAO;iBACV;aACJ;SACJ;aAAM,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,KAAK,GAAG,QAAQ,CAAC;SACpB;aAAM,IAAI,QAAQ,CAAC,MAAM,IAAI,YAAY,CAAC,WAAW,CAAC,MAAM,EAAE;YAC3D,OAAO;SACV;QAED,MAAM,MAAM,GAAG,4GAA2B,EAAE,CAAC;QAC7C,MAAM,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,YAAY,CAAC;YACd,WAAW,EAAE,MAAM;YACnB,SAAS,EAAE,IAAI,CAAC,SAAS;SAC5B,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC;IACxD,CAAC;IAEO,YAAY,CAAC,GAAyC;QAC1D,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,IAAI,GAAG,CAAC,WAAW,CAAC,OAAO,KAAK,EAAE,EAAE;YAC5D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC;SACzD;QAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IAEO,aAAa,CAAC,WAA+C,EAAE,UAAe;QAClF,IAAI,CAAC,UAAU,EAAE;YACb,WAAW,CAAC,cAAc,EAAE,CAAC;YAC7B,UAAU,GAAG,4GAA2B,EAAE,CAAC;SAC9C;QAED,UAAU,CAAC,WAAW,GAAG,UAAU,IAAI,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;QAC1F,IAAI,CAAC,YAAY,CAAC;YACd,WAAW,EAAE,UAAU;YACvB,SAAS,EAAE,IAAI,CAAC,SAAS;SAC5B,CAAC,CAAC;IACP,CAAC;IAEO,cAAc;QAClB,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE;YAChE,EAAE,EAAE,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ;YACtC,MAAM,EAAE,2FAAqB;SAChC,CAAC,CAAC;QACH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAClC,CAAC;;kFAzRQ,iBAAiB;+GAAjB,iBAAiB;;;;;;QCjC9B,yEAAwG;QAYhG,sIAAQ,kBAAc,KAAK,CAAC,IAAC,+EACpB,oCAAsC,SAAE,kBAAc,IADlC,gGAGf,wBAAoB,IAHL,gFAIpB,qBAAiB,IAJG;;QAXjC,4DA0BE;QACF,6GAKO;QACP,6GAGO;QACP,yEAAoG;QAA9B,sIAAS,kBAAc,IAAI,CAAC,IAAC;QAAC,4DAAM;QAC1G,yEAA0F;QAA5B,sIAAS,qBAAiB,IAAC;QAAC,4DAAM;QAGpG,yMAgEc;;;QA1GT,oFAAuB;QAKpB,0DAAkD;QAAlD,wJAAkD;QADlD,gGAAmC;QAcnC,iGAAwC;QAWvC,0DAGP;QAHO,sMAGP;QAGO,0DAA4E;QAA5E,wJAA4E;;;;;;;;;;;;;;;;;ACnCN;;AASxE,MAAM,yBAAyB;IAUlC;QATU,mBAAc,GAAsB,IAAI,uDAAY,EAAO,CAAC;IASvD,CAAC;IAEhB,QAAQ,KAAU,CAAC;;kGAZV,yBAAyB;uHAAzB,yBAAyB;QCTtC,yEAAiC;QAC7B,iFAOoB;QACxB,4DAAM;;QAPE,0DAAgB;QAAhB,yEAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFxB;AAWA;AAEA;AAEA;AAMA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACVQU,IAAAA,6DAAAA;AACIA,IAAAA,wDAAAA;AACJA,IAAAA,2DAAAA;;;;;;AAyBIA,IAAAA,wDAAAA;;;;AAAiEA,IAAAA,yDAAAA;;;;;;;;AAUrEA,IAAAA,6DAAAA;AAAqDA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAASC,wBAAT;AAA0B,KAA1B;AAA4BD,IAAAA,2DAAAA;;;;;;;;AAIzFA,IAAAA,6DAAAA,eAAoD,CAApD,EAAoD,0BAApD,EAAoD,EAApD;AAOQA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAcE,6BAAd;AAAoC,KAApC;AACHF,IAAAA,2DAAAA;;;;;;;;AANGA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA,4BAAmB,MAAnB,EAAmB,EAAnB,EAAmB,gBAAnB,EAAmBG,qBAAnB,EAAmB,YAAnB,EAAmBC,SAAnB,EAAmB,WAAnB,EAAmBD,sBAAnB;;;;;;;;;;;;;;;;;;;;AD1BF,MAAOE,oBAAP,CAA2B;AAuB7BC,cACYC,cADZ,EAEYC,iBAFZ,EAGYC,yBAHZ,EAIYC,gBAJZ,EAKYC,aALZ,EAMWC,eANX,EAOYC,YAPZ,EAOsC;AAN1B;AACA;AACA;AACA;AACA;AACD;AACC;AA5BH,mBAAU,KAAV;AACA,kBAAS,KAAT;AACA,oBAAW,KAAX;AACA,qBAAY,IAAItB,sDAAJ,CAAc,EAAd,CAAZ;AAGC,uBAAc,IAAID,wDAAJ,EAAd;AACA,wBAAe,IAAIA,wDAAJ,EAAf;AAKH,mBAA2B,EAA3B;AACA,kBAAS,IAAIE,0CAAJ,EAAT;AACA,0BAAiB,KAAjB;AACA,sBAAa,EAAb;AACC,4BAAmB,KAAnB;AACA,oBAA6B,IAAIA,0CAAJ,EAA7B;AACA,uBAAc,KAAd;AACA,2BAAkB,KAAlB;AAUJ;;AAEa,MAAbsB,aAAa;;;AACb,WACI,KAAKC,SAAL,CAAeC,KAAf,KAAyB,IAAzB,IACA,KAAKC,SADL,IAEA,KAAKA,SAAL,CAAeC,SAAf,KAA6B,CAF7B,KAGA,WAAKC,UAAL,CAAgBC,IAAhB,MAAoB,IAApB,IAAoBC,aAApB,GAAoB,MAApB,GAAoBA,GAAEC,UAHtB,MAIA,WAAKH,UAAL,CAAgBI,EAAhB,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkB,MAAlB,GAAkBA,GAAEF,UAJpB,CADJ;AAOH;;AAEDG,UAAQ;AACJ,SAAKR,SAAL,GAAiB,KAAKS,QAAL,CAAc,KAAKX,SAAL,CAAeY,OAA7B,EAAsC,KAAKZ,SAAL,CAAeC,KAArD,CAAjB;AAEA,SAAKY,UAAL;AACH;;AAEDC,iBAAe;AACX,SAAKC,aAAL;AACH;;AAEDC,aAAW;AACP,SAAKD,aAAL;AAEA,SAAKE,QAAL,CAAcC,IAAd,CAAmB,IAAnB;AACA,SAAKD,QAAL,CAAcE,QAAd;AACH;;AAEYC,eAAa;AAAA;;AAAA;AACtB,UAAI,KAAI,CAACC,OAAL,IAAgB,KAAI,CAACC,WAAzB,EAAsC;AAClC;AACH;;AAED,UAAI,CAAC,KAAI,CAACC,eAAN,IAAyB,CAAC,KAAI,CAACC,QAAnC,EAA6C;AACzC,aAAI,CAACC,aAAL,CAAmB,IAAnB;AACH;;AAED,WAAI,CAACH,WAAL,GAAmB,IAAnB;AACA,YAAMI,QAAQ,GAAG,KAAI,CAACF,QAAL,GAAgB,yBAAhB,GAA4C,gBAA7D;AAEA,YAAMG,KAAK,SAAS,KAAI,CAAC7B,YAAL,CAAkB8B,eAAlB,CAChB5C,yGADgB,EAEhB;AACI6C,YAAI,EAAE;AACFlB,kBAAQ,EAAE,KAAI,CAACA,QADb;AAEFmB,mBAAS,EAAE,KAAI,CAACA,SAFd;AAGF1B,oBAAU,EAAE,KAAI,CAACA,UAHf;AAIFJ,mBAAS,EAAE,KAAI,CAACA,SAJd;AAKFwB,kBAAQ,EAAE,KAAI,CAACA;AALb,SADV;AAQIE;AARJ,OAFgB,CAApB;AAcA,WAAI,CAACJ,WAAL,GAAmB,KAAnB;;AAEA,UAAIK,KAAK,CAACE,IAAV,EAAgB;AACZ,aAAI,CAACE,YAAL,CAAkB;AAAEC,cAAI,EAAEL,KAAK,CAACE;AAAd,SAAlB;;AACA,aAAI,CAACC,SAAL,CAAeG,QAAf,CAAwB,KAAI,CAACjC,SAAL,CAAeC,KAAvC,EAA8CiC,QAA9C,CAAuDP,KAAK,CAACE,IAAN,CAAWtB,UAAlE;AACH;AA/BqB;AAgCzB;;AAEY4B,gBAAc,CAACC,GAAD,EAAmB;AAAA;;AAAA;AAC1C,YAAM,MAAI,CAACtC,YAAL,CAAkBuC,OAAlB,CAA0BD,GAA1B,CAAN;AAD0C;AAE7C;;AAEME,iBAAe;AAClB,SAAKC,YAAL,CAAkBC,IAAlB;AACH;;AAEMC,mBAAiB;AACpB,QAAI,KAAKpB,OAAT,EAAkB;AACd,WAAKqB,QAAL,CAAcC,aAAd,CAA4BC,KAA5B;AACH;AACJ;;AAEMnB,eAAa,CAACoB,KAAD,EAAe;AAC/B,SAAKH,QAAL,CAAcC,aAAd,CAA4BG,aAA5B,CACI,IAAIC,aAAJ,CAAkB,SAAlB,EAA6B;AACzBC,aAAO,EAAE,EADgB;AAEzBC,aAAO,EAAE;AAFgB,KAA7B,CADJ;;AAOA,QAAI,KAAKC,gBAAT,EAA2B;AACvB;AACH;;AAED,UAAMC,YAAY,GAAG,KAAK/C,UAAL,CAAgB,KAAKJ,SAAL,CAAeC,KAA/B,CAArB;;AACA,QAAI4C,KAAK,IAAI,CAACM,YAAV,IAA0B,CAACA,YAAY,CAACC,OAAxC,IAAmDD,YAAY,CAACC,OAAb,KAAyB,EAAhF,EAAoF;AAChF,WAAKV,QAAL,CAAcC,aAAd,CAA4BU,KAA5B,GAAoC,EAApC;AACA,WAAKC,YAAL,CAAkB;AACdC,mBAAW,EAAE7E,4GAAA,EADC;AAEdsB,iBAAS,EAAE,KAAKA;AAFF,OAAlB;AAIH;;AAED,QAAI,KAAK0C,QAAL,CAAcC,aAAd,CAA4BU,KAA5B,KAAsC,EAAtC,IAA4C,CAACR,KAAjD,EAAwD;AACpD,WAAKH,QAAL,CAAcC,aAAd,CAA4BU,KAA5B,GAAoC,KAAKI,UAAzC;AACH;AACJ;;AAEM1B,cAAY,CAACwB,WAAD,EAAqC;AACpD,SAAKL,gBAAL,GAAwB,IAAxB;AACA,SAAK3B,eAAL,GAAuB,IAAvB;;AACA,QAAIgC,WAAW,CAACvB,IAAZ,CAAiB0B,YAArB,EAAmC;AAC/B,YAAMC,kBAAkB,GAAIC,OAAD,IAA2B;AAClD,aAAKH,UAAL,GAAkBG,OAAO,CAACrD,UAA1B;AACA,aAAK+C,YAAL,CAAkB;AACdC,qBAAW,EAAEK,OADC;AAEd5D,mBAAS,EAAE,KAAKA;AAFF,SAAlB;AAKA6D,6BAAqB,CAAC,MAAK;AACvBC,iBAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,iBAAO,CAACC,GAAR,CAAYH,OAAZ;AACA,eAAK9B,SAAL,CAAeG,QAAf,CAAwB,KAAKjC,SAAL,CAAeC,KAAvC,EAA8CiC,QAA9C,CAAuD0B,OAAO,CAACI,WAA/D;AACA,eAAKC,cAAL;AACH,SALoB,CAArB;AAMH,OAbD;;AAeA,UAAIV,WAAW,CAACvB,IAAZ,CAAiBoB,OAArB,EAA8B;AAC1BO,0BAAkB,CAACJ,WAAW,CAACvB,IAAb,CAAlB;AACA;AACH;;AAED,WAAKxC,cAAL,CACK0E,uBADL,GAEKC,IAFL,CAEUtF,0DAAS,CAAC,KAAKoC,QAAN,CAFnB,EAGKmD,SAHL,CAISC,mBAAD,IAAwB;AACpBV,0BAAkB,CAACU,mBAAD,CAAlB;AACH,OANT,EAOSC,KAAD,IAAU;AACN,aAAKxC,SAAL,CAAeG,QAAf,CAAwB,KAAKjC,SAAL,CAAeC,KAAvC,EAA8CsE,KAA9C;AACA,aAAK3E,aAAL,CAAmB4E,YAAnB,CAAgC;AAAEC,iBAAO,EAAEH;AAAX,SAAhC;AACAR,eAAO,CAACC,GAAR,CAAY,yCAAZ,EAAuDO,KAAvD;AACH,OAXT;AAcA;AACH;;AAED,UAAMI,eAAe,GAAGnB,WAAW,CAACvB,IAAZ,CAAiB2C,QAAzC;AACA,SAAKnF,cAAL,CAAoBoF,mBAApB,CAAwCrB,WAAW,CAACvB,IAApD,EAA0D,KAAKrB,QAA/D,EAAyE,KAAKT,SAA9E,EAAyF,KAAKE,UAA9F,EAA0GyE,IAA1G,CACKzC,GAAD,IAAa;AACT,WAAK0C,aAAL,CAAmB1C,GAAnB;AACA,WAAKqB,UAAL,GAAkBrB,GAAG,CAAC7B,UAAtB;AACA,WAAKf,cAAL,CAAoBuF,qBAApB,CAAyCC,gCAChCzB,WAAW,CAACvB,IADoB,GACXI,GADW,CAAzC,EAEI,KAAKpC,SAFT,EAGI,KAAKE,SAHT;;AAMA,UAAI,CAACwE,eAAL,EAAsB;AAClBb,6BAAqB,CAAC,MAAK;AACvB,eAAKI,cAAL;AACH,SAFoB,CAArB;AAGH;AACJ,KAfL,EAgBK7B,GAAD,IAAa;AACT,WAAK0C,aAAL,CAAmB1C,GAAnB;AACA,WAAKc,gBAAL,GAAwB,KAAxB;AACAY,aAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB3B,GAAtB;AACH,KApBL;;AAuBA,QAAIsC,eAAJ,EAAqB;AACjB,WAAKT,cAAL;AACH;AACJ;;AAEMgB,iBAAe;AAClB,UAAMC,QAAQ,GAAG,KAAKzB,UAAtB;AACA,UAAMN,YAAY,GAAG,KAAK/C,UAAL,CAAgB,KAAKJ,SAAL,CAAeC,KAA/B,CAArB;;AAEA,QAAI,CAACkD,YAAD,IAAiB,CAACA,YAAY,CAACa,WAA/B,IAA8CkB,QAAQ,CAACC,IAAT,OAAoBhC,YAAY,CAACa,WAAb,CAAyBmB,IAAzB,EAAtE,EAAuG;AACnG;AACH;;AAED,QAAIC,KAAK,GAAG,EAAZ;AACA,UAAMC,oBAAoB,GAAGH,QAAQ,CAACI,MAAT,GAAkBnC,YAAY,CAACa,WAAb,CAAyBsB,MAAxE;;AACA,QAAID,oBAAJ,EAA0B;AACtB,UAAIlC,YAAY,CAACa,WAAb,KAA6BkB,QAAQ,CAACK,SAAT,CAAmB,CAAnB,EAAsBpC,YAAY,CAACa,WAAb,CAAyBsB,MAA/C,CAAjC,EAAyF;AACrFF,aAAK,GAAGF,QAAQ,CAACA,QAAQ,CAACI,MAAT,GAAkB,CAAnB,CAAhB;AACH,OAFD,MAEO;AACH,cAAME,QAAQ,GAAG,KAAKC,WAAL,CAAiBP,QAAjB,EAA2B/B,YAAY,CAACa,WAAxC,CAAjB;;AACA,YAAIwB,QAAJ,EAAc;AACVJ,eAAK,GAAGI,QAAR;AACH,SAFD,MAEO;AACH;AACH;AACJ;AACJ,KAXD,MAWO,IAAIN,QAAQ,CAACI,MAAT,GAAkB,CAAtB,EAAyB;AAC5BF,WAAK,GAAGF,QAAR;AACH,KAFM,MAEA,IAAIA,QAAQ,CAACI,MAAT,IAAmBnC,YAAY,CAACa,WAAb,CAAyBsB,MAAhD,EAAwD;AAC3D;AACH;;AAED,UAAMI,MAAM,GAAGhH,4GAAA,EAAf;AACAgH,UAAM,CAACnF,UAAP,GAAoB6E,KAApB;AACA,SAAK9B,YAAL,CAAkB;AACdC,iBAAW,EAAEmC,MADC;AAEd1F,eAAS,EAAE,KAAKA;AAFF,KAAlB;AAIH;;AAEY2F,iBAAe;AAAA;;AAAA;AACxB,YAAM,MAAI,CAAC7F,YAAL,CAAkBuC,OAAlB,CAA0B,MAAI,CAACuD,OAAL,CAAa,CAAb,CAA1B,CAAN;AADwB;AAE3B;;AAEMC,cAAY,CAACxC,KAAD,EAAc;AAC7B,SAAKyC,cAAL,GAAsB,IAAtB;;AAEA,QAAI,CAACzC,KAAL,EAAY;AACR,WAAKuC,OAAL,GAAe,KAAKA,OAAL,CAAaG,MAAb,CAAqBC,MAAD,IAAYA,MAAM,CAACtC,YAAvC,CAAf;AACH;AACJ;;AAEMuC,aAAW,CAAC5C,KAAD,EAAc;AAC5B,SAAKyC,cAAL,GAAsB,KAAtB;;AAEA,QAAI,CAACzC,KAAL,EAAY;AACR,WAAK6C,iBAAL;AACH;AACJ;;AAEOrF,YAAU;AACd,SAAKiB,SAAL,CAAeG,QAAf,CAAwB,KAAKjC,SAAL,CAAeC,KAAvC,EAA8CkG,YAA9C,CACKhC,IADL,CACUxF,6DAAY,CAAC,GAAD,CADtB,EAC6BC,qEAAoB,EADjD,EACqDC,0DAAS,CAAC,KAAKoC,QAAN,CAD9D,EAEKmD,SAFL,CAEgBgC,IAAD,IAAiB;AACxB,WAAK5G,cAAL,CACK6G,gBADL,CACsBD,IADtB,EAC4B,KAAKpG,SADjC,EAC4C,KAAKE,SADjD,EAC4D,KAAKE,UADjE,EAEKgE,SAFL,CAEgBhC,GAAD,IAAyB;AAChC,aAAKwD,OAAL,GAAexD,GAAf;AACH,OAJL;AAKH,KARL;AAUAkE,cAAU,CAAC,MAAK;AACZ,UAAI,CAAC,KAAK7C,UAAV,EAAsB;AAClB,aAAKyC,iBAAL;AACH;AACJ,KAJS,EAIP,EAJO,CAAV;AAKH;;AAEOA,mBAAiB;AACrB,SAAK1G,cAAL,CACK6G,gBADL,CACsB,EADtB,EAC0B,KAAKrG,SAD/B,EAC0C,KAAKE,SAD/C,EAC0D,KAAKE,UAD/D,EAEKgE,SAFL,CAEgBhC,GAAD,IAAyB;AAChC,WAAKwD,OAAL,GAAexD,GAAf;AACH,KAJL;AAKH;;AAEOkB,cAAY,CAACiD,GAAD,EAA0C;AAC1D,QAAI,CAACA,GAAG,CAAChD,WAAJ,CAAgBH,OAAjB,IAA4BmD,GAAG,CAAChD,WAAJ,CAAgBH,OAAhB,KAA4B,EAA5D,EAAgE;AAC5D,WAAKtB,SAAL,CAAeG,QAAf,CAAwB,KAAKjC,SAAL,CAAeC,KAAvC,EAA8CsE,KAA9C;AACH;;AAED,SAAKiC,WAAL,CAAiBhE,IAAjB,CAAsB+D,GAAtB;AACH;;AAEOzB,eAAa,CAAC2B,UAAD,EAAgB;AACjC,QAAI,CAACA,UAAL,EAAiB;AACbA,gBAAU,GAAG/H,4GAAA,EAAb;AACH;;AAED+H,cAAU,CAACzC,WAAX,GAAyByC,UAAU,IAAIA,UAAU,CAAClG,UAAzB,GAAsCkG,UAAU,CAAClG,UAAjD,GAA8D,EAAvF;AACA,SAAK+C,YAAL,CAAkB;AACdC,iBAAW,EAAEkD,UADC;AAEdzG,eAAS,EAAE,KAAKA;AAFF,KAAlB;AAIH;;AAEOyF,aAAW,CAAClF,UAAD,EAAqByD,WAArB,EAAwC;AACvD,SAAK,IAAI0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1C,WAAW,CAACsB,MAAhC,EAAwCoB,CAAC,EAAzC,EAA6C;AACzC,UAAI1C,WAAW,CAAC0C,CAAD,CAAX,KAAmBnG,UAAU,CAACmG,CAAD,CAAjC,EAAsC;AAClC,eAAOnG,UAAU,CAACmG,CAAD,CAAjB;AACH;AACJ;;AACD,WAAOC,SAAP;AACH;;AAEO1C,gBAAc;AAClB,SAAKtE,gBAAL,CAAsBiH,eAAtB,CAAsC9H,2FAAtC,EAAoE;AAChEgI,QAAE,EAAE,WAAW,KAAK9G,SAAL,CAAe+G,QADkC;AAEhEC,YAAM,EAAEjI,2FAAqBkI;AAFmC,KAApE;AAIA,SAAK/D,gBAAL,GAAwB,KAAxB;AACH;;AAEOnC,eAAa;AACjB,QAAI,KAAKX,UAAL,CAAgB,KAAKJ,SAAL,CAAeC,KAA/B,EAAsCM,UAA1C,EAAsD;AAClD,YAAMA,UAAU,GAAG,KAAKH,UAAL,CAAgB,KAAKJ,SAAL,CAAeC,KAA/B,EAAsCM,UAAzD;AACA,WAAKuB,SAAL,CAAeG,QAAf,CAAwB,KAAKjC,SAAL,CAAeC,KAAvC,EAA8CiC,QAA9C,CAAuD3B,UAAvD;AACA,WAAKkD,UAAL,GAAkBlD,UAAlB;AACH;AACJ;;AAxU4B;;;mBAApBjB,sBAAoBL,gEAAAA,CAAAA,sFAAAA,GAAAA,gEAAAA,CAAAA,kGAAAA,GAAAA,gEAAAA,CAAAA,oFAAAA,GAAAA,gEAAAA,CAAAA,sFAAAA,GAAAA,gEAAAA,CAAAA,mEAAAA,GAAAA,gEAAAA,CAAAA,uEAAAA,GAAAA,gEAAAA,CAAAA,kEAAAA;AAAA;;;QAApBK;AAAoB4H;AAAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BjClI,MAAAA,6DAAAA,cAOC,CAPD,EAOC,KAPD,EAOC,CAPD;AAYQA,MAAAA,yDAAAA;AAAA,eAASmI,uBAAT;AAA4B,OAA5B;AAEAnI,MAAAA,yDAAAA;AAIAA,MAAAA,6DAAAA;AAIIA,MAAAA,yDAAAA;AAAA,eAASmI,mBAAT;AAAwB,OAAxB,EAAyB,OAAzB,EAAyB;AAAA,eAGhBA,qBAHgB;AAGC,OAH1B,EAAyB,eAAzB,EAAyB;AAAA,eAYRA,qBAZQ;AAYS,OAZlC,EAAyB,OAAzB,EAAyB;AAAAnI,QAAAA,4DAAAA;;AAAA;;AAahBmI;AAAsC,eAAEA,2BAAF;AAA8B,OAb7E,EAAyB,MAAzB,EAAyB;AAAAnI,QAAAA,4DAAAA;;AAAA;;AAAA,eAcjBmI,0BAdiB;AAcU,OAdnC;;AAJJnI,MAAAA,2DAAAA;AAsBAA,MAAAA,6DAAAA;AACIA,MAAAA,yDAAAA;AACJA,MAAAA,2DAAAA;AAQAA,MAAAA,6DAAAA;AAAsCA,MAAAA,yDAAAA;AAAA,eAASmI,kBAAc,IAAd,CAAT;AAA4B,OAA5B;AAA8BnI,MAAAA,2DAAAA;AACpEA,MAAAA,yDAAAA;AACJA,MAAAA,2DAAAA;AAGJA,MAAAA,yDAAAA;;;;;;AArDIA,MAAAA,yDAAAA,YAAAA,8DAAAA;AAOIA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA,6BAAuB,SAAvB,EAAuBA,8DAAAA,4EAAvB;AAKMA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAMFA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA,yCAAmC,aAAnC,EAAmCA,0DAAAA,kCAAnC,EAAmC,WAAnC,EAAmCmI,uBAAnC,EAAmC,UAAnC,EAAmCA,sBAAnC,EAAmC,iBAAnC,EAAmCA,aAAnC,EAAmC,gBAAnC,EAAmCA,mBAAnC,EAAmC,gBAAnC,EAAmC,IAAnC,EAAmC,UAAnC,EAAmC,YAAnC;AAGAnI,MAAAA,0DAAAA;AAkBcA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAUZA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAIRA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3CiB;AAE4C;AACN;AAEC;AAE/B;AACY;AAKkB;;;;;;;;;;;;;;ICbrD,yEAOC;IACG,wDACJ;IAAA,6DAAI;;;IADA,2DACJ;IADI,iGACJ;;;IASY,wEAAmC;IAAA,wDAEjC;;IAAA,6DAAO;;;IAF0B,2DAEjC;IAFiC,yMAEjC;;;IACF,wEAAmC;IAAA,wDAEjC;;IAAA,6DAAO;;;IAF0B,2DAEjC;IAFiC,0MAEjC;;;IACF,yEAAkE;IAC9D,uEAA+C;IAC/C,wEAAM;IAAA,wDAA0B;IAAA,6DAAO;IACvC,wEAAM;IACF,wDACJ;;IAAA,6DAAO;IACX,sEAAe;;;IAJL,2DAA0B;IAA1B,sGAA0B;IAE5B,2DACJ;IADI,wNACJ;;;IAEJ,yEAA+D;IAC3D,uEAA+C;IAC/C,wEAAM;IAAA,wDAAuB;IAAA,6DAAO;IACpC,wEAAM;IAAA,wDAAyE;;IAAA,6DAAO;IAC1F,sEAAe;;;IAFL,2DAAuB;IAAvB,mGAAuB;IACvB,2DAAyE;IAAzE,gMAAyE;;;IApBvF,yEAA2C;IACvC,wEAAM;IAAA,wDAAqE;;IAAA,6DAAO;IAClF,uEAAuD;IACvD,wEAAM;IAAA,wDAAmE;IAAA,6DAAO;IAChF,8IAES;IACT,8IAES;IACT,8JAMe;IACf,gKAIe;IACnB,sEAAe;;;IArBL,2DAAqE;IAArE,sMAAqE;IAErE,2DAAmE;IAAnE,6JAAmE;IAClE,2DAA0B;IAA1B,8FAA0B;IAG1B,2DAA0B;IAA1B,8FAA0B;IAGlB,2DAAiD;IAAjD,4HAAiD;IAOjD,2DAA8C;IAA9C,yHAA8C;;;;;IA3CjF,0EAKC;IACyC,uSAAS,kBAAW,IAAC;IACvD,6EAAoE;IACxE,6DAAM;IAEN,0EAAmG;IAAzB,uSAAS,qBAAc,IAAC;IAC9F,wEAAkE;IAAA,wDAAqB;IAAA,6DAAI;IAC3F,wHASI;IAEJ,0EAA4B;IAEd,yDAAsD;IAAA,6DAAO;IACnE,iJAsBe;IACnB,6DAAI;IAEJ,+EAAkF;IACtF,6DAAM;IAIV,4EAAuE;IAAjC,ySAAS,8BAAsB,IAAC;IAClE,0EAA0C;IAAA,yDAAc;IAAA,6DAAI;IAC5D,+EAMc;IAClB,6DAAM;;;IA1DoC,2DAAe;IAAf,yEAAe;IAIa,2DAAqB;IAArB,wFAAqB;IAElF,2DAIX;IAJW,oOAIX;IAQoB,2DAAsD;IAAtD,gIAAsD;IAC7C,2DAA0B;IAA1B,8FAA0B;IAyBO,2DAAe;IAAf,yEAAe;IAM7B,2DAAc;IAAd,iFAAc;IAGpD,2DAEE;IAFF,2IAEE;;ADvBP,MAAM,yBAAyB;IAelC,YACY,iBAAoC,EACpC,iBAAoC,EAC5C,QAAkB,EACV,MAAc,EACf,QAAkB,EACjB,iBAAoC,EACpC,WAAwB,EACxB,iBAAqC,EACrC,eAAgC,EAChC,YAA0B,EAC1B,QAAkB;QAVlB,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,sBAAiB,GAAjB,iBAAiB,CAAmB;QAEpC,WAAM,GAAN,MAAM,CAAQ;QACf,aAAQ,GAAR,QAAQ,CAAU;QACjB,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,gBAAW,GAAX,WAAW,CAAa;QACxB,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,oBAAe,GAAf,eAAe,CAAiB;QAChC,iBAAY,GAAZ,YAAY,CAAc;QAC1B,aAAQ,GAAR,QAAQ,CAAU;QAzBrB,qBAAgB,GAA+B,qGAAuC,CAAC;QACvF,uBAAkB,GAAG,KAAK,CAAC;QAC3B,mBAAc,GAAc,+EAAiB,CAAC;QAC7C,eAAU,GAAuB,IAAI,wDAAY,EAAQ,CAAC;QAK7D,cAAS,GAAG,uEAAS,CAAC;QACrB,aAAQ,GAAqB,IAAI,0CAAO,EAAW,CAAC;QA0CrD,eAAU,GAAG,CAAC,IAAY,EAAE,KAAa,EAAE,EAAE,KAAa,EAAE,EAAE,EAAE,CACnE,IAAI,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;QAzBzD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,wEAAa,CAAC,CAAC;QAE7C,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,CAAC,0DAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAClF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACvC,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACrC,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,QAAQ;QACX,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEvC,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAEM,WAAW;QACd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAED,WAAW,CAAC,OAAsB;QAC9B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAC3C,CAAC;IAKM,YAAY,CAAC,SAAoB;;QACpC,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;QAEtC,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAE/E,IAAI,CAAC,UAAU,EAAE;YACb,OAAO;SACV;QAED,QAAQ,SAAS,EAAE;YACf,KAAK,oFAAsB,CAAC,CAAC;gBACzB,IAAI,CAAC,UAAU,mBACX,EAAE,EAAE,UAAU,CAAC,EAAE,CAAC,UAAU,EAC5B,IAAI,EAAE,gBAAU,CAAC,IAAI,0CAAE,UAAU,EACjC,MAAM,EAAE,UAAU,CAAC,MAAM,EACzB,QAAQ,EAAE,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,OAAO,EAClD,MAAM,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,EACzF,KAAK,EAAE,UAAU,CAAC,KAAK,IACpB,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CACnF,CAAC;gBAEF,MAAM;aACT;YACD,KAAK,2EAAa,CAAC,CAAC;gBAChB,IAAI,CAAC,UAAU,mBACX,EAAE,EAAE,UAAU,CAAC,OAAO,CAAC,UAAU,EACjC,MAAM,EAAE,UAAU,CAAC,MAAM,EACzB,QAAQ,EAAE,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,OAAO,EAClD,MAAM,EAAE,UAAU,CAAC,KAAK,EACxB,KAAK,EAAE,UAAU,CAAC,KAAK,IACpB,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CACnF,CAAC;gBAEF,MAAM;aACT;YACD,KAAK,gFAAkB,CAAC,CAAC;gBACrB,IAAI,CAAC,UAAU,mBACX,EAAE,EAAE,gBAAU,CAAC,OAAO,0CAAE,UAAU,EAClC,IAAI,EAAE,gBAAU,CAAC,EAAE,0CAAE,UAAU,EAC/B,MAAM,EAAE,UAAU,CAAC,MAAM,EACzB,QAAQ,EAAE,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,OAAO,EAClD,MAAM,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,EACzF,KAAK,EAAE,UAAU,CAAC,KAAK,IACpB,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAC3F,CAAC;gBAEF,MAAM;aACT;YACD,KAAK,kFAAoB,CAAC,CAAC;gBACvB,IAAI,CAAC,UAAU,GAAG;oBACd,IAAI,EAAE,gBAAU,CAAC,EAAE,0CAAE,UAAU;oBAC/B,EAAE,EAAE,gBAAU,CAAC,OAAO,0CAAE,UAAU;oBAClC,MAAM,EAAE,UAAU,CAAC,MAAM;oBACzB,MAAM,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM;oBACzF,QAAQ,EAAE,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,OAAO;oBAClD,KAAK,EAAE,UAAU,CAAC,KAAK;iBAC1B,CAAC;gBAEF,IAAI,UAAU,CAAC,SAAS,EAAE;oBACtB,IAAI,CAAC,UAAU,mCACR,IAAI,CAAC,UAAU,GACf,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,SAAS,CAAC,CACjD,CAAC;iBACL;gBACD,MAAM;aACT;SACJ;IACL,CAAC;IAEM,SAAS;QACZ,IAAI,IAAI,CAAC,cAAc,KAAK,mFAAqB,EAAE;YAC/C,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,2EAAa,EAAE,SAAS,EAAE,KAAK,EAAE,mFAAqB,CAAC,CAAC;YACzF,OAAO;SACV;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACzB,CAAC;IAEM,YAAY;QACf,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAEM,oBAAoB;QACvB,MAAM,MAAM,GAAsB,EAAE,CAAC;QAErC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YACzB,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;QAE5C,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;;YACnF,IAAI,WAAK,CAAC,IAAI,0CAAE,QAAQ,EAAE;gBACtB,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;aAC5D;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,gBAAgB,CAAC,QAAgB,EAAE,MAAe,EAAE,EAAW,EAAE,EAAW;QAChF,IAAI,MAAM,IAAI,EAAE,IAAI,EAAE,EAAE;YACpB,OAAO;gBACH,SAAS,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,GAAG,GAAG,GAAG,EAAE,EAAE,aAAa,CAAC,MACrE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,GAAG,GAAG,EAAE,EAAE,KAAK,CAAC;oBACjD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,GAAG,GAAG,GAAG,EAAE,EAAE,KAAK,CAAC;oBAC/C,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,GAAG,GAAG,EAAE,EAAE,aAAa,CAAC;oBAC3D,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,GAAG,GAAG,EAAE,EAAE,aAAa,CAClE,EAAE;aACL,CAAC;SACL;aAAM,IAAI,MAAM,EAAE;YACf,OAAO;gBACH,SAAS,EACL,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC;oBAC/E,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,GAAG,CAAC,MAAM,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,YAAY,CAAC,EAAE;oBAChG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,CAAC,MAAM,IAAI,CAAC,QAAQ,CAAC,SAAS,CACtE,MAAM,EACN,YAAY,CACf,EAAE;aAChB,CAAC;SACL;aAAM,IAAI,QAAQ,IAAI,EAAE,EAAE;YACvB,OAAO;gBACH,SAAS,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,GAAG,GAAG,GAAG,EAAE,EAAE,kBAAkB,CAAC,EAAE;aACnF,CAAC;SACL;aAAM;YACH,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC;SACtD;IACL,CAAC;IAEO,gBAAgB,CAAC,SAAiC;QACtD,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ,GAAG,GAAG,GAAG,SAAS,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,GAAG,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;QAEtG,OAAO,EAAE,SAAS,EAAE,GAAG,QAAQ,MAAM,MAAM,EAAE,EAAE,CAAC;IACpD,CAAC;IAEO,yBAAyB;QAC7B,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAChD,IAAI,QAAQ,EAAE;YACV,MAAM,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAExF,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,IAAI,CACtC,CAAC,YAAwC,EAAE,EAAE,CAAC,YAAY,CAAC,SAAS,KAAK,2EAAa,CACzF,CAAC;SACL;IACL,CAAC;IAEO,aAAa;QACjB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC;IACtD,CAAC;IAEO,cAAc;QAClB,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;YAChE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC;YACvC,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC;YACjC,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;QAC3C,CAAC,CAAC,CAAC;IACP,CAAC;;kGAlNQ,yBAAyB;wHAAzB,yBAAyB;QCvCtC,uHAkEM;;QAjED,iFAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYE;AASC;AAGwC;AAEG;AAEZ;AACxB;AAC0B;;;;;;;;;;;;;;;;;ICtBrD,6EAUC;IACG,qEAAyE;IACzE,uDACA;IAAA,qEAAuC;IAC3C,4DAAS;;;IARL,4FAA4B;IAF5B,kGAAsC;IAQtC,0DACA;IADA,yGACA;;;IAEJ,6EASC;IACG,uEAKE;IAEN,4DAAS;;;IAXL,4FAA4B;IAF5B,kGAAsC;IASlC,0DAAgC;IAAhC,gGAAgC;;;;;;;IAYhC,0EAAgF;IACtD,uDAAgC;;IAAA,4DAAM;IAC5D,0EAAyB;IAIjB,oTAAS,iBAAU,CAAC,CAAC,IAAC;IAKtB,6EAA+F;IACnG,4DAAM;IACN,0EAAuF;IACnF,uDACJ;IAAA,4DAAM;IACN,0EAQC;IALG,qTAAS,iBAAS,CAAC,CAAC,IAAC;IAMrB,8EAA8F;IAClG,4DAAM;;;IAzBY,0DAAgC;IAAhC,gJAAgC;IAM9C,0DAEE;IAFF,qMAEE;IAEW,0DAA8C;IAA9C,0IAA8C;IAG3D,0DACJ;IADI,oGACJ;IAKI,0DAGE;IAHF,+PAGE;IAEW,0DAA8C;IAA9C,0IAA8C;;;IAmE/D,4EAGC;IACG,0EAAyB;IACrB,2EAWa;IACjB,4DAAM;IACV,qEAAe;;;;IAdN,0DAAmB;IAAnB,gFAAmB;IAGhB,0DAAuB;IAAvB,wFAAuB;;;IAZ3C,wEAA4C;IACxC,0EAGC;IACG,sKAkBe;IACnB,4DAAM;IACV,qEAAe;;;IAlBqB,0DAAuB;IAAvB,8FAAuB;;;;IA/F/D,wEAAyC;IACrC,sIA4BM;IACN,0EAA2D;IACjC,uDAAiC;;IAAA,4DAAM;IAC7D,0EAAyB;IAIjB,+SAAS,mBAAW,CAAC,CAAC,IAAC;IAKvB,6EAA+F;IACnG,4DAAM;IACN,0EAAwF;IACpF,wDACJ;IAAA,4DAAM;IACN,2EAOC;IAJG,gTAAS,kBAAU,CAAC,CAAC,IAAC;IAKtB,8EAA8F;IAClG,4DAAM;IAGd,2EAAgE;IACtC,wDAAmC;;IAAA,4DAAM;IAC/D,2EAAyB;IAIjB,gTAAS,kBAAU,CAAC,CAAC,IAAC;IAKtB,8EAA+F;IACnG,4DAAM;IACN,2EAAuF;IACnF,wDACJ;IAAA,4DAAM;IACN,2EASC;IANG,gTAAS,iBAAS,CAAC,CAAC,IAAC;IAOrB,8EAA8F;IAClG,4DAAM;IAGd,uJAyBe;IACnB,qEAAe;;;IAjHiD,0DAAkB;IAAlB,qFAAkB;IA8BpD,0DAAiC;IAAjC,kJAAiC;IAM/C,0DAEE;IAFF,wMAEE;IAEW,0DAA8C;IAA9C,0IAA8C;IAG3D,0DACJ;IADI,qGACJ;IAKI,0DAEE;IAFF,gNAEE;IAEW,0DAA8C;IAA9C,0IAA8C;IAK7C,0DAAmC;IAAnC,qJAAmC;IAMjD,0DAEE;IAFF,uMAEE;IAEW,0DAA8C;IAA9C,0IAA8C;IAG3D,0DACJ;IADI,oGACJ;IAKI,0DAIE;IAJF,8QAIE;IAEW,0DAA8C;IAA9C,0IAA8C;IAIxD,0DAA2B;IAA3B,8FAA2B;;;;IA2B9C,0EAKC;IACyB,uDAAgD;;IAAA,4DAAM;IAC5E,0EAAyC;IAEjC,2EAQE;IACN,4DAAM;;;IAdV,oKAAgD;IAE1B,0DAAgD;IAAhD,gKAAgD;IAS1D,0DAAgB;IAAhB,yEAAgB;;;;IAlLxC,4EAQC;IAFG,+SAAc,8BAAsB,IAAC;IAGrC,0HAcS;IACT,0HAiBS;IACT,yEAKC;IACG,wIAkHe;IACf,oHAoBM;IACN,4EAIC;IADG,2WAAS,wBAAwB,EAAE,WAAsB,SAAE,4BAAoB,IAAI,CAAC,IAAC;IAErF,uDACJ;;IAAA,4DAAS;;;IAzLb,8FAA8B;IAYzB,0DAAe;IAAf,kFAAe;IAef,0DAAc;IAAd,iFAAc;IAcf,0DAAiC;IAAjC,iGAAiC;IAElB,0DAAwB;IAAxB,2FAAwB;IAsHlC,0DAAmB;IAAnB,sFAAmB;IAuBpB,0DACJ;IADI,2JACJ;;;;IAYJ,4EAUE;IADE,0SAAS,8BAAsB,IAAC;IATpC,4DAUE;;;IAHE,6FAA4B;IAF5B,mGAAsC;;;IAgBlC,2EAA4D;IAAA,kEAAO;IAAA,4DAAO;;;IAD9E,uEAA2D;IACvD,oIAA0E;IAAA,uDAC9E;IAAA,4DAAO;;;;IAD0C,0DAAa;IAAb,6EAAa;IAAgB,0DAC9E;IAD8E,qFAC9E;;;;IAVJ,0EAKC;IAHG,sSAAS,8BAAsB,IAAC;IAIhC,6EAAiF;IAEjF,6HAEO;IACX,4DAAM;;;IALiD,0DAAe;IAAf,wEAAe;IAEzC,0DAAmB;IAAnB,2FAAmB;;;;IAYxC,0EAAgF;IACtD,uDAAgC;;IAAA,4DAAM;IAC5D,0EAAyB;IAIjB,qTAAS,kBAAU,CAAC,CAAC,IAAC;IAKtB,6EAA6E;IACjF,4DAAM;IACN,0EAAuF;IACnF,uDACJ;IAAA,4DAAM;IACN,0EAQC;IALG,qTAAS,iBAAS,CAAC,CAAC,IAAC;IAMrB,8EAA4E;IAChF,4DAAM;;;IAzBY,0DAAgC;IAAhC,gJAAgC;IAM9C,0DAEE;IAFF,uMAEE;IAEW,0DAAgB;IAAhB,yEAAgB;IAG7B,0DACJ;IADI,qGACJ;IAKI,0DAGE;IAHF,mQAGE;IAEW,0DAAgB;IAAhB,yEAAgB;;;;;IAmEjC,4EAGC;IACG,0EAAsC;IACA,mYAAS,yDAAqC,IAAC;IAC7E,2EAIC;IACG,uDAOJ;;;IAAA,4DAAO;IAEP,2EAAwC;IACpC,6EAAuD;IAC3D,4DAAO;IAGnB,qEAAe;;;IAlBC,0DAEE;IAFF,iLAEE;IAEF,0DAOJ;IAPI,wWAOJ;;;IAvBpB,wEAA4C;IACxC,0EAGC;IACG,sKAyBe;IACnB,4DAAM;IACV,qEAAe;;;IAzBqB,0DAAuB;IAAvB,+FAAuB;;;;IA/F/D,wEAAyC;IACrC,sIA4BM;IACN,0EAA2D;IACjC,uDAAiC;;IAAA,4DAAM;IAC7D,0EAAyB;IAIjB,+SAAS,mBAAW,CAAC,CAAC,IAAC;IAKvB,6EAA6E;IACjF,4DAAM;IACN,0EAAwF;IACpF,wDACJ;IAAA,4DAAM;IACN,2EAOC;IAJG,gTAAS,kBAAU,CAAC,CAAC,IAAC;IAKtB,8EAA4E;IAChF,4DAAM;IAGd,2EAAgE;IACtC,wDAAmC;;IAAA,4DAAM;IAC/D,2EAAyB;IAIjB,gTAAS,kBAAU,CAAC,CAAC,IAAC;IAKtB,8EAA6E;IACjF,4DAAM;IACN,2EAAuF;IACnF,wDACJ;IAAA,4DAAM;IACN,2EASC;IANG,gTAAS,iBAAS,CAAC,CAAC,IAAC;IAOrB,8EAA4E;IAChF,4DAAM;IAGd,uJAgCe;IACnB,qEAAe;;;IAxHiD,0DAAkB;IAAlB,sFAAkB;IA8BpD,0DAAiC;IAAjC,kJAAiC;IAM/C,0DAEE;IAFF,0MAEE;IAEW,0DAAgB;IAAhB,yEAAgB;IAG7B,0DACJ;IADI,sGACJ;IAKI,0DAEE;IAFF,kNAEE;IAEW,0DAAgB;IAAhB,yEAAgB;IAKf,0DAAmC;IAAnC,qJAAmC;IAMjD,0DAEE;IAFF,yMAEE;IAEW,0DAAgB;IAAhB,yEAAgB;IAG7B,0DACJ;IADI,qGACJ;IAKI,0DAIE;IAJF,kRAIE;IAEW,0DAAgB;IAAhB,yEAAgB;IAI1B,0DAA2B;IAA3B,+FAA2B;;;;IAkC9C,0EAKC;IACyB,uDAAgD;;IAAA,4DAAM;IAC5E,0EAAoE;IAAjC,sSAAS,8BAAsB,IAAC;IAC/D,2EAIC;IACG,uDAKJ;;IAAA,4DAAO;IAEP,2EAAwC;IACpC,6EAAuD;IAC3D,4DAAO;;;IAlBX,qKAAgD;IAE1B,0DAAgD;IAAhD,gKAAgD;IAG9D,0DAEE;IAFF,qMAEE;IAEF,0DAKJ;IALI,yRAKJ;;;;;;IAnLhB,0EAOC;IACG,yHAUE;IAEF,qHAWM;IAEN,0EAKC;IACG,wIAyHe;IACf,uHAwBM;IAEN,0EAAoC;IAK5B,kSAAS,4BAAoB,IAAI,CAAC,IAAC;IAEnC,uDACJ;;IAAA,4DAAS;;;IA/LjB,+JAEE;IAGG,0DAAW;IAAX,8EAAW;IAYX,0DAA0B;IAA1B,oGAA0B;IAa3B,0DAAgB;IAAhB,gFAAgB;IAKD,0DAAwB;IAAxB,2FAAwB;IA6HlC,0DAAmB;IAAnB,sFAAmB;IA0BhB,0DAAsD;IAAtD,qKAAsD;IAItD,0DACJ;IADI,2JACJ;;ADzVL,MAAM,kBAAkB;IA+C3B,YACY,gBAAkC,EAClC,eAAgC,EAChC,kBAAsC,EACvC,eAAgC,EAC/B,YAA0B,EAC1B,iBAAoC;QALpC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,oBAAe,GAAf,eAAe,CAAiB;QAChC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACvC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,sBAAiB,GAAjB,iBAAiB,CAAmB;QAhDvC,wBAAmB,GAAG,IAAI,sDAAS,CAAC,EAAE,CAAC,CAAC;QACxC,aAAQ,GAAG,KAAK,CAAC;QACjB,gBAAW,GAAG,KAAK,CAAC;QAEpB,aAAQ,GAAG,KAAK,CAAC;QACjB,qBAAgB,GAA+B,qGAAuC,CAAC;QAOtF,aAAQ,GAAG,IAAI,uDAAY,EAA+B,CAAC;QAC3D,gBAAW,GAAG,IAAI,uDAAY,EAAU,CAAC;QACzC,iBAAY,GAAG,IAAI,uDAAY,EAAQ,CAAC;QACxC,yBAAoB,GAA0B,IAAI,uDAAY,EAAW,CAAC;QAE7E,mBAAc,GAAG,4FAA8B,CAAC;QAEhD,kBAAa,GAGd,EAAE,CAAC;QAkBD,aAAQ,GAAqB,IAAI,0CAAO,EAAW,CAAC;QAUxD,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,IAAI,CAAC,qDAAI,CAAC,CAAC,CAAC,EAAE,0DAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAChG,MAAM,YAAY,GAAG,2FAAgC,CACjD,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,gBAAgB,CACxB,CAAC;YACF,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,YAAY,CAAC,UAAU,CAAC;YACtD,IAAI,CAAC,wBAAwB,EAAE,CAAC;QACpC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,IAAI,SAAS;QACT,OAAO,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,WAAW,CAAc,CAAC;IACvE,CAAC;IAED,IAAI,gBAAgB;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,cAAc,CAAC;IACzD,CAAC;IAED,IAAI,gBAAgB;QAChB,IAAI,WAAW,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,QAA8B,EAAE,EAAE;YACxD,IAAI,QAAQ,CAAC,QAAQ,KAAK,CAAC,CAAC,EAAE;gBAC1B,WAAW,GAAG,KAAK,CAAC;aACvB;QACL,CAAC,CAAC,CAAC;QAEH,OAAO,WAAW,CAAC;IACvB,CAAC;IAED,IAAI,cAAc;QACd,OAAO,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACrF,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3B,CAAC;IAED,WAAW,CAAC,OAAsB;;QAC9B,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;YACnB,IAAI,CAAC,WAAW,GAAG,kFAAuB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;YACzG,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,qFAA0B,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC3E,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;YAC3D,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;gBACzB,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,wDAAW,CAAC,EAAE,EAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;aACnG;iBAAM;gBACH,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;aACpD;SACJ;QAED,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,OAAO,CAAC,eAAe,CAAC,CAAC,YAAY,EAAE;YACnE,IAAI,CAAC,WAAW,GAAG,kFAAuB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;YACzG,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;SAC9D;QAED,IAAI,OAAO,CAAC,qBAAqB,CAAC,EAAE;YAChC,UAAI,CAAC,mBAAmB,0CAAE,aAAa,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;gBACzD,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC/B,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAED,WAAW;QACP,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAEM,SAAS,CAAC,CAAS;QACtB,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,CAAC;QAC7B,MAAM,oBAAoB,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;QACnG,IAAI,oBAAoB,EAAE;YACtB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;SACpD;QAED,IAAI,CAAC,SAAS,CAAC,sBAAsB,EAAE,CAAC;QACxC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,sBAAsB,EAAE,CAAC;IACzE,CAAC;IAEM,QAAQ,CAAC,CAAS;QACrB,IAAI,CAAC,WAAW,CAAC,KAAK,IAAI,CAAC,CAAC;QAC5B,IAAI,CAAC,KAAK,CAAC,EAAE;YACT,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAE1B,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,IAAI,IAAI,CAAC,IAAI,EAAE;gBAClD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;gBAC3D,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACnC;SACJ;aAAM;YACH,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;YACtC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;SAChC;QAED,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAEM,QAAQ,CAAC,CAAS;QACrB,IAAI,CAAC,WAAW,CAAC,KAAK,IAAI,CAAC,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC/B,CAAC;IAEM,oBAAoB,CAAC,cAAc,GAAG,KAAK;QAC9C,MAAM,YAAY,GAAG,2FAAgC,CACjD,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,gBAAgB,CACxB,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,YAAY,CAAC,UAAU,CAAC;QAEtD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,YAAY,EAAE,CAAC,CAAC;QAEhD,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,IAAI,IAAI,CAAC,IAAI,EAAE;YAClD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,YAAY,EAAE,CAAC,CAAC;SACzD;QAED,IAAI,cAAc,EAAE;YAChB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;YAEzB,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;gBACrC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;aAC/B;SACJ;IACL,CAAC;IAEM,mBAAmB,CAAC,cAAc,GAAG,KAAK;QAC7C,MAAM,IAAI,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC;QAC5C,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAA4B,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACnG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC9C,CAAC;IAEM,cAAc,CAAC,WAAmB;QACrC,MAAM,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAEpE,OAAO,CACH,YAAY,CAAC,OAAO;YACpB,CAAC,YAAY,CAAC,OAAO,IAAI,YAAY,CAAC,KAAK,IAAI,CAAC,YAAY,CAAC,KAAK,KAAK,IAAI,IAAI,YAAY,CAAC,KAAK,KAAK,EAAE,CAAC,CAAC,CAC7G,CAAC;IACN,CAAC;IAEM,cAAc,CAAC,MAAe;QACjC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,kBAAkB,CAAC,gBAAgB;iBACnC,IAAI,CAAC,qDAAI,CAAC,CAAC,CAAC,EAAE,qDAAI,CAAC,CAAC,CAAC,EAAE,0DAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAChD,SAAS,CAAC,CAAC,SAAoB,EAAE,EAAE;gBAChC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;YAChC,CAAC,CAAC,CAAC;YAEP,qBAAqB,CAAC,GAAG,EAAE;;gBACvB,UAAI,CAAC,SAAS,0CAAE,aAAa,CAAC,KAAK,EAAE,CAAC;YAC1C,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEM,oBAAoB;QACvB,MAAM,SAAS,GAAyC,IAAI,0CAAO,EAA+B,CAAC;QACnG,MAAM,YAAY,GAAoB,IAAI,0CAAO,EAAU,CAAC;QAC5D,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,gBAAgB,CAAC;QAC9E,MAAM,IAAI,GAAG;YACT,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,aAAa,EAAE,IAAI,CAAC,mBAAmB;YACvC,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;YACvC,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,SAAS;YACT,YAAY;SACf,CAAC;QAEF,YAAY,CAAC,SAAS,CAAC,CAAC,KAAU,EAAE,EAAE;YAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,SAAS,CAAC,SAAS,CAAC,CAAC,KAAU,EAAE,EAAE;YAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,kBAAkB,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChF,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,mBAAmB,CAAC,aAAiD,EAAE,KAAa;QACvF,MAAM,cAAc,GAAsB,EAAE,CAAC;QAE7C,aAAa,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC3B,IAAI,QAAQ,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE;gBACvB,cAAc,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;aAC3E;QACL,CAAC,CAAC,CAAC;QAEH,MAAM,iBAAiB,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC;QAE/F,MAAM,QAAQ,GAAG,iBAAiB,IAAI,iBAAiB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QAC7G,IAAI,CAAC,YAAY;aACZ,eAAe,CAAC,EAAE,MAAM,EAAE,cAAc,EAAE,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,yBAAyB,EAAE,CAAC;aACvG,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;YACZ,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBACb,OAAO;aACV;YAED,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACrB,MAAM,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,WAAW,CAAc,CAAC;gBAC9E,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;gBACzF,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;aAC1C;QACL,CAAC,CAAC,CAAC;IACX,CAAC;IAEM,oBAAoB;QACvB,MAAM,YAAY,GAAG,yGAA2C,CAAC;QACjE,MAAM,YAAY,GAAG,yGAA2C,CAAC;QAEjE,MAAM,UAAU,GAAsB,EAAE,CAAC;QAEzC,KAAK,IAAI,CAAC,GAAG,YAAY,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;YAC/C,UAAU,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;SAC7C;QAED,MAAM,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;QACxE,MAAM,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QAE7D,IAAI,CAAC,YAAY;aACZ,eAAe,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,8BAA8B,EAAE,CAAC;aACxG,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;YACZ,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBACb,OAAO;aACV;YAED,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACrB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;gBACjG,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;aAC1C;QACL,CAAC,CAAC,CAAC;IACX,CAAC;IAEO,QAAQ;QACZ,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;QAC1E,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC/B,CAAC;IAEO,oBAAoB;QACxB,OAAO,CAAC,OAAwB,EAA2B,EAAE,CACzD,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;IAChE,CAAC;IAEO,qBAAqB;QACzB,OAAO,CAAC,OAAwB,EAA2B,EAAE;YACzD,MAAM,YAAY,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,MAA4B,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC;YAEnG,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QACpF,CAAC,CAAC;IACN,CAAC;IAEO,wBAAwB;QAC5B,IAAI,CAAC,aAAa,GAAG;YACjB,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE;YAC3E,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE;SACxE,CAAC;QAEF,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;YACrF,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;gBACpB,KAAK,EAAE,CAAC;gBACR,KAAK,EAAE,CAAC,CAAC,QAAQ,EAAE;aACtB,CAAC,CAAC;SACN;IACL,CAAC;IAEO,eAAe;QACnB,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,IAAI,IAAI,CAAC,IAAI,EAAE;YAClD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YACrC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC/B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;YACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;YAEzC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;gBACnD,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;gBACvC,IAAI,IAAI,CAAC,IAAI,EAAE;oBACX,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;oBACrC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;oBAC3D,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;oBACpC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;iBACrC;YACL,CAAC,CAAC,CAAC;YAEH,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;YAC7C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SAC9C;IACL,CAAC;;oFAlWQ,kBAAkB;gHAAlB,kBAAkB;0EACU,oEAAW;0EACX,qDAAU;;;;;;QC9CnD,+GAgMM;QAEN,gHAsMM;;QAvYD,qGAAqC;QAkMrC,0DAAoC;QAApC,oGAAoC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnMzC;AAWA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAKA;AACA;AAEA;AACA;AAEA;AAIA;AACA;AAEA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCQA,IAAAA,6DAAAA;AAYIA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAgBkJ,gCAAhB;AAAwC,KAAxC;AACHlJ,IAAAA,2DAAAA;;;;;AAHGA,IAAAA,yDAAAA,iDAAwC,SAAxC,EAAwCmJ,YAAxC;;;;;;;;AAIJnJ,IAAAA,6DAAAA;AAOIA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAeoJ,2BAAf;AAAkC,KAAlC,EAAmC,UAAnC,EAAmC;AAAApJ,MAAAA,4DAAAA;AAAA;AAAA,aACvBqJ,8BADuB;AACD,KADlC,EAAmC,cAAnC,EAAmC;AAAArJ,MAAAA,4DAAAA;AAAA;AAAA,aAEnBsJ,sBAFmB;AAEL,KAF9B;AAGHtJ,IAAAA,2DAAAA;;;;;AARGA,IAAAA,yDAAAA,iCAAwB,qBAAxB,EAAwBuJ,0BAAxB,EAAwB,QAAxB,EAAwBA,gCAAxB,EAAwB,kBAAxB,EAAwBA,uBAAxB;;;;;;AAjBRvJ,IAAAA,6DAAAA;AACIA,IAAAA,yDAAAA;AAcAA,IAAAA,yDAAAA;AA2DJA,IAAAA,2DAAAA;;;;;AAxESA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;AAcAA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;;;;;;;;;AAiELA,IAAAA,6DAAAA;AAMIA,IAAAA,yDAAAA;AAAA;AAAA;AAAA;AAAA,aAASwJ,kCAAT;AAA+B,KAA/B;AAEAxJ,IAAAA,qDAAAA;;AACJA,IAAAA,2DAAAA;;;;;;AANIA,IAAAA,yDAAAA,YAAAA,8DAAAA;AAKAA,IAAAA,wDAAAA;AAAAA,IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;AAbRA,IAAAA,6DAAAA;AAKIA,IAAAA,yDAAAA;AAUJA,IAAAA,2DAAAA;;;;;AAZIA,IAAAA,0DAAAA;AAGqBA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;;;;;;;AAoBrBA,IAAAA,6DAAAA;AAMIA,IAAAA,wDAAAA;AACJA,IAAAA,2DAAAA;;;;;AALIA,IAAAA,yDAAAA,CAAAA,8DAAAA;AAIoCA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;;;AAYpBA,IAAAA,6DAAAA;AAGIA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAgByJ,sBAAhB;AAA8B,KAA9B,EAA+B,aAA/B,EAA+B;AAAAzJ,MAAAA,4DAAAA;AAAA;AAAA,aAEhB0J,+BAFgB;AAEO,KAFtC,EAA+B,sBAA/B,EAA+B;AAAA1J,MAAAA,4DAAAA;AAAA;AAAA,aAOP2J,yCAPO;AAO0B,KAPzD;AAUJ3J,IAAAA,2DAAAA;;;;;;AAXIA,IAAAA,yDAAAA,+BAAqB,UAArB,EAAqB4J,sBAArB,EAAqB,WAArB,EAAqBA,uBAArB,EAAqB,WAArB,EAAqBC,aAArB,EAAqB,UAArB,EAAqB,gBAArB,EAAqB,UAArB,EAAqBD,gBAArB;;;;;;AAFJ5J,IAAAA,yDAAAA;;;;AACKA,IAAAA,yDAAAA;;;;;;;;AAeLA,IAAAA,6DAAAA,WAAiE,CAAjE,EAAiE,cAAjE,EAAiE,EAAjE;AAQQA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAe8J,2BAAf;AAAkC,KAAlC,EAAmC,UAAnC,EAAmC;AAAA9J,MAAAA,4DAAAA;AAAA;AAAA,aACvB+J,8BADuB;AACD,KADlC,EAAmC,cAAnC,EAAmC;AAAA/J,MAAAA,4DAAAA;AAAA;AAAA,aAEnBgK,sBAFmB;AAEL,KAF9B;AAGHhK,IAAAA,2DAAAA;;;;;AATGA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA,kCAAwB,qBAAxB,EAAwBiK,2BAAxB,EAAwB,aAAxB,EAAwB,IAAxB,EAAwB,QAAxB,EAAwBA,iCAAxB,EAAwB,kBAAxB,EAAwBA,wBAAxB;;;;;;;;AAYRjK,IAAAA,6DAAAA;AAQIA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAgBkK,sBAAhB;AAA8B,KAA9B,EAA+B,aAA/B,EAA+B;AAAAlK,MAAAA,4DAAAA;AAAA;AAAA,aAChBmK,+BADgB;AACO,KADtC;AAIJnK,IAAAA,2DAAAA;;;;;;;;AAVIA,IAAAA,yDAAAA,+BAAqB,UAArB,EAAqBoK,sBAArB,EAAqB,WAArB,EAAqBA,uBAArB,EAAqB,UAArB,EAAqBA,gBAArB,EAAqB,WAArB,EAAqBP,aAArB,EAAqB,UAArB,EAAqBO,gBAArB,EAAqB,QAArB,EAAqBC,QAArB;;;;;;AAhBJrK,IAAAA,yDAAAA;AAcAA,IAAAA,yDAAAA;;;;;;AAdMA,IAAAA,yDAAAA;AAeDA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;;;AAcLA,IAAAA,6DAAAA;AAGIA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAgBsK,+BAAhB;AAAuC,KAAvC,EAAwC,cAAxC,EAAwC;AAAAtK,MAAAA,4DAAAA;AAAA;AAAA,aACxBuK,sBADwB;AACV,KAD9B,EAAwC,sBAAxC,EAAwC;AAAAvK,MAAAA,4DAAAA;AAAA;AAAA,aAUhBwK,yCAVgB;AAUiB,KAVzD;AAYHxK,IAAAA,2DAAAA;;;;;;AAbGA,IAAAA,yDAAAA,+BAAqB,WAArB,EAAqByK,kEAArB,EAAqB,WAArB,EAAqBA,uBAArB,EAAqB,WAArB,EAAqBZ,aAArB,EAAqB,UAArB,EAAqBY,eAArB,EAAqB,YAArB,EAAqBA,0BAArB,EAAqB,iBAArB,EAAqBA,uBAArB,EAAqB,SAArB,EAAqBA,mCAArB,EAAqB,kBAArB,EAAqBA,wBAArB;;;;;;AAvDhBzK,IAAAA,sEAAAA;AACIA,IAAAA,6DAAAA;AAMIA,IAAAA,yDAAAA;;AAgBAA,IAAAA,yDAAAA;;AA6BAA,IAAAA,6DAAAA;AACIA,IAAAA,yDAAAA;AAgBJA,IAAAA,2DAAAA;AAERA,IAAAA,oEAAAA;;;;;;;;;AAlEQA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;AADAA,IAAAA,yDAAAA;AADAA,IAAAA,0DAAAA;AAIaA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA,SAAAA,0DAAAA;AAgBAA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA,SAAAA,0DAAAA;AA6BRA,IAAAA,wDAAAA;AAAAA,IAAAA,0DAAAA;AAEIA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;AAvDrBA,IAAAA,sEAAAA;AACIA,IAAAA,yDAAAA;AAwEJA,IAAAA,oEAAAA;;;;;AAxEmBA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;;;AAyEnBA,IAAAA,6DAAAA,eAA0D,CAA1D,EAA0D,cAA1D,EAA0D,EAA1D;AAMQA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAAe0K,2BAAf;AAAkC,KAAlC,EAAmC,UAAnC,EAAmC;AAAA1K,MAAAA,4DAAAA;AAAA;AAAA,aACvB2K,8BADuB;AACD,KADlC,EAAmC,cAAnC,EAAmC;AAAA3K,MAAAA,4DAAAA;AAAA;AAAA,aAEnB4K,sBAFmB;AAEL,KAF9B,EAAmC,sBAAnC,EAAmC;AAAA5K,MAAAA,4DAAAA;AAAA;AAAA,aAMX6K,yCANW;AAMsB,KANzD;AAQH7K,IAAAA,2DAAAA;;;;;AAZGA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA,iCAAwB,qBAAxB,EAAwBG,0BAAxB,EAAwB,QAAxB,EAAwBA,gCAAxB,EAAwB,kBAAxB,EAAwBA,uBAAxB,EAAwB,UAAxB,EAAwBA,eAAxB,EAAwB,eAAxB,EAAwBA,2BAAxB,EAAwB,UAAxB,EAAwB,eAAxB,EAAwB,aAAxB,EAAwBA,sBAAxB;;;;;;AAuBRH,IAAAA,wDAAAA;;;;;;AACAA,IAAAA,6DAAAA;AACIA,IAAAA,qDAAAA;;AACJA,IAAAA,2DAAAA;;;;AADIA,IAAAA,wDAAAA;AAAAA,IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;AAVRA,IAAAA,6DAAAA;AAGIA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAS8K;AAAU,aAAEC,wBAAF;AAA0B,KAA7C;AAKA/K,IAAAA,yDAAAA;AACAA,IAAAA,yDAAAA;AAGJA,IAAAA,2DAAAA;;;;;AARIA,IAAAA,0DAAAA;AAIMA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;AACmCA,IAAAA,wDAAAA;AAAAA,IAAAA,yDAAAA;;;;;;AAI7CA,IAAAA,6DAAAA;AAOIA,IAAAA,qDAAAA;;AACJA,IAAAA,2DAAAA;;;;;AAJIA,IAAAA,0DAAAA;AAGAA,IAAAA,wDAAAA;AAAAA,IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;AAGJA,IAAAA,6DAAAA;AAAwFA,IAAAA,yDAAAA;AAAAA,MAAAA,4DAAAA;AAAA;AAAA,aAASgL,kBAAT;AAAmB,KAAnB;AACpFhL,IAAAA,qDAAAA;;AACJA,IAAAA,2DAAAA;;;;AADIA,IAAAA,wDAAAA;AAAAA,IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ADzLN,MAAOiL,eAAP,CAAsB;AAyDxB3K,cACY4K,iBADZ,EAEYC,YAFZ,EAGY3K,iBAHZ,EAIYE,gBAJZ,EAKY0K,iBALZ,EAMYC,WANZ,EAOYC,EAPZ,EAQY/K,cARZ,EASYI,aATZ,EAUY4K,gBAVZ,EAWYC,aAXZ,EAYYC,WAZZ,EAaYC,mBAbZ,EAcYC,MAdZ,EAeYC,QAfZ,EAgBWhL,eAhBX,EAiBYC,YAjBZ,EAiBsC;AAhB1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACC;AAzEH,4BAA+CgI,qGAA/C;AACA,oBAAW,KAAX;AACA,mBAAU,KAAV;AACA,0BAA4BJ,+EAA5B;AACC,yBAAuC,IAAInJ,wDAAJ,EAAvC;AACA,wBAAmC,IAAIA,wDAAJ,EAAnC;AACA,gCAA8C,IAAIA,wDAAJ,EAA9C;AAcH,uBAAc,CAAd;AACA,uBAAc,EAAd;AACA,iBAAQqJ,gEAAR;AACA,+BAAsB,IAAIpJ,sDAAJ,CAAc,EAAd,CAAtB;AACA,qBAAY,CACf;AAAEyM,WAAK,EAAE;AAAT,KADe,EAEf;AAAEA,WAAK,EAAE;AAAT,KAFe,EAGf;AAAEA,WAAK,EAAE;AAAT,KAHe,EAIf;AAAEA,WAAK,EAAE;AAAT,KAJe,CAAZ;AAMA,sBAAa,CAChB;AAAEC,YAAM,EAAE,CAAV;AAAaC,cAAQ,EAAE;AAAvB,KADgB,EAEhB;AAAED,YAAM,EAAE,CAAV;AAAaC,cAAQ,EAAE;AAAvB,KAFgB,EAGhB;AAAED,YAAM,EAAE,CAAV;AAAaC,cAAQ,EAAE;AAAvB,KAHgB,EAIhB;AAAED,YAAM,EAAE,CAAV;AAAaC,cAAQ,EAAE;AAAvB,KAJgB,EAKhB;AAAED,YAAM,EAAE,CAAV;AAAaC,cAAQ,EAAE;AAAvB,KALgB,CAAb;AAOA,gCAAuB,CAAvB;AASA,2BAAkB,KAAlB;AAEC,0BAAiB,EAAjB;AACA,qBAAsB,EAAtB;AAIA,iCAAwB,KAAxB;AACA,oBAA6B,IAAI1M,0CAAJ,EAA7B;AAqBJ,SAAK2M,eAAL,GAAuB,IAAI5M,sDAAJ,CAAc,EAAd,CAAvB;AACH;;AAEqB,MAAlB6M,kBAAkB;AAClB,WAAO,KAAKC,mBAAL,CAAyBrJ,QAAzB,CAAkC,WAAlC,CAAP;AACH;;AAEDvB,UAAQ;AACJ,QAAI,KAAKb,eAAL,CAAqB0L,cAArB,IAAuC,KAAK1J,IAAhD,EAAsD;AAClD,WAAK2J,gBAAL,GAAwB,KAAK3J,IAAL,CAAU2J,gBAAlC;AACA,WAAKhK,QAAL,GAAgB,KAAKK,IAAL,CAAUL,QAA1B;AACA,WAAKiK,OAAL,GAAe,KAAK5J,IAAL,CAAU4J,OAAzB;AACA,WAAKC,cAAL,GAAsB,KAAK7J,IAAL,CAAU6J,cAAhC;AACA,WAAKC,eAAL,GAAuB,IAAvB;AACH;;AAED,SAAKC,kBAAL;AAEA,SAAKnM,iBAAL,CAAuBoM,YAAvB,CAAoC1H,IAApC,CAAyCtF,0DAAS,CAAC,KAAKoC,QAAN,CAAlD,EAAmEmD,SAAnE,CAA6E,MAAK;AAC9E,WAAKwH,kBAAL;AACH,KAFD;AAGH;;AAEDE,aAAW,CAACC,OAAD,EAAuB;AAC9B,UAAML,cAAc,GAAGK,OAAO,CAAC,gBAAD,CAA9B;AACA,UAAMC,kBAAkB,GACpBN,cAAc,IACd,CAACA,cAAc,CAACO,WADhB,IAEAP,cAAc,CAACQ,YAAf,KAAgCR,cAAc,CAACS,aAHnD;;AAIA,QAAIH,kBAAJ,EAAwB;AACpB,WAAKI,mBAAL;AACA,WAAKR,kBAAL;AACH;;AAED,UAAMH,OAAO,GAAGM,OAAO,CAAC,SAAD,CAAvB;;AACA,QAAIN,OAAO,IAAI,CAACA,OAAO,CAACQ,WAApB,IAAmC,CAACR,OAAO,CAACS,YAAhD,EAA8D;AAC1D,WAAKG,WAAL;AACA;;;;;;;AAOH;;AAED,QAAIN,OAAO,CAAC,gBAAD,CAAP,IAA6B,CAACA,OAAO,CAAC,gBAAD,CAAP,CAA0BE,WAA5D,EAAyE;AACrE,WAAKK,qBAAL,GAA6B,KAA7B;AACH;AACJ,GA7HuB,CA+HxB;;;AAEOC,UAAQ;AACX,SAAK1B,QAAL,CAAc2B,WAAd,CAA0BC,QAAQ,CAACC,IAAnC,EAAyC,kBAAzC;;AAEA,QAAI,KAAKtB,eAAL,CAAqBuB,OAArB,IAAgC,KAAKrB,mBAAL,CAAyBqB,OAA7D,EAAsE;AAClE,UAAI,KAAKvB,eAAL,CAAqBwB,KAArB,IAA8B,KAAKtB,mBAAL,CAAyBqB,OAA3D,EAAoE;AAChE,aAAKrB,mBAAL,CAAyBuB,gBAAzB;AACH;;AAED,WAAKC,YAAL;AACA;AACH;;AAED,UAAMC,YAAY,GAAG,KAAKC,aAAL,EAArB;;AACA,QAAI,CAACD,YAAY,CAACE,OAAlB,EAA2B;AACvB,UAAIF,YAAY,CAACG,UAAjB,EAA6B;AACzB,aAAKJ,YAAL;AACH;;AACD;AACH;;AAED,UAAMK,WAAW,GAAGnF,wGAAA,CAChB,KAAKvI,iBAAL,CAAuB2N,SAAvB,CACI3F,2GAAA,CAAgCA,yGAAA,CAA8B,KAAK+D,gBAAnC,CAAhC,CADJ,CADgB,EAIhB,KAAK+B,MAJW,EAKhB,KAAKC,UALW,EAMhB,KAAKhC,gBANW,EAOhB,KAAKiC,OAAL,CAAaC,UAPG,EAQhB,KAAKlM,QARW,CAApB;;AAUA,QAAI,CAAC2L,WAAL,EAAkB;AACd,UAAI,KAAK3L,QAAT,EAAmB;AACf,aAAKmM,YAAL,CAAkBnL,IAAlB;;AAEA,YAAI,KAAK3C,eAAL,CAAqB0L,cAArB,IAAuC,KAAK1J,IAAhD,EAAsD;AAClD,eAAK/B,YAAL,CAAkBuC,OAAlB;AACH;AACJ,OAND,MAMO;AACH,aAAKoJ,OAAL,GAAe,IAAf;AACH;;AACD;AACH;;AACD,SAAKmC,iBAAL,GA1CW,CA2CX;;AACA,SAAKC,oBAAL,CAA0BrL,IAA1B,CAA+B,KAA/B;AACA,UAAMsL,MAAM,GAAG,KAAKC,eAAL,EAAf;AACA,UAAMC,SAAS,GAAG;AACd5N,gBAAU,EAAEoH,4EAAA,CAAsB,KAAK+F,MAA3B,CADE;AAEdC,gBAAU,EAAEhG,4EAAA,CAAsB,KAAKgG,UAA3B,CAFE;AAGdC,aAAO,kCACA,KAAKA,OADL,GACY;AACfS,gBAAQ,EAAEzG,yGAAA,CAA8B,KAAK+D,gBAAnC;AADK,OADZ;AAHO,KAAlB;;AAQA,QAAIsC,MAAM,IAAIA,MAAM,CAACK,SAAP,KAAqB,EAAnC,EAAuC;AACnCH,eAAS,CAAC5N,UAAV,CAAqB+N,SAArB,GAAiCL,MAAM,CAACK,SAAxC;AACAH,eAAS,CAAC5N,UAAV,CAAqBgO,SAArB,GAAiCN,MAAM,CAACM,SAAxC;AACH;;AACD,SAAKzD,mBAAL,CAAyB0D,kBAAzB,CAA4CL,SAA5C,EAAuD,KAAKxC,gBAA5D,EAA8E,KAAKiC,OAAL,CAAaC,UAA3F;;AAEA,QAAI,CAAC,KAAKlM,QAAV,EAAoB;AAChBwG,MAAAA,8GAAA;AAEA,WAAKyC,aAAL,CAAmB8D,cAAnB,CAAkC/L,IAAlC,CAAuC;AAAEgM,eAAO,EAAE,IAAX;AAAiBC,eAAO,EAAE;AAA1B,OAAvC;AAEA,WAAK/D,WAAL,CAAiBgE,SAAjB,GAA6BtK,SAA7B,CACI,MAAK;AACD,aAAKuK,UAAL,CAAgBb,MAAhB,EAAwBE,SAAxB;AACH,OAHL,EAIK1J,KAAD,IAAe;AACX,aAAKmG,aAAL,CAAmB8D,cAAnB,CAAkC/L,IAAlC,CAAuC;AAAEgM,iBAAO,EAAE;AAAX,SAAvC;;AAEA,YAAI,KAAK3O,eAAL,CAAqB0L,cAArB,IAAuC,KAAK1J,IAAhD,EAAsD;AAClD,eAAK/B,YAAL,CAAkBuC,OAAlB;AACH;;AAEDyB,eAAO,CAACC,GAAR,CAAYO,KAAZ;AACH,OAZL;AAcH,KAnBD,MAmBO;AACH,WAAKqK,UAAL,CAAgBb,MAAhB,EAAwBE,SAAxB;AACH;AACJ;;AAEMzL,cAAY;AACf,UAAMqM,YAAY,GAAG,KAAKrB,MAAL,CAAYlN,IAAjC;AACA,UAAMwO,UAAU,GAAG,KAAKtB,MAAL,CAAY/M,EAA/B;AAEA,SAAK+M,MAAL,CAAYlN,IAAZ,GAAgB2E,gCAAQ6J,UAAR,GAAkB;AAAEC,eAAS,EAAEF,YAAY,CAACE;AAA1B,KAAlB,CAAhB;AACA,SAAKvB,MAAL,CAAY/M,EAAZ,GAAcwE,gCAAQ4J,YAAR,GAAoB;AAAEE,eAAS,EAAED,UAAU,CAACC;AAAxB,KAApB,CAAd;AAEA,SAAK1D,eAAL,CAAqBnJ,QAArB,CAA8B,MAA9B,EAAsCC,QAAtC,CAA+C,KAAKqL,MAAL,CAAYlN,IAA3D;AACA,SAAK+K,eAAL,CAAqBnJ,QAArB,CAA8B,IAA9B,EAAoCC,QAApC,CAA6C,KAAKqL,MAAL,CAAY/M,EAAzD;AAEA,SAAKmK,mBAAL,CAAyBoE,gBAAzB,CAA0C,KAAKxB,MAAL,CAAYlN,IAAtD,EAA4D,KAA5D,EAAmE,OAAnE;AACA,SAAKsK,mBAAL,CAAyBoE,gBAAzB,CAA0C,KAAKxB,MAAL,CAAY/M,EAAtD,EAA0D,KAA1D,EAAiE,OAAjE;;AAEA,QAAI,KAAK+M,MAAL,CAAY3J,OAAhB,EAAyB;AACrB,WAAK2J,MAAL,CAAY3J,OAAZ,GAAsBlF,4GAAA,EAAtB;AACA,WAAK0M,eAAL,CAAqBnJ,QAArB,CAA8B,SAA9B,EAAyCsC,KAAzC;AACH;AACJ;;AAEMyK,iBAAe,CAACC,UAAD,EAAiD;;;AACnE,SAAK1B,MAAL,GAAWvI,gCACJ,KAAKuI,MADD,GACO;AACd,OAAC0B,UAAU,CAACjP,SAAX,CAAqBC,KAAtB,GAA8BgP,UAAU,CAAC1L;AAD3B,KADP,CAAX;;AAKA,QAAI0L,UAAU,CAACjP,SAAX,CAAqBkP,SAArB,KAAmC,WAAnC,KAAkD,gBAAU,CAAC3L,WAAX,MAAsB,IAAtB,IAAsBjD,aAAtB,GAAsB,MAAtB,GAAsBA,GAAE6O,QAA1E,CAAJ,EAAwF;AACpF,WAAKC,gBAAL,CAAsBH,UAAU,CAACjP,SAAX,CAAqBC,KAA3C;AACH;;AAED,QAAIgP,UAAU,CAACjP,SAAX,CAAqBkP,SAArB,KAAmC,KAAnC,IAA4CD,UAAU,CAACjP,SAAX,CAAqBC,KAArB,KAA+BgI,qFAA/E,EAAuG;AACnG,WAAKqH,sCAAL;AACH;AACJ;;AAEMC,gBAAc,CAACC,QAAD,EAAsC;AACvD,SAAKhC,UAAL,GAAkBgC,QAAQ,CAACC,SAA3B;;AACA,QAAI,CAAC,KAAKnD,qBAAV,EAAiC;AAC7B,WAAKoD,YAAL,GAAoBlI,4EAAA,CAAsB,KAAKgG,UAA3B,CAApB;AACA,WAAKlB,qBAAL,GAA6B,IAA7B;AACH;AACJ;;AAEMqD,kBAAgB;AACnB,WAAO,KAAKC,UAAL,CAAgBC,IAAhB,CAAsB3E,MAAD,IAAYA,MAAM,CAACC,QAAxC,CAAP;AACH;;AAEM2E,kBAAgB,CAACpC,UAAD,EAA8C;AACjE,QAAIA,UAAU,CAACqC,QAAX,KAAwBpI,iEAA5B,EAA6C;AACzC,WAAK8F,OAAL,CAAaC,UAAb,GAA0B/F,iEAA1B;AACA;AACH;;AACD9D,yBAAqB,CAAC,MAAK;AACvB,UAAI,CAAC,KAAKhE,eAAL,CAAqB0L,cAA1B,EAA0C;AACtC,aAAKuB,YAAL;AACH;AACJ,KAJoB,CAArB;AAKA,SAAKW,OAAL,CAAaC,UAAb,GAA0BA,UAAU,CAACqC,QAArC;AACA,SAAKtQ,iBAAL,CAAuByQ,aAAvB,CAAqC;AAAExC,gBAAU,EAAEA,UAAU,CAACqC;AAAzB,KAArC;AACH;;AAEMI,aAAW,CAACC,GAAD,EAAY;AAC1B,UAAMC,YAAY,GAAG,IAAIhJ,wDAAJ,CAAgB+I,GAAG,IAAI,CAAP,GAAWA,GAAX,GAAiB,CAAC,CAAlC,CAArB;AACAC,gBAAY,CAACC,aAAb,CAA2B,CACvBhJ,gEADuB,EAEvBA,2DAAA,CAAe,CAAf,CAFuB,EAGvBA,2DAAA,CAAeQ,wGAAf,CAHuB,CAA3B;AAMA,SAAKuD,kBAAL,CAAwBuF,IAAxB,CACI,KAAKrG,EAAL,CAAQsG,KAAR,CAAc;AACVC,cAAQ,EAAET;AADA,KAAd,CADJ;AAKH;;AAEMvD,cAAY,CAACiE,aAAa,GAAG,IAAjB,EAAqB;AACpC,SAAKpR,gBAAL,CAAsBiH,eAAtB,CAAsC9H,2FAAtC,EAAoE;AAChEgI,QAAE,EAAE,SAD4D;AAEhEE,YAAM,EAAE+J,aAAa,GAAGhS,kGAAH,GAAiCA,4FAAqBkI;AAFX,KAApE;AAIH;;AAEDjG,aAAW;AACP,SAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB;AACA,SAAKD,QAAL,CAAcE,QAAd;AACA,SAAKiL,mBAAL;AACH;;AAEOY,eAAa;AACjB,WAAOzF,8GAAA,CACH,KAAKgG,MADF,EAEH,KAAKC,UAFF,EAGH,KAAKhC,gBAHF,EAIH,KAAKiC,OAAL,CAAaC,UAJV,EAKH,KAAKlM,QALF,CAAP;AAOH;;AAEO4K,qBAAmB;AACvB,SAAK,MAAM8E,UAAX,IAAyB,KAAKC,SAA9B,EAAyC;AACrC,WAAKxR,gBAAL,CAAsByR,kBAAtB,CAAyCF,UAAzC;AACH;AACJ;;AAEOvC,YAAU,CAACb,MAAD,EAAcE,SAAd,EAA4B;AAC1C,SAAK7D,iBAAL,CAAuBoD,MAAvB,CAA8BO,MAA9B,EAAsCE,SAAtC,EAAiDnJ,IAAjD,CACKwM,YAAD,IAAgC;AAC5B,WAAKC,gBAAL,CAAsBD,YAAtB;AACH,KAHL,EAIKA,YAAD,IAAgC;AAC5B,WAAKC,gBAAL,CAAsBD,YAAtB;AACH,KANL;AAQH;;AAEOC,kBAAgB,CAACD,YAAD,EAA4B;AAChD,QAAI,KAAK7P,QAAL,IAAiB,KAAKiK,OAA1B,EAAmC;AAC/B3H,aAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAK0H,OAAL,GAAe,KAAf;AACA,WAAKkC,YAAL,CAAkBnL,IAAlB;;AAEA,UAAI,KAAK3C,eAAL,CAAqB0L,cAAzB,EAAyC;AACrC,aAAKzL,YAAL,CAAkBuC,OAAlB;AACH;AACJ;;AACD,QAAIgP,YAAY,CAACE,eAAjB,EAAkC;AAC9B,WAAKlF,WAAL;AACH;;AAED,QAAIgF,YAAY,CAACG,gBAAjB,EAAmC;AAC/B1N,aAAO,CAACC,GAAR,CAAY,+BAAZ;AACA,WAAK0N,UAAL,GAAkB,KAAKrG,eAAL,CAAqB/H,KAAvC;AACA,WAAKqO,oBAAL,GAA4B,KAAKpG,mBAAL,CAAyBjI,KAArD;AACA,WAAKsO,kBAAL,GAA0BnK,4EAAA,CAAsBA,4EAAA,CAAsB,KAAKgG,UAA3B,CAAtB,CAA1B;AACA,WAAKoE,SAAL,GAAiBpK,4EAAA,CAAsB,KAAK+F,MAA3B,CAAjB;AACA,WAAKmC,YAAL,GAAoBlI,4EAAA,CAAsB,KAAKgG,UAA3B,CAApB;AACH,KAPD,MAOO,IAAI,CAAC,KAAKhM,QAAV,EAAoB;AACvB,WAAKiK,OAAL,GAAe,IAAf;AACH;AACJ;;AAEOoG,oBAAkB,CAACnG,cAAD,EAAsC;AAC5D,QAAIA,cAAc,KAAK/E,SAAnB,IAAgC+E,cAAc,KAAKhE,+EAAvD,EAA0E;AACtE5D,aAAO,CAACQ,KAAR,CAAc,uBAAuBoH,cAAc,EAAnD;AACA,aAAO,KAAP;AACH;;AACD5H,WAAO,CAACC,GAAR,CAAY,gCAAZ;AACA,UAAM+N,WAAW,GAAG9J,2GAAA,CAAkC0D,cAAlC,CAApB;AACA,UAAM6B,MAAM,GAAG,KAAK9N,iBAAL,CAAuB2N,SAAvB,CAAiC1B,cAAjC,CAAf;;AACA,QAAIoG,WAAJ,EAAiB;AACb,WAAKtG,gBAAL,GAAwBsG,WAAW,CAACE,OAApC;AACA,WAAKC,WAAL,GAAmBH,WAAW,CAACI,IAA/B;AACH;;AAED,SAAK3E,MAAL,GAAcA,MAAM,CAACnN,UAArB;AACA,SAAKwR,SAAL,GAAiBpK,4EAAA,CAAsB,KAAK+F,MAA3B,CAAjB,CAd4D,CAe5D;;AAEA,SAAKE,OAAL,GAAeF,MAAM,CAACE,OAAtB,CAjB4D,CAkB5D;AACA;AACA;AACA;;AACA,SAAKD,UAAL,GAAkBD,MAAM,CAACC,UAAzB;AACA,SAAKmE,kBAAL,GAA0BnK,4EAAA,CAAsB+F,MAAM,CAACC,UAA7B,CAA1B;AACA,SAAKA,UAAL,CAAgB2E,SAAhB,GAA4B,KAA5B;AACA,SAAK3E,UAAL,CAAgBjN,UAAhB,GAA6B,EAA7B;;AACA,QAAIuR,WAAW,IAAIA,WAAW,CAACE,OAAZ,CAAoBI,OAAvC,EAAgD;AAC5C,WAAK5E,UAAL,CAAgB6E,QAAhB,GAA2B,IAA3B;AACH;;AAED,WAAO,IAAP;AACH;;AAEOC,gBAAc;AAClB,SAAKlG,mBAAL;;AACA,QAAI,CAAC,KAAKyF,kBAAL,CAAwB,KAAKnG,cAA7B,CAAL,EAAmD;AAC/C;AACH;;AACD,SAAK6G,WAAL,EACI;AACA,SAAK5S,gBAAL,CAAsB6S,gBAAtB,CAAuC1T,gGAAvC,EAA0E,KAAKwT,cAA/E,EAA+F,IAA/F,CAFJ;AAIA,SAAKhI,WAAL,CAAiBoI,aAAjB,CAA+B,KAAKlF,UAApC,EATkB,CAUlB;AACA;AAEA;;AACAjG,IAAAA,8GAAA,CACI,KAAKgG,MADT,EAEI,KAAKC,UAFT,EAGI,KAAKhC,gBAHT,EAII,KAAKiC,OAAL,CAAaC,UAJjB,EAKI,KAAKlM,QALT,EAdkB,CAqBlB;;AACA,SAAK8I,WAAL,CAAiBqI,IAAjB,CAAsB,KAAKpF,MAA3B;AACA,SAAKqF,eAAL;AACH;;AAEOhH,oBAAkB;AACtB,SAAKiH,aAAL,CAAmBrQ,IAAnB,CAAwB,KAAxB;AACA,SAAKyP,WAAL,GAAmB,EAAnB;AACA,SAAKa,cAAL,GAAsB,KAAKtR,QAAL,GAAgB,WAAhB,GAA8B,WAApD;;AAEA,QAAI,KAAKA,QAAT,EAAmB;AACf,WAAK8Q,cAAL;AACA;AACH;;AACD,SAAKlG,mBAAL;AACA,UAAMmB,MAAM,GAAG/F,4EAAA,CAAsB,KAAK/H,iBAAL,CAAuBsT,cAAvB,EAAtB,CAAf;AACA,SAAKxF,MAAL,GAAcA,MAAM,CAACnN,UAArB;AACA,SAAKwR,SAAL,GAAiBpK,4EAAA,CAAsB,KAAK+F,MAA3B,CAAjB;AACA,SAAKE,OAAL,GAAeF,MAAM,CAACE,OAAtB;AACA,SAAKD,UAAL,GAAkBzF,kFAAA,CAAwB,KAAKyD,gBAA7B,EAA+C+B,MAAM,CAACC,UAAtD,EAAkE,KAAKhD,gBAAvE,CAAlB;AACA,SAAKkF,YAAL,GAAoBlI,4EAAA,CAAsB,KAAKgG,UAA3B,CAApB;AACA,SAAKoF,eAAL;AAEA,SAAKpT,cAAL,CAAoB0E,uBAApB,GAA8CC,IAA9C,CAAmDtF,0DAAS,CAAC,KAAKoC,QAAN,CAA5D,EAA6EmD,SAA7E;AACA,SAAKmO,WAAL,CACI,KAAK5S,gBAAL,CAAsB6S,gBAAtB,CAAuC1T,yFAAvC,EAAmE,KAAKoU,iBAAxE,EAA2F,IAA3F,CADJ;AAGA,SAAKX,WAAL,CACI,KAAK5S,gBAAL,CAAsB6S,gBAAtB,CAAuC1T,8FAAvC,EAAwE,KAAKoU,iBAA7E,EAAgG,IAAhG,CADJ;AAGA,SAAKX,WAAL,CACI,KAAK5S,gBAAL,CAAsB6S,gBAAtB,CAAuC1T,+FAAvC,EAAyE,KAAKuU,oBAA9E,EAAoG,IAApG,CADJ;AAGH;;AAEOd,aAAW,CAACrB,UAAD,EAAmB;AAClC,QAAI,KAAKC,SAAL,CAAemC,OAAf,CAAuBpC,UAAvB,IAAqC,CAAC,CAA1C,EAA6C;AACzC;AACH;;AAED,SAAKC,SAAL,CAAeP,IAAf,CAAoBM,UAApB;AACH,GAjcuB,CAmcxB;;;AACQqC,iBAAe;AACnB;AACA,QAAI,KAAK3I,MAAL,CAAY4I,GAAZ,CAAgBF,OAAhB,CAAwB,SAAxB,MAAuC,CAA3C,EAA8C;AAC1C,aAAO,EAAP;AACH;;AACD,QAAInF,SAAS,GAAG,KAAKvD,MAAL,CAAY4I,GAAZ,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2BC,GAA3B,EAAhB,CALmB,CAOnB;AACA;;AACA,UAAMC,iBAAiB,GAAGpM,uHAAA,CACtB,KAAKiE,gBADiB,EAEtB,KAAKiC,OAAL,CAAaC,UAFS,CAA1B;AAIA,UAAMmG,UAAU,GAAG,KAAKpU,iBAAL,CAAuB2N,SAAvB,CAAiC,KAAK1B,cAAtC,CAAnB;AACA,UAAMoI,YAAY,GAAGD,UAAU,CAACzT,UAAhC;AACA,UAAMmN,MAAM,GAAG,KAAKA,MAApB;;AAEA,SAAK,MAAM7G,CAAX,IAAgBiN,iBAAhB,EAAmC;AAC/B,WAAK,MAAMI,CAAX,IAAgBJ,iBAAiB,CAACjN,CAAD,CAAjC,EAAsC;AAClC,YAAIqN,CAAC,KAAK,SAAV,EAAqB;AACjB;AACA,cAAIxG,MAAM,CAACwG,CAAD,CAAV,EAAe;AACX,gBACIxG,MAAM,CAACwG,CAAD,CAAN,CAAUC,SAAV,IACAzG,MAAM,CAACwG,CAAD,CAAN,CAAUC,SAAV,KAAwB,EADxB,IAEAzG,MAAM,CAACwG,CAAD,CAAN,CAAUC,SAAV,KAAwBF,YAAY,CAACC,CAAD,CAAZ,CAAgBC,SAH5C,EAIE;AACE7F,uBAAS,GAAG,EAAZ;AACH,aAND,MAMO,IACHZ,MAAM,CAACwG,CAAD,CAAN,CAAU3Q,OAAV,IACAmK,MAAM,CAACwG,CAAD,CAAN,CAAU3Q,OAAV,KAAsB,EADtB,IAEAmK,MAAM,CAACwG,CAAD,CAAN,CAAU3Q,OAAV,KAAsB0Q,YAAY,CAACC,CAAD,CAAZ,CAAgB3Q,OAHnC,EAIL;AACE+K,uBAAS,GAAG,EAAZ;AACH;AACJ;;AACD,iBAAOA,SAAP;AACH;AACJ;AACJ;;AACD,WAAOA,SAAP;AACH;;AAEOJ,iBAAe;AACnB,UAAMD,MAAM,GAAG;AACXmG,qBAAe,EAAEtN,SADN;AAEXnF,cAAQ,EAAE,KAAKA,QAFJ;AAGX0S,eAAS,EAAE,KAAKxI,cAAL,KAAwBhE,mFAAxB,GAAgDA,2EAAhD,GAAgE,KAAKgE;AAHrE,KAAf;AAMA,UAAMyC,SAAS,GAAG,KAAKoF,eAAL,EAAlB;;AACA,QAAIpF,SAAJ,EAAe;AACX,6CACOL,MADP,GACa;AACTK,iBAAS,EAAE,KAAKvD,MAAL,CAAY4I,GAAZ,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CADF;AAETrF,iBAAS,EAAEiG,SAAS,CAAC,KAAKzJ,MAAL,CAAY4I,GAAZ,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD;AAFX,OADb;AAKH;;AAED,WAAO3F,MAAP;AACH;;AAEOwG,eAAa,CAACrU,KAAD,EAAc;AAC/B,SAAKsN,MAAL,CAAYtN,KAAZ,IAAqB;AACjBsU,cAAQ,EAAE,IADO;AAEjBC,YAAM,EAAE,IAFS;AAGjBC,cAAQ,EAAE,OAHO;AAIjBC,YAAM,EAAE,OAJS;AAKjBC,kBAAY,EAAE;AALG,KAArB;AAOH;;AAEO/G,mBAAiB;AACrB,QAAI,KAAKL,MAAL,CAAYtF,uFAAZ,CAAJ,EAA2C;AACvC,WAAKsF,MAAL,CAAYtF,uFAAZ,EAAsC0M,YAAtC,GAAqD,KAArD;AACH;;AACD,QAAI,KAAKpH,MAAL,CAAYtF,yFAAZ,CAAJ,EAA6C;AACzC,WAAKsF,MAAL,CAAYtF,yFAAZ,EAAwC0M,YAAxC,GAAuD,KAAvD;AACH;;AACD,QAAI,KAAKpH,MAAL,CAAYtF,qFAAZ,CAAJ,EAAyC;AACrC,WAAKsF,MAAL,CAAYtF,qFAAZ,EAAoC0M,YAApC,GAAmD,KAAnD;AACH;AACJ;;AAEOG,gBAAc,CAACC,WAAD,EAAmCC,mBAAnC,EAA2D;AAC7E,UAAMlT,SAAS,GAA2B,EAA1C;AACA,QAAImT,UAAU,GAAG,CAAjB;;AAEA,SAAK,MAAMC,UAAX,IAAyBH,WAAzB,EAAsC;AAClC,UAAI,CAACG,UAAL,EAAiB;AACb;AACH;;AACD,YAAMC,IAAI,GAAGH,mBAAmB,CAACE,UAAU,CAACtU,OAAZ,CAAnB,CAAwCsU,UAAU,CAACjV,KAAnD,CAAb;;AAEA,UAAIiV,UAAU,CAAChG,SAAX,KAAyB,KAA7B,EAAoC;AAChC,YAAI,CAAC,KAAK3B,MAAL,CAAY2H,UAAU,CAACjV,KAAvB,CAAL,EAAoC;AAChC,eAAKqU,aAAL,CAAmBY,UAAU,CAACjV,KAA9B;AACH;;AAED6B,iBAAS,CAACoT,UAAU,CAACjV,KAAZ,CAAT,GACIkV,IAAI,CAACC,QAAL,KAAkB,CAAC,KAAK5T,QAAN,IAAkB,CAAC2T,IAAI,CAACE,aAA1C,IAA2D,EAA3D,GAAgE,CAAC,EAAD,EAAK/N,gEAAL,CADpE;AAEH,OAPD,MAOO;AACH,cAAMgO,OAAO,GACT,KAAK/H,MAAL,CAAY2H,UAAU,CAACjV,KAAvB,KAAiC,KAAKsN,MAAL,CAAY2H,UAAU,CAACjV,KAAvB,EAA8BM,UAA/D,GACM,KAAKgN,MAAL,CAAY2H,UAAU,CAACjV,KAAvB,EAA8BM,UADpC,GAEM,EAHV;AAIAuB,iBAAS,CAACoT,UAAU,CAACjV,KAAZ,CAAT,GACIkV,IAAI,CAACC,QAAL,KAAkB,CAAC,KAAK5T,QAAN,IAAkB,CAAC2T,IAAI,CAACE,aAA1C,IAA2DC,OAA3D,GAAqE,CAACA,OAAD,EAAUhO,gEAAV,CADzE;AAEH;;AAED2N,gBAAU;AACb;;AAED,SAAKM,WAAL,GAAmBN,UAAnB;AACA,WAAOnT,SAAP;AACH;;AAEO8Q,iBAAe;AACnB,UAAMoC,mBAAmB,GAAGzN,uHAAA,CACxB,KAAKiE,gBADmB,EAExB,KAAKiC,OAAL,CAAaC,UAFW,CAA5B;AAIA,UAAMqH,WAAW,GAAGrW,uHAAA,CAChBsW,mBADgB,EAEhB,KAAKlC,cAFW,EAGhB,KAAKtR,QAHW,CAApB;AAMA,SAAK4J,eAAL,GAAuB,KAAKb,EAAL,CAAQsG,KAAR,CAAc,KAAKiE,cAAL,CAAoBC,WAApB,EAAiCC,mBAAjC,CAAd,CAAvB;AAEA,SAAKS,SAAL,GAAiBV,WAAjB;AACA,SAAKW,cAAL,GAAsBV,mBAAtB;AACA,SAAKW,uBAAL;AAEA,SAAKlE,UAAL,GAAkB,KAAKrG,eAAL,CAAqB/H,KAAvC;AACA,SAAKqO,oBAAL,GAA4B,KAAKpG,mBAAL,CAAyBjI,KAArD;AACH;;AAEO6P,mBAAiB,CAACrR,IAAD,EAAY+T,IAAZ,EAAwB;AAC7C,YAAQA,IAAR;AACI,WAAK9W,yFAAL;AACI,aAAK0M,gBAAL,GAAwB3J,IAAxB;AACA,aAAK2L,UAAL,GAAkBzF,kFAAA,CACd,KAAKyD,gBADS,EAEd,KAAKgC,UAFS,EAGd,KAAKhD,gBAHS,CAAlB;AAKA,aAAKqL,aAAL,CAAmBhU,IAAnB;AACA,aAAK+Q,eAAL;AACA;;AACJ,WAAK9T,8FAAL;AACI,aAAK2O,OAAL,CAAaC,UAAb,GAA0B7L,IAAI,CAAC6L,UAA/B;;AACA,YAAI7L,IAAI,CAACiU,OAAT,EAAkB;AACd,eAAKrI,OAAL,CAAasI,WAAb,GAA2BlU,IAAI,CAACiU,OAAhC;AACH;;AAED,aAAKlD,eAAL;AACA;AAlBR;AAoBH;;AAEO+C,yBAAuB;AAC3B,UAAM9E,KAAK,GAAQ;AACfmF,eAAS,EAAE,KAAKzL,EAAL,CAAQ0L,KAAR,CAAc,EAAd;AADI,KAAnB;AAGA,UAAMC,aAAa,GAAG,KAAKR,cAAL,CAAoB,CAApB,EAAuBS,OAA7C;;AAEA,QAAID,aAAa,CAACE,MAAlB,EAA0B;AACtBvF,WAAK,CAACwF,UAAN,GAAmB,IAAIhP,wDAAJ,CAAgB,KAAKmG,UAAL,CAAgB6I,UAAhB,GAA6B,CAA7B,GAAiC,KAAK7I,UAAL,CAAgB6I,UAAjD,GAA8D,EAA9E,CAAnB;AACAxF,WAAK,CAACwF,UAAN,CAAiB/F,aAAjB,CAA+B,CAC3BhJ,gEAD2B,EAE3BA,2DAAA,CAAeQ,yGAAf,CAF2B,EAG3BR,2DAAA,CAAeQ,yGAAf,CAH2B,CAA/B;AAKH;;AACD,SAAKwD,mBAAL,GAA2B,KAAKf,EAAL,CAAQsG,KAAR,CAAcA,KAAd,CAA3B;;AAEA,QAAI,CAAC9I,qFAAA,CAA2B,KAAKyD,gBAAhC,CAAL,EAAwD;AACpD,YAAMwK,SAAS,GAAG,CACd,GAAG,KAAKxI,UAAL,CAAgBiJ,UADL,EAEd,GAAG,KAAKjJ,UAAL,CAAgBkJ,YAFL,EAGd,GAAG,KAAKlJ,UAAL,CAAgBmJ,SAHL,CAAlB;;AAKA,WAAK,MAAMjQ,CAAX,IAAgBsP,SAAhB,EAA2B;AACvB,aAAK7F,WAAL,CAAiBzJ,CAAjB;AACH;AACJ;AACJ;;AAEOkQ,wBAAsB,CAACvW,IAAD,EAAeG,EAAf,EAA2BqW,iBAA3B,EAAoD;AAC9E,UAAM1B,IAAI,GAAG,KAAKO,cAAlB;;AACA,SAAK,MAAMoB,CAAX,IAAgB3B,IAAhB,EAAsB;AAClB,WAAK,MAAM4B,SAAX,IAAwBD,CAAxB,EAA2B;AACvB,YAAI,CAACA,CAAC,CAACE,cAAF,CAAiBD,SAAjB,CAAL,EAAkC;AAC9B;AACH;;AAED,YAAIA,SAAS,KAAK1W,IAAlB,EAAwB;AACpBA,cAAI,GAAG,KAAKmK,gBAAL,CAAsByM,OAAtB,CAA8BH,CAAC,CAACC,SAAD,CAAD,CAAaG,WAA3C,CAAP;AACH,SAFD,MAEO,IAAIH,SAAS,KAAKvW,EAAlB,EAAsB;AACzBA,YAAE,GAAG,KAAKgK,gBAAL,CAAsByM,OAAtB,CAA8BH,CAAC,CAACC,SAAD,CAAD,CAAaG,WAA3C,CAAL;AACH;AACJ;AACJ;;AAED,UAAMC,aAAa,GAAIC,IAAD,IAAyB;AAC3CA,UAAI,GAAGA,IAAI,CAAC3D,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAP;AACA2D,UAAI,GAAGA,IAAI,CAAC3D,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAP;AACA,aAAO2D,IAAP;AACH,KAJD;;AAMA,SAAKxX,aAAL,CAAmB4E,YAAnB,CAAgC;AAC5BC,aAAO,EAAE,KAAK+F,gBAAL,CAAsByM,OAAtB,CAA8BJ,iBAA9B,EAAiD;AACtDxW,YAAI,EAAE8W,aAAa,CAAC9W,IAAD,CADmC;AAEtDG,UAAE,EAAE2W,aAAa,CAAC3W,EAAD;AAFqC,OAAjD;AADmB,KAAhC;AAMH;;AAEO4O,kBAAgB,CAACnP,KAAD,EAAc;;;AAClC,UAAMsN,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM4H,IAAI,GAAG,KAAKO,cAAlB;;AACA,QAAInI,MAAM,CAACtN,KAAD,CAAN,CAAcoX,QAAlB,EAA4B;AACxB;AACH;;AAED,SAAK,MAAMP,CAAX,IAAgB3B,IAAhB,EAAsB;AAClB,WAAK,MAAM4B,SAAX,IAAwBD,CAAxB,EAA2B;AACvB,YAAI,CAACA,CAAC,CAACE,cAAF,CAAiBD,SAAjB,CAAL,EAAkC;AAC9B;AACH;;AAED,cAAMO,cAAc,GAAG,cAAC,CAACP,SAAD,CAAD,MAAY,IAAZ,IAAYzW,aAAZ,GAAY,MAAZ,GAAYA,GAAEiX,MAAd,MAAoB,IAApB,IAAoB9W,aAApB,GAAoB,MAApB,GAAoBA,GAAER,KAAtB,MAAgCA,KAAhC,KAAyC,YAAM,CAAC8W,SAAD,CAAN,MAAiB,IAAjB,IAAiBS,aAAjB,GAAiB,MAAjB,GAAiBA,GAAErI,QAA5D,CAAvB;;AACA,YAAI,CAACmI,cAAL,EAAqB;AACjB;AACH;;AAED,cAAMG,GAAG,GAAGX,CAAC,CAACC,SAAD,CAAD,CAAaQ,MAAzB;AACA,cAAMG,QAAQ,GAAGlQ,4EAAA,CACb+F,MAAM,CAACwJ,SAAD,CAAN,CAAkB5H,QADL,EAEb5B,MAAM,CAACwJ,SAAD,CAAN,CAAkBY,SAFL,EAGbpK,MAAM,CAACkK,GAAG,CAACxX,KAAL,CAAN,CAAkBkP,QAHL,EAIb5B,MAAM,CAACkK,GAAG,CAACxX,KAAL,CAAN,CAAkB0X,SAJL,CAAjB;;AAMA,YAAIC,KAAK,CAACF,QAAD,CAAT,EAAqB;AACjB;AACH;;AAED,cAAMG,gBAAgB,GAAGJ,GAAG,CAACK,MAAJ,IAAcL,GAAG,CAACK,MAAJ,GAAa,CAA3B,IAAgCJ,QAAQ,GAAGD,GAAG,CAACK,MAAxE;AACA,cAAMC,iBAAiB,GAAGN,GAAG,CAACO,SAAJ,IAAiBP,GAAG,CAACO,SAAJ,GAAgB,CAAjC,IAAsCN,QAAQ,GAAGD,GAAG,CAACO,SAA/E;;AACA,YAAIH,gBAAgB,IAAIE,iBAAxB,EAA2C;AACvCxK,gBAAM,CAACwJ,SAAD,CAAN,GAAoBrY,4GAAA,EAApB;AACA,eAAK0M,eAAL,CAAqBnJ,QAArB,CAA8B8U,SAA9B,EAAyCxS,KAAzC;AACA,eAAKqS,sBAAL,CACI3W,KADJ,EAEI8W,SAFJ,EAGIc,gBAAgB,GAAG,wBAAH,GAA8B,yBAHlD;AAKH;AACJ;AACJ;AACJ;;AAEOI,yBAAuB;AAC3B,UAAM7X,UAAU,GAAG,KAAKmN,MAAxB;AAEA,UAAM2K,sBAAsB,GACxB9X,UAAU,CAACC,IAAX,CAAgB+C,OAAhB,KACC,CAAChD,UAAU,CAACC,IAAX,CAAgB8O,QAAjB,IACG,CAAC/O,UAAU,CAACC,IAAX,CAAgBsX,SADpB,IAEI,CAACvX,UAAU,CAACC,IAAX,CAAgBqD,YAAjB,IAAiCtD,UAAU,CAACC,IAAX,CAAgB8X,UAAhB,KAA+BtQ,kGAHrE,CADJ;;AAKA,QAAIqQ,sBAAJ,EAA4B;AACxB,WAAK3K,MAAL,CAAYlN,IAAZ,GAAmB3B,4GAAA,EAAnB;AACH;;AAED,UAAM2Z,oBAAoB,GACtBjY,UAAU,CAACI,EAAX,CAAc4C,OAAd,KACC,CAAChD,UAAU,CAACI,EAAX,CAAc2O,QAAf,IAA2B,CAAC/O,UAAU,CAACI,EAAX,CAAcmX,SAA1C,IAAuDvX,UAAU,CAACI,EAAX,CAAc2X,UAAd,KAA6B,KADrF,CADJ;;AAGA,QAAIE,oBAAJ,EAA0B;AACtB,WAAK9K,MAAL,CAAY/M,EAAZ,GAAiB9B,4GAAA,EAAjB;AACH;AACJ;;AAEOmX,eAAa,CAAChU,IAAD,EAAU;AAC3B,QAAIA,IAAI,CAACyW,SAAT,EAAoB;AAChB,WAAKL,uBAAL;AACH,KAFD,MAEO,IAAI,CAACpW,IAAI,CAAC0W,aAAV,EAAyB;AAC5B;AACA,WAAKhL,MAAL,CAAYlN,IAAZ,GAAmB3B,4GAAA,EAAnB;AACA,WAAK6O,MAAL,CAAY/M,EAAZ,GAAiB9B,4GAAA,EAAjB;AACH;;AACD,QAAImD,IAAI,CAAC0W,aAAT,EAAwB;AACpB,YAAMC,WAAW,GAAGtQ,qIAAA,CAChB,SADgB,EAEhB,KAAKwN,cAFW,EAGhB,KAAKnI,MAAL,CAAYmL,OAHI,CAApB;;AAKA,UAAIF,WAAJ,EAAiB;AACb,aAAKG,SAAL,CAAe,SAAf;AACH;AACJ;AACJ;;AAEOtF,sBAAoB;AACxB,UAAM9F,MAAM,GAAG/F,4EAAA,CAAsB,KAAK/H,iBAAL,CAAuBsT,cAAvB,EAAtB,CAAf;AACA,SAAKxF,MAAL,GAAcA,MAAM,CAACnN,UAArB;AACA,SAAKqN,OAAL,GAAeF,MAAM,CAACE,OAAtB;AACA,SAAKD,UAAL,GAAkBzF,kFAAA,CAAwB,KAAKyD,gBAA7B,EAA+C+B,MAAM,CAACC,UAAtD,EAAkE,KAAKhD,gBAAvE,CAAlB;AACA,SAAKiD,OAAL,CAAaC,UAAb,GAA0B/F,iEAA1B;AACA,SAAKyD,eAAL,CAAqB7G,KAArB;AACH;;AAEO8H,aAAW;AACf,QAAI,KAAKX,cAAL,KAAwB/E,SAAxB,IAAqC,KAAK+E,cAAL,KAAwBhE,+EAAjE,EAAoF;AAChF;AACH;;AACD5D,WAAO,CAACQ,KAAR,CAAc,cAAd;AACA,UAAMiJ,MAAM,GAAG/F,4EAAA,CAAsB,KAAK/H,iBAAL,CAAuB2N,SAAvB,CAAiC,KAAK1B,cAAtC,CAAtB,CAAf;AACA,SAAK6B,MAAL,GAAcA,MAAM,CAACnN,UAArB;AACA0D,WAAO,CAACQ,KAAR,CAAc,KAAKiJ,MAAnB;AACA,SAAKC,UAAL,GAAkBhG,4EAAA,CAAsB,KAAKmK,kBAA3B,CAAlB;AACA,SAAKiH,oBAAL,GAA4B,EAAE,KAAKA,oBAAnC;AACA5Q,IAAAA,oHAAA,CAA2C,KAAKqD,kBAAhD;AACA,SAAKC,mBAAL,CAAyBwN,UAAzB,CAAoC;AAAEzC,gBAAU,EAAE,KAAK1E,kBAAL,CAAwB0E;AAAtC,KAApC;AACA,SAAK0C,oBAAL;AACA,SAAK3N,eAAL,CAAqB7G,KAArB,CAA0BS,kBAAM,KAAKyM,UAAX,CAA1B;AACH;;AAEOsH,sBAAoB;AACxB,SAAKrH,oBAAL,CAA0BsE,SAA1B,CAAoCgD,GAApC,CAAyClI,QAAD,IAAa;AACjD,WAAKzF,kBAAL,CAAwBuF,IAAxB,CAA6B,KAAKrG,EAAL,CAAQsG,KAAR,CAAcC,QAAd,CAA7B;AACH,KAFD;AAGH;;AAEOxB,wCAAsC;AAC1C,QACIpH,4HAAA,CACI,KAAKqF,MAAL,CAAY2L,WADhB,EAEI,KAAK3L,MAAL,CAAYmL,OAFhB,EAGI,KAAKlN,gBAHT,CADJ,EAME;AACE,WAAKmN,SAAL,CAAe,aAAf;AACH;;AACD,QAAIzQ,4HAAA,CAAiD,WAAjD,EAA8D,KAAKwN,cAAnE,EAAmF,KAAKnI,MAAxF,CAAJ,EAAqG;AACjG,WAAKoL,SAAL,CAAe,WAAf;AACH;AACJ;;AAEOA,WAAS,CAAC1Y,KAAD,EAAgBmZ,QAAQ,GAAG,KAA3B,EAAgC;AAC7C,SAAK7L,MAAL,CAAYtN,KAAZ,IAAqBiI,wHAAA,EAArB;AACH;;AAnyBuB;;;mBAAfgC,iBAAejL,gEAAAA,CAAAA,mGAAAA,GAAAA,gEAAAA,CAAAA,mEAAAA,GAAAA,gEAAAA,CAAAA,kGAAAA,GAAAA,gEAAAA,CAAAA,uFAAAA,GAAAA,gEAAAA,CAAAA,kGAAAA,GAAAA,gEAAAA,CAAAA,8FAAAA,GAAAA,gEAAAA,CAAAA,wDAAAA,GAAAA,gEAAAA,CAAAA,uFAAAA,GAAAA,gEAAAA,CAAAA,oEAAAA,GAAAA,gEAAAA,CAAAA,kEAAAA,GAAAA,gEAAAA,CAAAA,iFAAAA,GAAAA,gEAAAA,CAAAA,sFAAAA,GAAAA,gEAAAA,CAAAA,kGAAAA,GAAAA,gEAAAA,CAAAA,oDAAAA,GAAAA,gEAAAA,CAAAA,qDAAAA,GAAAA,gEAAAA,CAAAA,wEAAAA,GAAAA,gEAAAA,CAAAA,kEAAAA;AAAA;;;QAAfiL;AAAehD;AAAAoS;AAAA9N;AAAAhK;AAAAiK;AAAAC;AAAA;AAAA6N;AAAA1G;AAAAlF;AAAAE;AAAA;AAAA2L,aAAAA,mEAAAA;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AClD5B3a,MAAAA,6DAAAA;AASIA,MAAAA,yDAAAA;AA4EAA,MAAAA,yDAAAA;AAiBAA,MAAAA,6DAAAA;AASIA,MAAAA,yDAAAA;AAQAA,MAAAA,6DAAAA;AACIA,MAAAA,yDAAAA;AA0EAA,MAAAA,yDAAAA;AAgBJA,MAAAA,2DAAAA;AACAA,MAAAA,yDAAAA;AAaAA,MAAAA,yDAAAA;AAUAA,MAAAA,yDAAAA;AAGJA,MAAAA,2DAAAA;;;;AA3OAA,MAAAA,yDAAAA,CAAAA,8DAAAA;AAO6FA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AA6ExFA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAiBDA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA,mCAA6B,SAA7B,EAA6BA,8DAAAA,uFAA7B;AASKA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAO2BA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA,YAAAA,8DAAAA;AACQA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AA0E9BA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAsBLA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAWAA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;AAOIA,MAAAA,wDAAAA;AAAAA,MAAAA,yDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzO8B;AACmB;AAEb;AACe;AACf;AACa;AACG;AACf;AAC6B;AACa;AACiB;AAClC;AACI;AACW;;;AAuBvF,MAAM,YAAY;;wEAAZ,YAAY;0GAAZ,YAAY;8GAVZ,CAAC,0DAAY,EAAE,+DAAY,EAAE,wDAAW,EAAE,gEAAmB,EAAE,iEAAc,EAAE,4FAAqB,CAAC,EAI1G,+DAAY;oIAMP,YAAY,mBApBjB,8DAAe;QACf,6EAAiB;QACjB,2EAAiB;QACjB,8EAAkB;QAClB,4FAAwB;QACxB,yGAAyB;QACzB,wFAAoB;QACpB,0HAA2B;QAC3B,wGAAyB,aAEnB,0DAAY,EAAE,+DAAY,EAAE,wDAAW,EAAE,gEAAmB,EAAE,iEAAc,EAAE,4FAAqB,aAEzG,8DAAe;QACf,6EAAiB;QACjB,+DAAY;QACZ,2EAAiB;QACjB,8EAAkB;QAClB,wGAAyB;mEAZzB,yGAAyB,GACzB,wFAAoB;;;;;;;;;;;;;;;;;;;;ACvB4D;AACZ;AACf;AACS;AACM;AAErE,MAAM,mBAAmB;IAO5B,YAAY,QAAkB;QAC1B,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC,GAAG,CAAC,kGAAiB,CAAC,CAAC;QACzD,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,sFAAY,CAAC,CAAC;QAC/C,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,GAAG,CAAC,sFAAgB,CAAC,CAAC;QACvD,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,uEAAe,CAAC,CAAC;QACrD,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,gFAAe,CAAC,CAAC;IACzD,CAAC;CACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBD,oBAAoB;AAaG;AACqB;AACgB;AAEG;AAGN;AAE4B;AACT;AACT;;;;;;;;;ICtB3D,mGAcC;IAPG,8VAAS,0BAAmB,IAAC,+RACpB,iBAAU,KAAK,CAAC,IADI,+SAEZ,sBAAe,IAFH;IAQjC,6DAA+B;;;IAb3B,wFAAuB;;;;IAc3B,mGAcC;IAPG,8VAAS,0BAAmB,IAAC,gSACpB,kBAAU,KAAK,CAAC,IADI,gTAEZ,uBAAe,IAFH;IAQjC,6DAA+B;;;IAb3B,wFAAuB;;;;IAc3B,qGAeC;IARG,oWAAS,2BAAmB,IAAC,qSACpB,kBAAU,KAAK,CAAC,IADI,qTAEZ,uBAAe,IAFH;IASjC,6DAAiC;;;IAd7B,wFAAuB;;;IAkBnC,uEAKC;IACG,sFAMwB;IAC5B,6DAAM;;;IANE,2DAA6B;IAA7B,8FAA6B;;ADnCrC,IAAY,WAMX;AAND,WAAY,WAAW;IACnB,+CAAa;IACb,8CAAY;IACZ,6CAAW;IACX,2CAAS;IACT,0CAAQ;AACZ,CAAC,EANW,WAAW,KAAX,WAAW,QAMtB;AAED,IAAY,QAMX;AAND,WAAY,QAAQ;IAChB,mBAAO;IACP,mBAAO;IACP,mBAAO;IACP,mBAAO;IACP,mBAAO;AACX,CAAC,EANW,QAAQ,KAAR,QAAQ,QAMnB;AAOM,MAAM,wBAAwB;IA6FjC,YACY,iBAAoC,EACpC,YAA0B,EAC1B,gBAAkC,EACnC,eAAgC,EAC/B,eAAgC;QAJhC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,iBAAY,GAAZ,YAAY,CAAc;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAkB;QACnC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,oBAAe,GAAf,eAAe,CAAiB;QAjGnC,aAAQ,GAAY,KAAK,CAAC;QAC1B,eAAU,GAAG,EAAE,CAAC;QAEhB,iBAAY,GAAQ;YACzB,KAAK,EAAE,0BAA0B;YACjC,WAAW,EAAE,IAAI;YACjB,OAAO,EAAE,oFAAsB;YAC/B,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,CAAC;YACZ,SAAS,EAAE,CAAC;YACZ,SAAS,EAAE,CAAC;YACZ,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC;YACV,WAAW,EAAE,mBAAmB;YAChC,UAAU,EAAE,IAAI;YAChB,cAAc,EAAE,IAAI;YACpB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,KAAK;SACd,CAAC;QAIO,iBAAY,GAAkB,8DAAY,CAAC;QAC3C,YAAO,GAAG,oFAAsB,CAAC;QACjC,4BAAuB,GAAG,KAAK,CAAC;QAChC,iBAAY,GAAQ,EAAE,CAAC;QACvB,qBAAgB,GAA+B,qGAAuC,CAAC;QACtF,oBAAe,GAAuB,IAAI,wDAAY,EAAQ,CAAC;QAC/D,UAAK,GAAuB,IAAI,wDAAY,EAAQ,CAAC;QACrD,UAAK,GAAsB,IAAI,wDAAY,EAAO,CAAC;QAEtD,aAAQ,GAAG,sEAAQ,CAAC;QACpB,UAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,gBAAW,GAAG,KAAK,CAAC;QACpB,sBAAiB,GAAG,IAAI,CAAC;QACzB,oBAAe,GAAG,IAAI,CAAC;QACvB,oBAAe,GAAG,IAAI,CAAC;QACvB,cAAS,GAAU,EAAE,CAAC;QACtB,YAAO,GAAG,CAAC,CAAC;QAEZ,cAAS,GAAa,EAAE,CAAC;QAoBzB,eAAU,GAAG,KAAK,CAAC;IAsCvB,CAAC;IAEG,MAAM,CAAC,iBAAiB,CAAC,KAAW;QACvC,IAAI,CAAC,KAAK;YAAE,OAAO;QACnB,OAAO,oGAA0B,CAAC,KAAK,CAAC,CAAC;IAC7C,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACvC,CAAC;IAED,WAAW,CAAC,OAAsB;QAC9B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC;QACzC,sCAAsC;IAC1C,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC7D;IACL,CAAC;IAEM,QAAQ,CAAC,SAAc,EAAE,GAAQ;QACpC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM;YAAE,OAAO;QAC3C,OAAO,wGAA8B,CACjC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,EAC9B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,EAC/B,GAAG,CAAC,QAAQ,EAAE,CACjB,CAAC;IACN,CAAC;IAEM,SAAS;QACZ,IAAI,SAAS,GAAG,KAAK,CAAC;QAEtB,QAAQ,IAAI,CAAC,OAAO,EAAE;YAClB,KAAK,sFAAwB,CAAC;YAC9B,KAAK,wFAA0B;gBAC3B,SAAS;oBACL,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;wBACvE,CAAC,CAAC,IAAI,CAAC,YAAY;4BACf,CAAC,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC;gCAC7C,CAAC,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;wBACxD,IAAI,CAAC,sBAAsB,EAAE;wBAC7B,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC;wBAC3C,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC;wBAC5C,IAAI,CAAC,WAAW,CAAC;gBACrB,MAAM;YACV,KAAK,oFAAsB,CAAC;YAC5B,KAAK,uFAAyB;gBAC1B,SAAS;oBACL,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;wBACvE,CAAC,CAAC,IAAI,CAAC,YAAY;4BACf,CAAC,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC;gCAC7C,CAAC,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAE7D,MAAM;YACV;gBACI,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;gBAChD,OAAO,KAAK,CAAC;SACpB;QAED,OAAO,SAAS,CAAC;IACrB,CAAC;IAEM,aAAa;QAChB,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;QAC5B,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE;gBAChE,EAAE,EAAE,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ;aAC5C,CAAC,CAAC;QACP,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ,CAAC;IAEM,SAAS,CAAC,OAAgB;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QACpF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,EAAE,CAAC;QAEjC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAClC,+BAA+B;QAC/B,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAChC,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3B;QAED,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SACrB;IACL,CAAC;IAEM,UAAU,CAAC,SAAc,EAAE,GAAQ,EAAE,KAAU,EAAE,OAAY;QAChE,IAAI,KAAK,IAAI,CAAC,GAAG,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;YAAE,OAAO;QAEnE,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;QAC1C,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;QAE5C,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAE5D,IAAI,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACvG,IAAI,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC/F,IAAI,KAAK,GAAG,QAAQ,IAAI,KAAK,GAAG,YAAY;YAAE,OAAO;QAErD,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,QAAQ,GACR,IAAI,CAAC,KAAK,KAAK,SAAS;YACpB,CAAC,CAAC,IAAI,CAAC,KAAK;YACZ,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC/B,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC/B,CAAC,CAAC,IAAI,CAAC;QACf,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAE5D,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC5E,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;aAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACtC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;QACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QAEzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;QAC7D,IAAI,CAAC,OAAO;YACR,IAAI,CAAC,OAAO,KAAK,SAAS;gBACtB,CAAC,CAAC,IAAI,CAAC,OAAO;gBACd,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;oBAC/B,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;oBAC/B,CAAC,CAAC,IAAI,CAAC;QAEf,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC7F,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,MAAM,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,OAAO,EAAE,EAAE;YAChE,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;YAC1B,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;YACjC,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,UAAU,EAAE,CAAC;YACnC,IAAI,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;YAC9B,IAAI,aAAa,EAAE;gBACf,IAAI,GAAG,IAAI,GAAG,aAAa,CAAC;gBAC5B,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;gBACjB,IAAI,IAAI,KAAK,EAAE,EAAE;oBACb,IAAI,GAAG,CAAC,CAAC;oBACT,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;iBACnB;aACJ;YAED,6CAA6C;YAC7C,IAAI,UAAU,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YACjG,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YACnG,YAAY,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAElC,IAAI,UAAU,CAAC,OAAO,EAAE,IAAI,YAAY,CAAC,OAAO,EAAE,EAAE;gBAChD,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAC/D,UAAU,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;aACpE;YACD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;gBAC5B,qDAAqD;gBACrD,OAAO;aACV;YACD,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;gBAC5B,OAAO;aACV;YAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;aAC1B;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,sCAAsC;YACtC,0BAA0B;YAC1B,uBAAuB;YACvB,IAAI;YACJ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,OAAO;SACV;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC5E,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;gBAC5B,OAAO;aACV;YACD,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;gBAC5B,OAAO;aACV;YACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;gBACxB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;aAC5B;YACD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;YACD,OAAO;SACV;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;YACzC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;oBAC5B,OAAO;iBACV;gBACD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC3B,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;oBACrE,IAAI,IAAI,CAAC,UAAU;wBAAE,cAAc,EAAE,CAAC;oBACtC,IAAI,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;wBAC7C,sIAAsI;wBACtI,UAAU,CAAC,GAAG,EAAE;4BACZ,+BAA+B;4BAC/B,IAAI,CAAC,gBAAgB,EAAE,CAAC;wBAC5B,CAAC,EAAE,IAAI,CAAC,CAAC;wBACT,OAAO;qBACV;iBACJ;gBAED,IAAI,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;gBACxG,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAChE,IAAI,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC5C,mEAAmE;oBACnE,OAAO;iBACV;gBAED,wEAAwE;gBACxE,IAAI,cAAc,IAAI,CAAC,EAAE;oBACrB,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACzC,IAAI,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnC,IAAI,IAAI,GAAG,QAAQ,GAAG,EAAE,CAAC;oBACzB,IAAI,IAAI,IAAI,EAAE,EAAE;wBACZ,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;wBACjB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;qBAC5B;oBAED,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE;wBAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;qBAC7B;oBAED,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;iBAC/C;gBAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,sCAAsC;gBACtC,0BAA0B;gBAC1B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBACzD,IAAI;gBACJ,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;aACnC;YAED,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC3B,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;aACtC;YAED,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACjD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;YAC5B,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,EAAE;YAC5B,OAAO;SACV;QAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;YACxB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;SAC5B;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IAEM,WAAW,CAAC,IAA0C;QACzD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1B,CAAC;IAEO,aAAa;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;IACtD,CAAC;IAED,8FAA8F;IACtF,YAAY,CAAC,IAAS,EAAE,MAAW,EAAE,MAAgB;QACzD,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,KAAK,qFAAuB,EAAE;YACzD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,+BAA+B;YAC9D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,iEAAe,CAAC;SAC5F;aAAM;YACH,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,CAAC,+BAA+B;YAC/D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC;SAC5C;QACD,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE;gBACzB,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;oBAC1B,QAAQ,GAAG,EAAE;wBACT,KAAK,UAAU;4BACX,gDAAgD;4BAChD,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE;gCACnC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;6BAC9D;4BACD,MAAM;wBACV,KAAK,QAAQ;4BACT,gDAAgD;4BAChD,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE;gCACjC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;6BAC5D;4BACD,MAAM;qBACb;iBACJ;aACJ;SACJ;QACD,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,MAAM,EAAE;YACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,iEAAe,CAAC,CAAC,CAAC,8DAAY,CAAC;SAClF;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC,8DAAY,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC;QACrF,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,0GAA+B,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QACnG,gFAAgF;QAChF,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvC,CAAC;IAEO,sBAAsB;QAC1B,IAAI,SAAS,EAAE,OAAO,CAAC;QAEvB,IAAI,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YACjD,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;SACjD;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;QACD,IAAI,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YAC/C,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;SAC7C;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;QAED,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/D,IAAI,OAAO;YAAE,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7E,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACrD,OAAO,IAAI,CAAC,WAAW,IAAI,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;SAC/E;QACD,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,MAAM,EAAE;YACpD,OAAO,CACH,SAAS,CAAC,OAAO,EAAE,IAAI,OAAO,CAAC,OAAO,EAAE;gBACxC,CAAC,IAAI,CAAC,WAAW,IAAI,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CACzE,CAAC;SACL;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;IACL,CAAC;IAEO,qBAAqB,CAAC,OAAgB;QAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAS,EAAE,EAAE;gBAC9C,IAAI,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;oBACpB,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;gBACxB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEO,sBAAsB,CAAC,OAAY;QACvC,gDAAgD;QAChD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO;YAAE,OAAO;QACvC,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;YACpC,OAAO;SACV;QAED,IAAI,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,UAAU;YAAE,YAAY,GAAG,YAAY,GAAG,CAAC,CAAC;QACtD,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAClD,IAAI,OAAO,GAAG,SAAS,CAAC,OAAO,EAAE,GAAG,YAAY,CAAC;QACjD,IAAI,YAAY,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC;QACjD,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAO,EAAE,EAAE;gBAC5C,EAAE,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;oBAClB,IAAI,CAAC,CAAC,CAAC,IAAI;wBAAE,OAAO;oBAEpB,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;oBAC3E,IAAI,EAAE,GAAG,YAAY,EAAE;wBACnB,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC;wBACjB,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;4BACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAC9C;qBACJ;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEO,OAAO,CAAC,QAAkB;QAC9B,IAAI,GAAG,GAAQ,EAAE,CAAC;QAElB,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;YAAE,OAAO;QAChF,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,YAAY,IAAI,CAAC;YAAE,OAAO;QAE5D,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACxG,IAAI,MAAM,CAAC;QACX,IAAI,OAAO,IAAI,OAAO,GAAG,QAAQ,EAAE;YAC/B,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,QAAQ,EAAE;YAC/B,OAAO;SACV;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,YAAY,IAAI,EAAE;YAChD,GAAG,CAAC,QAAQ,GAAG,oGAA0B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzD,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC;SACzB;QACD,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,YAAY,IAAI,EAAE;YAC5C,GAAG,CAAC,MAAM,GAAG,oGAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrD,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;SAC/F;aAAM;YACH,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;aACjD;iBAAM;gBACH,GAAG,CAAC,MAAM,GAAG,OAAO,CAAC;aACxB;SACJ;aAAM;YACH,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;SAC/C;aAAM;YACH,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;SAC1B;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE;YACxB,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;SAChC;QACD,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE7B,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAC9B,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;SACvE;aAAM;YACH,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;YAC9C,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;gBAC5B,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC,cAAc,GAAG,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC;aAClE;SACJ;QAED,IAAI,IAAI,CAAC,uBAAuB,IAAI,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;YAC7F,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC;YACxE,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,GAAG,GAAG,GAAG,SAAS,GAAG,IAAI,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;YAC1F,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC;SACzB;QAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,EAAE;YACX,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE;gBAChE,EAAE,EAAE,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ;aAC5C,CAAC,CAAC;SACN;IACL,CAAC;IAEO,2BAA2B;QAC/B,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACrC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;YAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YACxC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;YAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;YAC3C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;YAC3C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;YACnD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;SACpD;QAED,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CACpD,CAAC,qFAAsB,EAAE,4FAA6B,CAAC,EACvD,IAAI,CAAC,eAAe,CACvB,CAAC;SACL;QACD,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC;QAEpD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAClF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QACpF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;QAE7C,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,sCAAsC;QAEtF,IAAI,SAAS,CAAC;QACd,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,QAAQ,GAAG,4EAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC5D;aAAM;YACH,IAAI,CAAC,QAAQ,GAAG;gBACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,YAAY,EAAE,IAAI,CAAC,YAAY;aAClC,CAAC;SACL;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;QACvD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAExD,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC;SACjC;aAAM;YACH,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC7B;QACD,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,SAAS,CAAC,MAAM,EAAE;YACpC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YACxB,SAAS,CAAC,MAAM,GAAG,EAAE,CAAC;SACzB;QACD,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,KAAK,EAAE;gBAAE,OAAO;YACrE,IAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;YAC/F,IAAI,QAAQ;gBAAE,QAAQ,CAAC,cAAc,EAAE,CAAC;QAC5C,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,eAAe,CAAC,IAAS;QAC7B,QAAQ,IAAI,EAAE;YACV,KAAK,qFAAsB;gBACvB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,MAAM;YACV,KAAK,4FAA6B,EAAE,2BAA2B;gBAC3D,IAAI,CAAC,2BAA2B,EAAE,CAAC;gBACnC,MAAM;YACV;gBACI,OAAO,CAAC,GAAG,CAAC,sCAAsC,GAAG,IAAI,CAAC,CAAC;SAClE;IACL,CAAC;IAEO,WAAW,CAAC,IAAS,EAAE,KAAU;QACrC,IAAI,aAAa,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;QAC7C,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3C,IAAI,SAAS,GAAG,EAAE,CAAC;QAEnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,EAAE,EAAE;YAC9D,SAAS,CAAC,IAAI,CAAC;gBACX,EAAE,EAAE,GAAG,GAAG,CAAC;gBACX,IAAI,EAAE,EAAE;aACX,CAAC,CAAC;SACN;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,EAAE;YACzC,SAAS,CAAC,IAAI,CAAC;gBACX,EAAE,EAAE,CAAC;gBACL,IAAI,EAAE,CAAC;gBACP,MAAM,EAAE,CAAC,KAAK,OAAO,CAAC,OAAO,EAAE;gBAC/B,OAAO,EAAE,KAAK;aACjB,CAAC,CAAC;SACN;QACD,IAAI,SAAS,GAAG,QAAQ,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5D,IAAI,IAAI,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAChC,IAAI,IAAI,GAAG,CAAC,EAAE;YACV,SAAS,GAAG,SAAS,GAAG,CAAC,CAAC;SAC7B;QAED,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE;YAChC,IAAI,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACjD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACzB;QAED,OAAO,MAAM,CAAC;IAClB,CAAC;IAEO,SAAS;QACb,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;QACrD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO;YACvB,CAAC,CAAC,IAAI,CAAC,OAAO;YACd,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,IAAI,UAAU,GACV,yGAA8B,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC;YAChD,CAAC,CAAC,yGAA8B,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC;YACtD,CAAC,CAAC,CAAC,CAAC;QACZ;mFAC2E;QAE3E,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;QAEtE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;YACjC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,QAAQ,GAAG,+GAAoC,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;YAC7F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAChB,GAAG,EAAE,CAAC;gBACN,QAAQ;gBACR,KAAK,EAAE,QAAQ,CAAC,WAAW;gBAC3B,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,KAAK,CAAC;gBACjE,IAAI,EAAE,QAAQ,CAAC,IAAI;gBACnB,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,WAAW,CAAC;aAC7F,CAAC,CAAC;SACN;IACL,CAAC;IAEO,WAAW,CAAC,OAAY;QAC5B,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,QAAQ;QAC3D,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,OAAO,CAAC,QAAQ,EAAE;YAClB,IAAI,QAAQ,GAAG,iGAAuB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YACzD,IAAI,QAAQ,EAAE;gBACV,IAAI,OAAO,CAAC,QAAQ,EAAE;oBAClB,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACtC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;iBACtB;qBAAM;oBACH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;oBAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;iBACpB;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAO,EAAE,EAAE;wBAC5C,EAAE,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;4BAClB,IAAI,CAAC,CAAC,CAAC,IAAI;gCAAE,OAAO;4BACpB,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;4BAC3E,IAAI,EAAE,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC,OAAO,EAAE;gCAAE,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC9E,CAAC,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;gBACD,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;oBAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;iBACvB;aACJ;YACD,IAAI,MAAM,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,MAAM;gBAChE,MAAM,GAAG,iGAAuB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACrD,IAAI,MAAM,EAAE;gBACR,IAAI,OAAO,CAAC,MAAM,EAAE;oBAChB,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACpC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;iBACxB;qBAAM;oBACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;oBACpF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;iBACtB;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;gBAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAEvG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;aAClD;YAED,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC7F,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;SACJ;IACL,CAAC;IAEO,kBAAkB;QACtB,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACnE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SAC1D;QAED,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;YAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;SAClD;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YAC1C,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,OAAO;SACV;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACpC,CAAC;IAEO,QAAQ,CAAC,QAAc,EAAE,MAAY,EAAE,QAAkB;QAC7D,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAc,CAAC;QAC9C,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAC3C,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;QACvC,IAAI,QAAQ,KAAK,GAAG,EAAE;YAClB,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACtC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC3C;QACD,MAAM,IAAI,GAAG,GAAG,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;QAE7C,6EAA6E;QAC7E,wBAAwB;QACxB,IAAI,QAAQ,KAAK,GAAG,IAAI,IAAI,GAAG,WAAW,CAAC,GAAG,CAAC,EAAE;YAC7C,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAClD;QACD,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;IACpD,CAAC;IAEO,gBAAgB,CAAC,QAAc,EAAE,MAAY,EAAE,gBAAsB;QACzE,IAAI,gBAAgB,IAAI,IAAI,CAAC,MAAM;YAAE,OAAO;QAE5C,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE;YACtB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,OAAO;SACV;QAED,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QACjE,IAAI,IAAI,CAAC,OAAO,KAAK,sFAAwB,IAAI,IAAI,CAAC,OAAO,KAAK,wFAA0B,EAAE;YAC1F,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,mEAAmE;YACjI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;YACjD,OAAO;SACV;QACD,IAAI,cAAc,IAAI,CAAC,EAAE;YACrB,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;YACjC,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;gBAC1C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,mDAAmD;aAC5E;SACJ;IACL,CAAC;IAGO,OAAO,CAAC,CAAgB;QAC5B,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;YAAE,OAAO;QAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAGO,gBAAgB,CAAC,CAAM;;QAC3B,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,UAAU;YAAE,OAAO;QAExD,sCAAsC;QACtC,IACI,CAAC,CAAC,MAAM;YACR,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,mBAAmB,CAAC;YACxC,QAAC,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,0CAAE,SAAS,MAAK,IAAI,CAAC,UAAU;YAExD,OAAO;QACX,wBAAwB;QACxB,IAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACnD,IAAI,CAAC,GAAG;YAAE,OAAO;QACjB,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,WAAW,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;YACvD,OAAO;SACV;QAED,IACI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,KAAK,gBAAgB;YAC3C,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,gBAAgB;YAChC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,WAAW,CAAC;YAC/C,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC;YAC/C,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,CAAC;YAC9C,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC;YACpC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAC5D;YACE,OAAO;SACV;QACD,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;QAC5B,IACI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,CAAC,CAAC,MAAM,CAAC,QAAQ,KAAK,OAAO;YAC7B,CAAC,IAAI,CAAC,QAAQ;YACd,CAAC,yFAAkC,CAAC,CAAC,CAAC,MAAM,EAAE,iBAAiB,CAAC,EAClE;YACE,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE;gBAChE,EAAE,EAAE,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ;aAC5C,CAAC,CAAC;SACN;IACL,CAAC;;gGA76BQ,wBAAwB;uHAAxB,wBAAwB;uJAAxB,mBAAe,mKAAf,4BAAwB;;QC/CrC,0EAAsH;QAClH,4EAAmC;QAC/B,uKAe+B;QAC/B,uKAe+B;QAC/B,4KAgBiC;QACrC,sEAAe;QACnB,6DAAM;QAEN,qHAaM;;QAnEgC,qJAA+E;QACnG,2DAAoB;QAApB,kFAAoB;QAEzB,2DAAwC;QAAxC,yGAAwC;QAgBxC,2DAAsC;QAAtC,uGAAsC;QAgBtC,2DAAoC;QAApC,qGAAoC;QAoB5C,2DAKL;QALK,yMAKL;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDuB;AACqB;AACgB;AACG;AACwB;AAC9B;AACM;AACsB;AACT;;;;;;;ICTpE,0EAKC;IADG,2SAAS,6CAA+B,QAAQ,GAAG,WAAW,GAAG,QAAQ,CAAC,IAAC;IAE3E,0EAAuD;IAE/C,uDACJ;IAAA,4DAAI;IACJ,sEAAK;IAAA,uDAAmC;;IAAA,4DAAM;;;IAHpB,0DAAoD;IAApD,uKAAoD;IAC1E,0DACJ;IADI,iJACJ;IACK,0DAAmC;IAAnC,mJAAmC;;;IAgCxC,qEAAsE;;;IAUtE,qEAAuE;;;IAyBvE,0EAA6F;IACzF,uDACJ;IAAA,4DAAM;;;IADF,0DACJ;IADI,wFACJ;;;;;IAKQ,yEAoCC;IAhCG,wdAAa,kDAAmC,IAAC,wZACxC,kDAAmC,KAAK,kBAAc,IADd;IAiCjD,0EAA6B;IACzB,uDACJ;IAAA,4DAAM;;;;;;IAjCN,i8CA6BE;IAGE,0DACJ;IADI,wFACJ;;;IAxCR,qEAAoD;IAChD,wIAwCK;IACT,4DAAK;;;IAvCmB,0DAAe;IAAf,qFAAe;;;;;;;IAzEnD,0EAYC;IAMe,gTAAS,yBAAiB,CAAC,CAAC,IAAC;IAG7B,qEAIE;IACN,4DAAS;IAGb,mIAAsE;IAEtE,0EAIC;IACG,uDACJ;IAAA,4DAAM;IAEN,mIAAuE;IAEvE,0EAA8C;IAItC,iTAAS,wBAAgB,CAAC,CAAC,IAAC;IAK5B,sEASE;IACN,4DAAS;IAGjB,2EAA4B;IACxB,qIAEM;IACV,4DAAM;IACN,uEAAK;IAEG,mIA0CK;IACT,4DAAQ;;;;;;IA/GZ,+GAAyC;IACzC,wLAAsE;IAWvC,0DAAiB;IAAjB,8EAAiB;IAKpC,0DAAuD;IAAvD,iKAAuD;IAInD,0DAAwF;IAAxF,kMAAwF;IAM9F,0DAAY;IAAZ,4EAAY;IAKd,0DAA0D;IAA1D,qHAA0D;IAE1D,0DACJ;IADI,uHACJ;IAEM,0DAAa;IAAb,6EAAa;IAEQ,0DAAkB;IAAlB,+EAAkB;IAKrC,0DAEE;IAFF,mOAEE;IAIE,0DAKE;IALF,qQAKE;IAOY,0DAAY;IAAZ,qFAAY;IAML,0DAAqB;IAArB,0FAAqB;;;;;;IAgD1D,0EAAuE;IAI/D,gTAAS,2BAAmB,QAAQ,CAAC,IAAC;IAGtC,uDACJ;;IAAA,4DAAS;IAET,6EAQC;IANG,gTAAS,2BAAmB,WAAW,CAAC,IAAC;IAOzC,uDACJ;;IAAA,4DAAS;;;IAfL,0DAA4F;IAA5F,oMAA4F;IAE5F,0DACJ;IADI,8JACJ;IAKI,0DAIE;IAJF,oOAIE;IAEF,0DACJ;IADI,iKACJ;;;IAMJ,oEAAsE;;;;;;IAiFtE,yEAAkE;IAK1D,uDAIJ;;IAAA,4DAAM;IAEN,0EAAkB;IAON,iTAAS,iCAAyB,CAAC,EAAE,SAAS,CAAC,IAAC;IAEhD,qEAGE;IACN,4DAAS;IAET,0EAA8D;IAC1D,uDACJ;IAAA,4DAAM;IAEN,8EAMC;IADG,kTAAS,gCAAwB,CAAC,EAAE,SAAS,CAAC,IAAC;IAE/C,sEAGE;IACN,4DAAS;IAGb,2EAA+B;IAAA,6DAAC;IAAA,4DAAM;IAEtC,2EAAmC;IAM3B,kTAAS,kCAA0B,CAAC,EAAE,QAAQ,CAAC,IAAC;IAEhD,sEAGE;IACN,4DAAS;IAET,2EAA8D;IAC1D,wDACJ;IAAA,4DAAM;IAEN,8EAMC;IADG,kTAAS,kCAA0B,CAAC,EAAE,QAAQ,CAAC,IAAC;IAEhD,sEAGE;IACN,4DAAS;;;IAxEb,0DAAuD;IAAvD,mKAAuD;IAEvD,0DAIJ;IAJI,kPAIJ;IAKY,0DAA6D;IAA7D,yLAA6D;IAa7D,0DACJ;IADI,0FACJ;IAGI,0DAAgE;IAAhE,4LAAgE;IAiBhE,0DAA6D;IAA7D,yLAA6D;IAa7D,0DACJ;IADI,yFACJ;IAGI,0DAAgE;IAAhE,4LAAgE;;;;IAkBpF,0EAAiF;IAGrE,uDACJ;;IAAA,4DAAM;IACN,0EAAqC;IAMzB,iTAAS,iCAAyB,CAAC,EAAE,OAAO,CAAC,IAAC;IAE9C,qEAGE;IACN,4DAAS;IACT,0EAAiC;IAC7B,wDACJ;IAAA,4DAAM;IACN,8EAKC;IADG,kTAAS,gCAAwB,CAAC,EAAE,OAAO,CAAC,IAAC;IAE7C,sEAGE;IACN,4DAAS;IAEb,2EAA+B;IAAA,6DAAC;IAAA,4DAAM;IACtC,2EAAmC;IAK3B,kTAAS,kCAA0B,CAAC,EAAE,MAAM,CAAC,IAAC;IAE9C,sEAGE;IACN,4DAAS;IACT,2EAAiC;IAC7B,wDACJ;IAAA,4DAAM;IACN,8EAKC;IADG,kTAAS,kCAA0B,CAAC,EAAE,MAAM,CAAC,IAAC;IAE9C,sEAGE;IACN,4DAAS;IAIrB,2EAA+C;IAEvC,wDACJ;;IAAA,4DAAM;IACN,2EAAqC;IAMzB,kTAAS,iCAAyB,CAAC,EAAE,SAAS,CAAC,IAAC;IAEhD,sEAGE;IACN,4DAAS;IACT,2EAAiC;IAC7B,wDACJ;IAAA,4DAAM;IACN,8EAKC;IADG,kTAAS,gCAAwB,CAAC,EAAE,SAAS,CAAC,IAAC;IAE/C,sEAGE;IACN,4DAAS;IAEb,2EAA+B;IAAA,6DAAC;IAAA,4DAAM;IACtC,2EAAmC;IAK3B,kTAAS,kCAA0B,CAAC,EAAE,QAAQ,CAAC,IAAC;IAEhD,sEAGE;IACN,4DAAS;IACT,2EAAiC;IAC7B,wDACJ;IAAA,4DAAM;IACN,8EAKC;IADG,kTAAS,kCAA0B,CAAC,EAAE,QAAQ,CAAC,IAAC;IAEhD,sEAGE;IACN,4DAAS;;;IAvHkB,0DAAuD;IAAvD,mKAAuD;IACtF,0DACJ;IADI,8JACJ;IAIY,0DAA+D;IAA/D,2LAA+D;IAW/D,0DACJ;IADI,wFACJ;IAEI,0DAAkE;IAAlE,8LAAkE;IAclE,0DAA+D;IAA/D,2LAA+D;IAW/D,0DACJ;IADI,uFACJ;IAEI,0DAAkE;IAAlE,8LAAkE;IAc3C,0DAAkE;IAAlE,qLAAkE;IACjG,0DACJ;IADI,+JACJ;IAIY,0DAAwE;IAAxE,2MAAwE;IAWxE,0DACJ;IADI,0FACJ;IAEI,0DAA2E;IAA3E,8MAA2E;IAc3E,0DAAwE;IAAxE,2MAAwE;IAWxE,0DACJ;IADI,yFACJ;IAEI,0DAA2E;IAA3E,8MAA2E;;;IAkB/E,uEAAkF;IAC9E,uDAEJ;;IAAA,4DAAO;;;IAFH,0DAEJ;IAFI,6NAEJ;;;IALR,0EAA2E;IAEnE,sIAGO;IACX,4DAAO;;;IAJI,0DAAyE;IAAzE,wKAAyE;;;;ADnbjG,MAAM,gCAAiC,SAAQ,uEAAmB;IAsFrE,YAAY,QAAkB;QAC1B,KAAK,CAAC,QAAQ,CAAC,CAAC;QAtFX,aAAQ,GAAG,KAAK,CAAC;QAEjB,cAAS,GAAU,EAAE,CAAC;QACtB,iBAAY,GAAU,EAAE,CAAC;QACzB,cAAS,GAAa,EAAE,CAAC;QAExB,kBAAa,GAAuB,IAAI,uDAAY,EAAQ,CAAC;QAE9D,iBAAY,GAAQ;YACzB,KAAK,EAAE,0BAA0B;YACjC,OAAO,EAAE,aAAa;YACtB,SAAS,EAAE,MAAM;YACjB,SAAS,EAAE,CAAC;YACZ,SAAS,EAAE,CAAC;YACZ,SAAS,EAAE,CAAC;YACZ,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC;YACV,WAAW,EAAE,mBAAmB;YAChC,UAAU,EAAE,KAAK;YACjB,cAAc,EAAE,IAAI;YACpB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,IAAI;SACb,CAAC;QAIO,iBAAY,GAAkB,8DAAY,CAAC;QAC3C,YAAO,GAAG,wFAA0B,CAAC;QACrC,4BAAuB,GAAG,IAAI,CAAC;QAC/B,iBAAY,GAAQ,EAAE,CAAC;QACtB,oBAAe,GAAuB,IAAI,uDAAY,EAAQ,CAAC;QAC/D,UAAK,GAAuB,IAAI,uDAAY,EAAQ,CAAC;QACrD,UAAK,GAAsB,IAAI,uDAAY,EAAO,CAAC;QAEtD,UAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,gBAAW,GAAG,KAAK,CAAC;QACpB,sBAAiB,GAAG,IAAI,CAAC;QACzB,oBAAe,GAAG,IAAI,CAAC;QACvB,oBAAe,GAAG,IAAI,CAAC;QAEvB,YAAO,GAAG,CAAC,CAAC;QAsBZ,eAAU,GAAG,KAAK,CAAC;QAqBlB,aAAQ,GAAG,sEAAQ,CAAC;IAI5B,CAAC;IAED,IAAW,SAAS;QAChB,OAAO,IAAI,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,IAAW,QAAQ;QACf,OAAO,IAAI,CAAC,QAAQ,KAAK,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,KAAK,IAAI,CAAC,OAAO,CAAC;IACxF,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACvC,CAAC;IAED,WAAW,CAAC,OAAsB;QAC9B,sCAAsC;IAC1C,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC7D;IACL,CAAC;IAEM,eAAe;QAClB,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;IAC9B,CAAC;IAEM,eAAe,CAAC,IAAS,EAAE,CAAM,EAAE,GAAQ;QAC9C,OAAO,+GAAoC,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;IAC9D,CAAC;IAEM,eAAe,CAAC,GAAW;QAC9B,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,KAAK,uFAAyB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1E,IACI,CAAC,IAAI,CAAC,OAAO,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YAClC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,cAAc,KAAK,IAAI,CAAC,SAAS,CAAC,MAAM;gBACrD,IAAI,CAAC,OAAO,GAAG,cAAc,IAAI,IAAI,CAAC,QAAQ,CAAC;gBAC/C,GAAG,KAAK,CAAC,CAAC,EAChB;YACE,OAAO;SACV;QACD,IAAI,CAAC,OAAO,IAAI,GAAG,CAAC;IACxB,CAAC;IAEM,iBAAiB,CAAC,KAAW;QAChC,IAAI,CAAC,KAAK,EAAE;YACR,OAAO;SACV;QACD,OAAO,oGAA0B,CAAC,KAAK,CAAC,CAAC;IAC7C,CAAC;IAEM,QAAQ,CAAC,SAAc,EAAE,GAAQ;QACpC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YAChC,OAAO;SACV;QACD,OAAO,wGAA8B,CACjC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,EAC9B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,EAC/B,GAAG,CAAC,QAAQ,EAAE,CACjB,CAAC;IACN,CAAC;IAEM,wBAAwB,CAAC,IAAS,EAAE,KAAU,EAAE,GAAQ,EAAE,GAA0B;QACvF,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACZ,OAAO;SACV;QACD,IAAI,CAAC,GAAG,EAAE;YACN,OAAO;SACV;QACD,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;QAE/C,IAAI,CAAC,WAAW,EAAE;YACd,OAAO;SACV;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,GAAG,KAAK,SAAS,IAAI,OAAO,EAAE;YAC9B,OAAO,WAAW,GAAG,OAAO,CAAC;SAChC;QACD,IAAI,OAAO,EAAE;YACT,OAAO,WAAW,GAAG,OAAO,CAAC;SAChC;IACL,CAAC;IAEM,uBAAuB,CAAC,OAAe,EAAE,MAA2B;QACvE,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,GAAG,EAAE;YACN,GAAG,GAAG,CAAC,CAAC;SACX;QACD,GAAG,GAAG,GAAG,GAAG,OAAO,CAAC;QACpB,IAAI,GAAG,GAAG,CAAC,EAAE;YACT,GAAG,GAAG,EAAE,CAAC;SACZ;QACD,IAAI,GAAG,GAAG,EAAE,EAAE;YACV,GAAG,GAAG,CAAC,CAAC;SACX;QACD,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;QAC1C,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE;YAC9B,IAAI,IAAI,GAAG,KAAK,CAAC;YACjB,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;YAE7C,IAAI,MAAM,KAAK,SAAS,EAAE;gBACtB,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;gBACvC,IAAI,GAAG,IAAI,CAAC;aACf;YAED,IAAI,IAAI,EAAE;gBACN,uBAAuB;gBACvB,IAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aAC1C;SACJ;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SACtB;IACL,CAAC;IAEM,yBAAyB,CAAC,OAAe,EAAE,MAAyB;QACvE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;QACtC,IAAI,CAAC,IAAI,EAAE;YACP,IAAI,GAAG,CAAC,CAAC;SACZ;QACD,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;QACjB,IAAI,OAAO,KAAK,CAAC,EAAE;YACf,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;SACpB;QAED,IAAI,IAAI,GAAG,CAAC,EAAE;YACV,IAAI,GAAG,EAAE,CAAC;SACb;QACD,IAAI,IAAI,IAAI,EAAE,EAAE;YACZ,IAAI,GAAG,CAAC,CAAC;SACZ;QACD,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAE7C,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE;YAC9B,IAAI,IAAI,GAAG,KAAK,CAAC;YACjB,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;YAE7C,IAAI,MAAM,KAAK,QAAQ,EAAE;gBACrB,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;gBACvC,IAAI,GAAG,IAAI,CAAC;aACf;YAED,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aAC1C;SACJ;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SACtB;IACL,CAAC;IAEM,SAAS;QACZ,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,SAAS;YACL,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACvE,CAAC,CAAC,IAAI,CAAC,YAAY;oBACf,CAAC,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzG,IAAI,CAAC,sBAAsB,EAAE;gBAC7B,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC;gBAC3C,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC;gBAC5C,IAAI,CAAC,WAAW,CAAC;QAErB,OAAO,SAAS,CAAC;IACrB,CAAC;IAEM,kBAAkB,CAAC,YAAiB;QACvC,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,KAAK,qFAAuB,EAAE;YACzD,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,YAAY,CAAC;YACtC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,GAAG,YAAY,CAAC;SACnD;QACD,IAAI,YAAY,KAAK,8DAAY,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE;YACjE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;YACtC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,GAAG,KAAK,CAAC;SAC5C;QAED,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACnB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;SACrC;aAAM;YACH,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;SACrC;IACL,CAAC;IAEM,SAAS,CAAC,OAAgB;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QACpF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,EAAE,CAAC;QAEjC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAClC,+BAA+B;QAC/B,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAChC,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3B;QAED,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SACrB;IACL,CAAC;IAEM,UAAU,CAAC,SAAc,EAAE,GAAQ,EAAE,KAAU,EAAE,OAAY;QAChE,IAAI,KAAK,IAAI,CAAC,GAAG,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YACxD,OAAO;SACV;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;QAE9C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjE,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACzG,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACjG,IAAI,IAAI,GAAG,QAAQ,IAAI,IAAI,GAAG,YAAY,EAAE;YACxC,OAAO;SACV;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,QAAQ,GACR,IAAI,CAAC,KAAK,KAAK,SAAS;YACpB,CAAC,CAAC,IAAI,CAAC,KAAK;YACZ,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC/B,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC/B,CAAC,CAAC,IAAI,CAAC;QACf,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAE5D,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC3E,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;aAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACtC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;QACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QAEzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;QAC7D,IAAI,CAAC,OAAO;YACR,IAAI,CAAC,OAAO,KAAK,SAAS;gBACtB,CAAC,CAAC,IAAI,CAAC,OAAO;gBACd,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;oBAC/B,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;oBAC/B,CAAC,CAAC,IAAI,CAAC;QAEf,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC9F,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,IAAI,CAAC,OAAO,EAAE,EAAE;YAC9D,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;YACjC,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,UAAU,EAAE,CAAC;YACnC,MAAM,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;YAChC,IAAI,aAAa,EAAE;gBACf,IAAI,GAAG,IAAI,GAAG,aAAa,CAAC;gBAC5B,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;gBACjB,IAAI,IAAI,KAAK,EAAE,EAAE;oBACb,IAAI,GAAG,CAAC,CAAC;oBACT,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;iBACnB;aACJ;YAED,4CAA4C;YAC5C,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAClG,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1C,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YACpG,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAEjC,IAAI,SAAS,CAAC,OAAO,EAAE,IAAI,WAAW,CAAC,OAAO,EAAE,EAAE;gBAC9C,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAC/D,UAAU,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;aACpE;YACD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,qDAAqD;gBACrD,OAAO;aACV;YACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,OAAO;aACV;YAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;aAC1B;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,sCAAsC;YACtC,0BAA0B;YAC1B,uBAAuB;YACvB,IAAI;YACJ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,OAAO;SACV;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC3E,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,OAAO;aACV;YACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,OAAO;aACV;YACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;gBACxB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;aAC5B;YACD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;YACD,OAAO;SACV;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;YACxC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;oBAC3B,OAAO;iBACV;gBACD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC3B,IAAI,sBAAsB,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,oFAAU,CAAC,CAAC;oBAC5E,IAAI,IAAI,CAAC,UAAU,EAAE;wBACjB,sBAAsB,EAAE,CAAC;qBAC5B;oBACD,IAAI,sBAAsB,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;wBACrD,UAAU,CAAC,GAAG,EAAE;4BACZ,IAAI,CAAC,gBAAgB,EAAE,CAAC;wBAC5B,CAAC,EAAE,IAAI,CAAC,CAAC;wBACT,OAAO;qBACV;iBACJ;gBAED,MAAM,QAAQ,GAAG,IAAI,IAAI,CACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAC3B,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAC1B,CAAC;gBACF,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,oFAAU,CAAC,CAAC;gBACjE,IAAI,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC5C,OAAO;iBACV;gBAED,wEAAwE;gBACxE,IAAI,cAAc,IAAI,CAAC,EAAE;oBACrB,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;oBAC/C,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;oBACzC,IAAI,IAAI,GAAG,QAAQ,GAAG,EAAE,CAAC;oBACzB,IAAI,IAAI,IAAI,EAAE,EAAE;wBACZ,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;wBACjB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;qBAC5B;oBAED,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE;wBAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;qBAC7B;oBAED,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;iBAC/C;gBAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,sCAAsC;gBACtC,0BAA0B;gBAC1B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBACzD,IAAI;gBACJ,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;aACnC;YAED,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC3B,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;aACtC;YAED,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACjD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;YAC3B,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;YAC3B,OAAO;SACV;QAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;YACxB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;SAC5B;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IAEM,WAAW,CAAC,SAAc,EAAE,GAAQ;QACvC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,GAAG,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,OAAO;SACV;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YAC9C,OAAO;SACV;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;QAE9C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAEzG,IAAI,IAAI,GAAG,YAAY,EAAE;YACrB,OAAO,IAAI,CAAC;SACf;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE;YACvC,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC3B,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,oFAAU,CAAC,CAAC;gBACpE,IAAI,IAAI,CAAC,UAAU,EAAE;oBACjB,cAAc,EAAE,CAAC;iBACpB;gBACD,IAAI,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC7C,OAAO;iBACV;aACJ;YACD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;gBACtG,IAAI,OAAO,GAAG,IAAI,EAAE;oBAChB,OAAO;iBACV;aACJ;SACJ;QAED,IAAI,2GAAgC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACzB;QAED,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAC/D,CAAC;IAEM,cAAc,CAAC,QAAa,EAAE,GAAQ;QACzC,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;QAC1D,MAAM,gCAAgC,GAAG,WAAW;YAChD,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC;YACrD,CAAC,CAAC,KAAK,CAAC;QACZ,MAAM,oCAAoC,GAAG,WAAW;YACpD,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC;YACnD,CAAC,CAAC,KAAK,CAAC;QACZ,MAAM,4BAA4B,GAC9B,oCAAoC;YACpC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QAElG,OAAO,gCAAgC,IAAI,4BAA4B,CAAC;IAC5E,CAAC;IAEO,qBAAqB,CAAC,YAAiB,EAAE,IAAS;QACtD,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,IAAI,IAAI,YAAY,KAAK,IAAI,EAAE;YAC1D,OAAO;SACV;QAED,IAAI,IAAI,EAAE;YACN,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC/B;aAAM;YACH,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SACjC;QAED,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACnD,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACzF,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;YAC/C,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;YACnF,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9B,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;YACjE,IAAI,cAAc,IAAI,CAAC,EAAE;gBACrB,MAAM,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;gBACtE,IAAI,CAAC,WAAW,GAAG,iBAAiB,GAAG,EAAE,CAAC;aAC7C;SACJ;QAED,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC3E,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,EAAE,YAAY,CAAC,QAAQ,EAAE,EAAE,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC;QAEhG,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC;QACvC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QAEpC,IAAI,EAAE,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,6BAA6B;QAC1D,oBAAoB;QACpB,MAAM,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;QACpB,IAAI,GAAG,EAAE;YACL,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;SACtB;QACD,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAExB,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,OAAO,EAAE,EAAE;YAC7B,OAAO;SACV;QAED,IAAI,IAAI,EAAE;YACN,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACxC;aAAM;YACH,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtC;QAED,oBAAoB;QACpB,IACI,QAAQ,CAAC,QAAQ,EAAE,IAAI,YAAY,CAAC,QAAQ,EAAE;YAC9C,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,KAAK,YAAY,CAAC,QAAQ,EAAE,IAAI,QAAQ,CAAC,UAAU,EAAE,GAAG,YAAY,CAAC,UAAU,EAAE,CAAC,EAC5G;YACE,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;SACJ;QAED,oBAAoB;QACpB,IAAI,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,IAAI,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;YAC3D,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;aAChC;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;aAC9B;SACJ;QAED,sBAAsB;QACtB,IAAI,QAAQ,CAAC,QAAQ,EAAE,KAAK,YAAY,CAAC,QAAQ,EAAE,IAAI,QAAQ,CAAC,UAAU,EAAE,IAAI,YAAY,CAAC,UAAU,EAAE,EAAE;YACvG,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;SACJ;QAED,oBAAoB;QACpB,IACI,QAAQ,CAAC,QAAQ,EAAE,KAAK,YAAY,CAAC,QAAQ,EAAE;YAC/C,QAAQ,CAAC,UAAU,EAAE,GAAG,CAAC;YACzB,YAAY,CAAC,UAAU,EAAE,KAAK,EAAE,EAClC;YACE,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;aAChC;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;aAC9B;SACJ;IACL,CAAC;IAEO,gBAAgB,CAAC,UAAe;QACpC,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,OAAO,KAAK,SAAS,EAAE;YACjD,OAAO;SACV;QACD,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC;QAC/B,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACvC,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ,CAAC;IAED,8FAA8F;IACtF,YAAY,CAAC,IAAS,EAAE,MAAW,EAAE,MAAgB;QACzD,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,KAAK,qFAAuB,EAAE;YACzD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,+BAA+B;YAC9D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,iEAAe,CAAC;SAC5F;aAAM;YACH,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,CAAC,+BAA+B;YAC/D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC;SAC5C;QACD,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE;gBAC3B,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;oBAC1B,QAAQ,GAAG,EAAE;wBACT,KAAK,UAAU;4BACX,gDAAgD;4BAChD,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE;gCACnC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;6BAC9D;4BACD,MAAM;wBACV,KAAK,QAAQ;4BACT,gDAAgD;4BAChD,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE;gCACjC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;6BAC5D;4BACD,MAAM;qBACb;iBACJ;aACJ;SACJ;QACD,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,MAAM,EAAE;YACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,iEAAe,CAAC,CAAC,CAAC,8DAAY,CAAC;SAClF;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC,8DAAY,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC;QACrF,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,0GAA+B,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QACnG,gFAAgF;QAChF,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvC,CAAC;IAEO,sBAAsB;QAC1B,IAAI,QAAQ,CAAC;QACb,IAAI,MAAM,CAAC;QAEX,IAAI,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YACjD,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;SAChD;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;QACD,IAAI,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YAC/C,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;SAC5C;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;QAED,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QACtE,IAAI,MAAM,EAAE;YACR,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;SAC1E;QAED,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACrD,OAAO,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;SAC9E;QACD,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,MAAM,EAAE;YACpD,OAAO,CACH,QAAQ,CAAC,OAAO,EAAE,IAAI,MAAM,CAAC,OAAO,EAAE;gBACtC,CAAC,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CACxE,CAAC;SACL;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;IACL,CAAC;IAEO,qBAAqB,CAAC,OAAgB;QAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACtC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE;YAChC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAS,EAAE,EAAE;gBAClC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;oBACpB,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;gBACxB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEO,sBAAsB,CAAC,OAAY;QACvC,IAAI,IAAI,CAAC,eAAe,KAAK,8DAAY,EAAE;YACvC,OAAO;SACV;QACD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC5B,OAAO;SACV;QACD,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;YACpC,OAAO;SACV;QAED,IAAI,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,YAAY,GAAG,YAAY,GAAG,CAAC,CAAC;SACnC;QACD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACnD,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,GAAG,YAAY,CAAC;QAClD,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAClD,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAO,EAAE,EAAE;gBAC5C,EAAE,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;oBACpB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;wBACX,OAAO;qBACV;oBAED,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC9E,IAAI,CAAC,GAAG,YAAY,EAAE;wBAClB,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC;wBACnB,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;4BACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAChD;qBACJ;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEO,OAAO,CAAC,QAAkB;QAC9B,MAAM,GAAG,GAAQ,EAAE,CAAC;QAEpB,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;YACrE,OAAO;SACV;QACD,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,YAAY,IAAI,CAAC,EAAE;YACjD,OAAO;SACV;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAC1G,IAAI,MAAM,CAAC;QACX,IAAI,OAAO,IAAI,OAAO,GAAG,QAAQ,EAAE;YAC/B,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,QAAQ,EAAE;YAC/B,OAAO;SACV;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,YAAY,IAAI,EAAE;YAChD,GAAG,CAAC,QAAQ,GAAG,oGAA0B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzD,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC;SACzB;QACD,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,YAAY,IAAI,EAAE;YAC5C,GAAG,CAAC,MAAM,GAAG,oGAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrD,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;SAC/F;aAAM;YACH,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;aACjD;iBAAM;gBACH,GAAG,CAAC,MAAM,GAAG,OAAO,CAAC;aACxB;SACJ;aAAM;YACH,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;SAC/C;aAAM;YACH,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;SAC1B;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE;YACxB,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;SAChC;QACD,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE7B,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAC9B,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;SACvE;aAAM;YACH,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;YAC9C,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;gBAC5B,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC,cAAc,GAAG,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC;aAClE;SACJ;QAED,IAAI,IAAI,CAAC,uBAAuB,IAAI,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,KAAK,CAAC,EAAE;YAC7F,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC;YACxE,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,GAAG,GAAG,GAAG,SAAS,GAAG,IAAI,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;YAC1F,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC;SACzB;QAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,EAAE;YACX,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE;gBAChE,EAAE,EAAE,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ;aAC5C,CAAC,CAAC;SACN;IACL,CAAC;IAEO,2BAA2B;QAC/B,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CACpD,CAAC,qFAAsB,EAAE,4FAA6B,CAAC,EACvD,IAAI,CAAC,eAAe,CACvB,CAAC;SACL;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAClF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QACpF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;QAE7C,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,sCAAsC;QAEtF,IAAI,SAAS,CAAC;QACd,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,QAAQ,GAAG,4EAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC5D;aAAM;YACH,IAAI,CAAC,QAAQ,GAAG;gBACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,YAAY,EAAE,IAAI,CAAC,YAAY;aAClC,CAAC;SACL;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;QACvD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAExD,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC;SACjC;aAAM;YACH,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC7B;QACD,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,SAAS,CAAC,MAAM,EAAE;YACpC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YACxB,SAAS,CAAC,MAAM,GAAG,EAAE,CAAC;SACzB;QACD,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,KAAK,EAAE,EAAE;gBAC1D,OAAO;aACV;YACD,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;YACjG,IAAI,QAAQ,EAAE;gBACV,QAAQ,CAAC,cAAc,EAAE,CAAC;aAC7B;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,eAAe,CAAC,IAAS;QAC7B,QAAQ,IAAI,EAAE;YACV,KAAK,4FAA6B,EAAE,2BAA2B;gBAC3D,IAAI,CAAC,2BAA2B,EAAE,CAAC;gBACnC,MAAM;YACV;gBACI,OAAO,CAAC,GAAG,CAAC,sCAAsC,GAAG,IAAI,CAAC,CAAC;SAClE;IACL,CAAC;IAEO,SAAS;QACb,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;QACrD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO;YACvB,CAAC,CAAC,IAAI,CAAC,OAAO;YACd,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,MAAM,UAAU,GACZ,yGAA8B,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC;YAChD,CAAC,CAAC,yGAA8B,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC;YACtD,CAAC,CAAC,CAAC,CAAC;QACZ;mFAC2E;QAE3E,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;QAExE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;YACjC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,MAAM,QAAQ,GAAG,+GAAoC,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;YAC/F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAChB,GAAG,EAAE,CAAC;gBACN,QAAQ;gBACR,KAAK,EAAE,QAAQ,CAAC,WAAW;gBAC3B,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,KAAK,CAAC;gBACjE,IAAI,EAAE,QAAQ,CAAC,IAAI;gBACnB,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,WAAW,CAAC;aAC7F,CAAC,CAAC;SACN;IACL,CAAC;IAEO,WAAW,CAAC,OAAY;QAC5B,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,QAAQ;QAC3D,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,OAAO,CAAC,QAAQ,EAAE;YAClB,MAAM,QAAQ,GAAG,iGAAuB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC3D,IAAI,QAAQ,EAAE;gBACV,IAAI,OAAO,CAAC,QAAQ,EAAE;oBAClB,MAAM,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACxC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;iBACtB;qBAAM;oBACH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;oBAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;iBACpB;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAO,EAAE,EAAE;wBAC5C,EAAE,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;4BACpB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;gCACX,OAAO;6BACV;4BACD,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;4BAC9E,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC,OAAO,EAAE,EAAE;gCACpC,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;6BACpC;wBACL,CAAC,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;gBACD,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;oBAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;iBACvB;aACJ;YACD,IAAI,MAAM,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,MAAM,EAAE;gBAClE,MAAM,GAAG,iGAAuB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aACpD;YACD,IAAI,MAAM,EAAE;gBACR,IAAI,OAAO,CAAC,MAAM,EAAE;oBAChB,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACtC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;iBACxB;qBAAM;oBACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;oBACpF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;iBACtB;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;gBAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAClB,MAAM,CAAC,WAAW,EAAE,EACpB,MAAM,CAAC,QAAQ,EAAE,EACjB,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAC5C,CAAC;gBAEF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;aAClD;YAED,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC7F,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;SACJ;IACL,CAAC;IAEO,kBAAkB;QACtB,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACnE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SAC1D;QAED,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;YAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;SAClD;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YAC1C,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,OAAO;SACV;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACpC,CAAC;IAEO,QAAQ,CAAC,QAAc,EAAE,MAAY,EAAE,QAAkB;QAC7D,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAc,CAAC;QAC9C,MAAM,KAAK,GAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAChD,MAAM,GAAG,GAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;QAC5C,IAAI,QAAQ,KAAK,GAAG,EAAE;YAClB,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACtC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC3C;QACD,MAAM,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;QAEzB,6EAA6E;QAC7E,wBAAwB;QACxB,IAAI,QAAQ,KAAK,GAAG,IAAI,IAAI,GAAG,uFAAa,EAAE;YAC1C,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAClD;QACD,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,qFAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;IACpD,CAAC;IAEO,gBAAgB,CAAC,QAAc,EAAE,MAAY,EAAE,gBAAsB;QACzE,IAAI,gBAAgB,IAAI,IAAI,CAAC,MAAM,EAAE;YACjC,OAAO;SACV;QAED,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE;YACtB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,OAAO;SACV;QAED,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;QACjE,IAAI,IAAI,CAAC,OAAO,KAAK,sFAAwB,IAAI,IAAI,CAAC,OAAO,KAAK,wFAA0B,EAAE;YAC1F,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;YAC7D,mEAAmE;YACnE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;YACjD,OAAO;SACV;QACD,IAAI,cAAc,IAAI,CAAC,EAAE;YACrB,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;YACjC,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;gBAC1C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,mDAAmD;aAC5E;SACJ;IACL,CAAC;;gHAlpCQ,gCAAgC;8HAAhC,gCAAgC;QCzB7C,yEAOC;QAEO,4HAYM;QACN,8HAmHM;;QAEN,yEAAoD;QAChD,6HAqBM;QAIN,oEAA2C;QAC3C,4HAAsE;QAEtE,yEAAiD;QAKzC,wDAIJ;;QAAA,4DAAM;QACN,2EAAkB;QAON,yJAAS,6BAAyB,CAAC,EAAE,OAAO,CAAC,IAAC;QAE9C,sEAGE;QACN,4DAAS;QAET,2EAA8D;QAC1D,wDACJ;QAAA,4DAAM;QAEN,8EAMC;QADG,yJAAS,4BAAwB,CAAC,EAAE,OAAO,CAAC,IAAC;QAE7C,sEAGE;QACN,4DAAS;QAGb,2EAA+B;QAAA,6DAAC;QAAA,4DAAM;QAEtC,2EAAmC;QAM3B,yJAAS,8BAA0B,CAAC,EAAE,MAAM,CAAC,IAAC;QAE9C,sEAGE;QACN,4DAAS;QAET,2EAA8D;QAC1D,wDACJ;QAAA,4DAAM;QAEN,8EAMC;QADG,yJAAS,8BAA0B,CAAC,EAAE,MAAM,CAAC,IAAC;QAE9C,sEAGE;QACN,4DAAS;QAKrB,iIA8EM;QACV,4DAAM;QAGV,2EAA+G;QAC3G,iIA6HM;QACN,2EAAuE;QAE/D,+HAOM;QACV,4DAAM;QACN,2EAAgD;QAMpC,yJAAS,cAAU,KAAK,CAAC,IAAC;QAG1B,wDACJ;;QAAA,4DAAS;QAEb,uEAAK;QAIG,yJAAS,qBAAiB,IAAC;QAO3B,wDACJ;;QAAA,4DAAS;;QAxezB,oNAGE;QAMO,0DAAmC;QAAnC,uGAAmC;QAgB5C,0DAG6B;QAH7B,0SAG6B;QA6GyB,0DAAuB;QAAvB,uFAAuB;QA0B/D,0DAAwB;QAAxB,wFAAwB;QAKtB,0DAAuD;QAAvD,gKAAuD;QAEvD,0DAIJ;QAJI,wOAIJ;QAIY,0DAA+D;QAA/D,qLAA+D;QAa/D,0DACJ;QADI,qFACJ;QAGI,0DAAkE;QAAlE,wLAAkE;QAiBlE,0DAA+D;QAA/D,qLAA+D;QAa/D,0DACJ;QADI,oFACJ;QAGI,0DAAkE;QAAlE,wLAAkE;QAe5E,0DAAc;QAAd,8EAAc;QAkF4C,0DAAsC;QAAtC,uGAAsC;QACjD,0DAAsB;QAAtB,sFAAsB;QA8HzC,0DAAgC;QAAhC,iGAAgC;QAET,0DAAoB;QAApB,oFAAoB;QAgBjE,0DAAoF;QAApF,qNAAoF;QAEpF,0DACJ;QADI,8JACJ;QAOI,0DAGE;QAHF,yPAGE;QAGF,0DACJ;QADI,6JACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3egG;AACxE;AACgB;AAKG;AACwB;AAC9B;AAG4B;AACT;AACT;;;;;;;;;;;;;ICXvD,2EAAwE;IACpE,wDACJ;IAAA,6DAAM;;;IADF,2DACJ;IADI,wFACJ;;;IAHJ,2EAAqD;IACjD,qIAEM;IACV,6DAAM;;;IAHwB,2DAAY;IAAZ,sFAAY;;;IAwClC,sEAAsE;;;IAUtE,sEAAuE;;;IAuBvE,2EAA6F;IACzF,wDACJ;IAAA,6DAAM;;;IADF,2DACJ;IADI,yFACJ;;;IAHJ,2EAA8C;IAC1C,4IAEM;IACV,6DAAM;;;IAHwB,2DAAY;IAAZ,uFAAY;;;;;;IAO9B,8EAsCC;IAjCG,6dAAa,kDAAmC,IAAC,ieAEZ,kDACrD,KAAK,kBAAc,SAAkC,mCAE/D,IAL2E;IAkCjD,2EAMC;IAEO,wDACJ;IAAA,6DAAM;;;;;;;;;;;IAtCV,ssCA2BE;IAIE,2DAGE;IAHF,wNAGE;IAGE,2DACJ;IADI,mHACJ;;;IAjDZ,sEAA4F;IACxF,0IAkDK;IACT,6DAAK;;;IAhDmB,2DAAiB;IAAjB,sFAAiB;;;;;;;IAzErD,2EAaC;IAKe,oTAAS,yBAAiB,CAAC,CAAC,IAAC;IAI7B,sEAIE;IACN,6DAAS;IAGb,qIAAsE;IAEtE,2EAIC;IACG,wDACJ;IAAA,6DAAM;IAEN,qIAAuE;IAEvE,2EAA8C;IAGtC,qTAAS,wBAAgB,CAAC,CAAC,IAAC;IAM5B,uEAOE;IACN,6DAAS;IAGjB,uIAIM;IACN,wEAAK;IAEG,qIAoDK;IACT,6DAAQ;;;;;;IAvHZ,gHAAyC;IACzC,wLAAsE;IAWvC,2DAAiB;IAAjB,8EAAiB;IAIpC,2DAAuD;IAAvD,mKAAuD;IAKnD,2DAA8D;IAA9D,mKAA8D;IAMpE,2DAAY;IAAZ,4EAAY;IAKd,2DAA0D;IAA1D,sHAA0D;IAE1D,2DACJ;IADI,wHACJ;IAEM,2DAAa;IAAb,6EAAa;IAEQ,2DAAkB;IAAlB,+EAAkB;IAIrC,2DAEE;IAFF,qOAEE;IAKE,2DAGE;IAHF,sOAGE;IAMZ,2DAAe;IAAf,mFAAe;IAOgB,2DAAuB;IAAvB,2FAAuB;;;IAkExD,wEAAuB;IACnB,wDACJ;IAAA,6DAAO;;;IADH,2DACJ;IADI,gGACJ;;;;;IAqBI,8EAOC;IAFG,wTAAS,kBAAU,KAAK,CAAC,IAAC;IAG1B,wDACJ;;IAAA,6DAAS;;;IAHL,iOAAoF;IAEpF,2DACJ;IADI,8JACJ;;;;AD9Jb,MAAM,iCAAiC;IA4F1C,YACY,iBAAoC,EACpC,YAA0B,EAC1B,gBAAkC,EACnC,eAAgC,EAC/B,eAAgC,EAChC,YAA0B,EAC1B,aAA4B,EAC5B,QAAoB;QAPpB,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,iBAAY,GAAZ,YAAY,CAAc;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAkB;QACnC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,oBAAe,GAAf,eAAe,CAAiB;QAChC,iBAAY,GAAZ,YAAY,CAAc;QAC1B,kBAAa,GAAb,aAAa,CAAe;QAC5B,aAAQ,GAAR,QAAQ,CAAY;QAnGvB,aAAQ,GAAG,KAAK,CAAC;QACjB,cAAS,GAAU,EAAE,CAAC;QACtB,iBAAY,GAAU,EAAE,CAAC;QACzB,cAAS,GAAa,EAAE,CAAC;QACzB,qBAAgB,GAA+B,qGAAuC,CAAC;QACtF,kBAAa,GAAuB,IAAI,wDAAY,EAAQ,CAAC;QAE9D,iBAAY,GAAQ;YACzB,KAAK,EAAE,0BAA0B;YACjC,OAAO,EAAE,SAAS;YAClB,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,CAAC;YACZ,SAAS,EAAE,CAAC;YACZ,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC;YACV,WAAW,EAAE,mBAAmB;YAChC,UAAU,EAAE,IAAI;YAChB,cAAc,EAAE,IAAI;YACpB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,KAAK;SACd,CAAC;QAIO,iBAAY,GAAkB,8DAAY,CAAC;QAC3C,YAAO,GAAG,oFAAsB,CAAC;QACjC,iBAAY,GAAQ,EAAE,CAAC;QACvB,4BAAuB,GAAG,IAAI,CAAC;QAE9B,oBAAe,GAAuB,IAAI,wDAAY,EAAQ,CAAC;QAC/D,UAAK,GAAuB,IAAI,wDAAY,EAAQ,CAAC;QACrD,UAAK,GAAsB,IAAI,wDAAY,EAAO,CAAC;QAEtD,aAAQ,GAAG,sEAAQ,CAAC;QACpB,UAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,gBAAW,GAAG,KAAK,CAAC;QACpB,oBAAe,GAAG,IAAI,CAAC;QACvB,oBAAe,GAAG,IAAI,CAAC;QAEvB,YAAO,GAAG,CAAC,CAAC;QAmBZ,eAAU,GAAG,KAAK,CAAC;QA2CtB;6EACqE;IACzE,CAAC;IAED,IAAW,SAAS;QAChB,OAAO,IAAI,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,IAAW,QAAQ;QACf,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC;IACjF,CAAC;IAED,IAAW,YAAY;QACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAEnB,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC9B,IAAI,OAAO,EAAE;YACT,OAAO,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAC1C,OAAO,CAAC,QAAQ,EAChB,OAAO,CAAC,MAAM,EACd,OAAO,CAAC,UAAU,EAClB,IAAI,CAAC,YAAY,EACjB,OAAO,CAAC,QAAQ,EAChB,OAAO,CAAC,MAAM,EACd,IAAI,CAAC,QAAQ,CAChB,CAAC;SACL;QAED,OAAO,EAAE,CAAC;IACd,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACvC,CAAC;IAED,WAAW,CAAC,OAAsB;QAC9B,sCAAsC;IAC1C,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC7D;IACL,CAAC;IAEM,eAAe;QAClB,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACrC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;SAC1D;aAAM;YACH,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;SAC7B;IACL,CAAC;IAEM,eAAe,CAAC,IAAS,EAAE,CAAM,EAAE,GAAQ;QAC9C,OAAO,+GAAoC,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;IAC9D,CAAC;IAEM,eAAe,CAAC,GAAW;QAC9B,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,KAAK,uFAAyB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1E,IACI,CAAC,IAAI,CAAC,OAAO,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YAClC,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,cAAc,KAAK,IAAI,CAAC,SAAS,CAAC,MAAM;gBACrD,IAAI,CAAC,OAAO,GAAG,cAAc,IAAI,IAAI,CAAC,QAAQ,CAAC;gBAC/C,GAAG,KAAK,CAAC,CAAC,EAChB;YACE,OAAO;SACV;QACD,IAAI,CAAC,OAAO,IAAI,GAAG,CAAC;IACxB,CAAC;IAEM,iBAAiB,CAAC,KAAW;QAChC,IAAI,CAAC,KAAK,EAAE;YACR,OAAO;SACV;QACD,OAAO,oGAA0B,CAAC,KAAK,CAAC,CAAC;IAC7C,CAAC;IAEM,QAAQ,CAAC,SAAc,EAAE,GAAQ;QACpC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YAChC,OAAO;SACV;QACD,OAAO,wGAA8B,CACjC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,EAC9B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,EAC/B,GAAG,CAAC,QAAQ,EAAE,CACjB,CAAC;IACN,CAAC;IAEM,wBAAwB,CAAC,IAAS,EAAE,KAAU,EAAE,GAAQ,EAAE,GAA0B;QACvF,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACZ,OAAO;SACV;QACD,IAAI,CAAC,GAAG,EAAE;YACN,OAAO;SACV;QACD,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;QAE/C,IAAI,CAAC,WAAW,EAAE;YACd,OAAO;SACV;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,GAAG,KAAK,SAAS,IAAI,OAAO,EAAE;YAC9B,OAAO,WAAW,GAAG,OAAO,CAAC;SAChC;QACD,IAAI,OAAO,EAAE;YACT,OAAO,WAAW,GAAG,OAAO,CAAC;SAChC;IACL,CAAC;IAEM,SAAS;QACZ,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,SAAS;YACL,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACvE,CAAC,CAAC,IAAI,CAAC,YAAY;oBACf,CAAC,CAAC,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzG,IAAI,CAAC,sBAAsB,EAAE;gBAC7B,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC;gBAC3C,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC;gBAC5C,IAAI,CAAC,WAAW,CAAC;QAErB,OAAO,SAAS,CAAC;IACrB,CAAC;IAEM,SAAS,CAAC,OAAgB;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QACpF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,EAAE,CAAC;QAEjC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAClC,+BAA+B;QAC/B,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAChC,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3B;QAED,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SACrB;IACL,CAAC;IAEM,UAAU,CAAC,SAAc,EAAE,GAAQ,EAAE,KAAU,EAAE,OAAY;QAChE,IAAI,KAAK,IAAI,CAAC,GAAG,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YACxD,OAAO;SACV;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;QAE9C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjE,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACzG,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACjG,IAAI,IAAI,GAAG,QAAQ,IAAI,IAAI,GAAG,YAAY,EAAE;YACxC,OAAO;SACV;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,QAAQ,GACR,IAAI,CAAC,KAAK,KAAK,SAAS;YACpB,CAAC,CAAC,IAAI,CAAC,KAAK;YACZ,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC/B,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC/B,CAAC,CAAC,IAAI,CAAC;QACf,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAE5D,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC3E,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;aAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACtC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;QACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QAEzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;QAC7D,IAAI,CAAC,OAAO;YACR,IAAI,CAAC,OAAO,KAAK,SAAS;gBACtB,CAAC,CAAC,IAAI,CAAC,OAAO;gBACd,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;oBAC/B,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW;oBAC/B,CAAC,CAAC,IAAI,CAAC;QAEf,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC9F,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,IAAI,CAAC,OAAO,EAAE,EAAE;YAC9D,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;YACjC,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,UAAU,EAAE,CAAC;YACnC,MAAM,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;YAChC,IAAI,aAAa,EAAE;gBACf,IAAI,GAAG,IAAI,GAAG,aAAa,CAAC;gBAC5B,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;gBACjB,IAAI,IAAI,KAAK,EAAE,EAAE;oBACb,IAAI,GAAG,CAAC,CAAC;oBACT,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;iBACnB;aACJ;YAED,4CAA4C;YAC5C,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAClG,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1C,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YACpG,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAEjC,IAAI,SAAS,CAAC,OAAO,EAAE,IAAI,WAAW,CAAC,OAAO,EAAE,EAAE;gBAC9C,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAC/D,UAAU,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;aACpE;YACD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,qDAAqD;gBACrD,OAAO;aACV;YACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,OAAO;aACV;YAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;aAC1B;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,sCAAsC;YACtC,0BAA0B;YAC1B,uBAAuB;YACvB,IAAI;YACJ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,OAAO;SACV;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC3E,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,OAAO;aACV;YACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;gBAC3B,OAAO;aACV;YACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;gBACxB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;aAC5B;YACD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;YACD,OAAO;SACV;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;YACxC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;oBAC3B,OAAO;iBACV;gBACD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC3B,IAAI,sBAAsB,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,oFAAU,CAAC,CAAC;oBAC5E,IAAI,IAAI,CAAC,UAAU,EAAE;wBACjB,sBAAsB,EAAE,CAAC;qBAC5B;oBACD,IAAI,sBAAsB,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;wBACrD,UAAU,CAAC,GAAG,EAAE;4BACZ,IAAI,CAAC,gBAAgB,EAAE,CAAC;wBAC5B,CAAC,EAAE,IAAI,CAAC,CAAC;wBACT,OAAO;qBACV;iBACJ;gBAED,MAAM,QAAQ,GAAG,IAAI,IAAI,CACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAC3B,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAC1B,CAAC;gBACF,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,oFAAU,CAAC,CAAC;gBACjE,IAAI,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC5C,OAAO;iBACV;gBAED,wEAAwE;gBACxE,IAAI,cAAc,IAAI,CAAC,EAAE;oBACrB,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;oBAC/C,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;oBACzC,IAAI,IAAI,GAAG,QAAQ,GAAG,EAAE,CAAC;oBACzB,IAAI,IAAI,IAAI,EAAE,EAAE;wBACZ,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;wBACjB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;qBAC5B;oBAED,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE;wBAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;qBAC7B;oBAED,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;iBAC/C;gBAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,sCAAsC;gBACtC,0BAA0B;gBAC1B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;gBACzD,IAAI;gBACJ,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;aACnC;YAED,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC3B,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;aACtC;YAED,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACjD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;YAC3B,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,IAAI,EAAE;YAC3B,OAAO;SACV;QAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YACrD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;YACxB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;SAC5B;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC5D,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IAEM,qBAAqB,CAAC,EAAe;QACxC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACtC,OAAO;SACV;QAED,qBAAqB,CAAC,GAAG,EAAE;YACvB,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,EAAE,EAAE,wBAAwB,EAAE;gBACjE,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;aAC5C,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,WAAW,CAAC,SAAc,EAAE,GAAQ;QACvC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,GAAG,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,OAAO;SACV;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YAC9C,OAAO;SACV;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;QAE9C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAEzG,IAAI,IAAI,GAAG,YAAY,EAAE;YACrB,OAAO,IAAI,CAAC;SACf;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE;YACvC,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC3B,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,oFAAU,CAAC,CAAC;gBACpE,IAAI,IAAI,CAAC,UAAU,EAAE;oBACjB,cAAc,EAAE,CAAC;iBACpB;gBACD,IAAI,cAAc,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC7C,OAAO;iBACV;aACJ;YACD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;gBACtG,IAAI,OAAO,GAAG,IAAI,EAAE;oBAChB,OAAO;iBACV;aACJ;SACJ;QAED,IAAI,2GAAgC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACzB;QAED,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAC/D,CAAC;IAEM,cAAc,CAAC,QAAa,EAAE,GAAQ;QACzC,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;QAC1D,MAAM,gCAAgC,GAAG,WAAW;YAChD,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC;YACrD,CAAC,CAAC,KAAK,CAAC;QACZ,MAAM,oCAAoC,GAAG,WAAW;YACpD,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC;YACnD,CAAC,CAAC,KAAK,CAAC;QACZ,MAAM,4BAA4B,GAC9B,oCAAoC;YACpC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QAElG,OAAO,gCAAgC,IAAI,4BAA4B,CAAC;IAC5E,CAAC;IAEO,qBAAqB,CAAC,YAAiB,EAAE,IAAS;QACtD,OAAO,CAAC,GAAG,CAAC,YAAY,KAAK,IAAI,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,IAAI,IAAI,YAAY,KAAK,IAAI,EAAE;YAC1D,OAAO;SACV;QAED,IAAI,IAAI,EAAE;YACN,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC/B;aAAM;YACH,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SACjC;QAED,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACnD,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACzF,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;YAC/C,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;YACnF,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9B,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;YACjE,IAAI,cAAc,IAAI,CAAC,EAAE;gBACrB,MAAM,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;gBACpE,IAAI,CAAC,WAAW,GAAG,iBAAiB,GAAG,EAAE,CAAC;aAC7C;SACJ;QAED,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC3E,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,EAAE,YAAY,CAAC,QAAQ,EAAE,EAAE,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC;QAEhG,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC;QACvC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QAEpC,IAAI,EAAE,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,6BAA6B;QAC1D,oBAAoB;QACpB,MAAM,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;QACpB,IAAI,GAAG,EAAE;YACL,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;SACtB;QACD,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAExB,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,OAAO,EAAE,EAAE;YAC7B,OAAO;SACV;QAED,IAAI,IAAI,EAAE;YACN,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACxC;aAAM;YACH,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtC;QAED,oBAAoB;QACpB,IACI,QAAQ,CAAC,QAAQ,EAAE,IAAI,YAAY,CAAC,QAAQ,EAAE;YAC9C,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,KAAK,YAAY,CAAC,QAAQ,EAAE,IAAI,QAAQ,CAAC,UAAU,EAAE,GAAG,YAAY,CAAC,UAAU,EAAE,CAAC,EAC5G;YACE,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;SACJ;QAED,oBAAoB;QACpB,IAAI,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,IAAI,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;YAC3D,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;aAChC;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;aAC9B;SACJ;QAED,sBAAsB;QACtB,IAAI,QAAQ,CAAC,QAAQ,EAAE,KAAK,YAAY,CAAC,QAAQ,EAAE,IAAI,QAAQ,CAAC,UAAU,EAAE,IAAI,YAAY,CAAC,UAAU,EAAE,EAAE;YACvG,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;SACJ;QAED,oBAAoB;QACpB,IACI,QAAQ,CAAC,QAAQ,EAAE,KAAK,YAAY,CAAC,QAAQ,EAAE;YAC/C,QAAQ,CAAC,UAAU,EAAE,GAAG,CAAC;YACzB,YAAY,CAAC,UAAU,EAAE,KAAK,EAAE,EAClC;YACE,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;aAChC;YACD,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;aAC9B;SACJ;IACL,CAAC;IAEO,gBAAgB,CAAC,UAAe;QACpC,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,OAAO,KAAK,SAAS,EAAE;YACjD,OAAO;SACV;QACD,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC;QAC/B,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACvC,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ,CAAC;IAED,8FAA8F;IACtF,YAAY,CAAC,IAAS,EAAE,MAAW,EAAE,MAAgB;QACzD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC;QAEzC,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE;gBAC3B,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;oBAC1B,QAAQ,GAAG,EAAE;wBACT,KAAK,UAAU;4BACX,gDAAgD;4BAChD,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE;gCACnC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;6BAC9D;4BACD,MAAM;wBACV,KAAK,QAAQ;4BACT,gDAAgD;4BAChD,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE;gCACjC,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;6BAC5D;4BACD,MAAM;qBACb;iBACJ;aACJ;SACJ;QACD,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,MAAM,EAAE;YACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,iEAAe,CAAC,CAAC,CAAC,8DAAY,CAAC;SAClF;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC,8DAAY,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC;QACrF,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,0GAA+B,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QACnG,gFAAgF;QAChF,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvC,CAAC;IAEO,sBAAsB;QAC1B,IAAI,QAAQ,CAAC;QACb,IAAI,MAAM,CAAC;QAEX,IAAI,2GAAgC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YACjD,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;SAChD;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;QACD,IAAI,2GAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YAC/C,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;SAC5C;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;QAED,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QACtE,IAAI,MAAM,EAAE;YACR,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;SAC1E;QAED,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACrD,OAAO,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;SAC9E;QACD,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,MAAM,EAAE;YACpD,OAAO,CACH,QAAQ,CAAC,OAAO,EAAE,IAAI,MAAM,CAAC,OAAO,EAAE;gBACtC,CAAC,IAAI,CAAC,WAAW,IAAI,QAAQ,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CACxE,CAAC;SACL;aAAM;YACH,OAAO,KAAK,CAAC;SAChB;IACL,CAAC;IAEO,qBAAqB,CAAC,OAAgB;QAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACtC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE;YAChC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAS,EAAE,EAAE;gBAClC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;oBACpB,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;gBACxB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEO,sBAAsB,CAAC,OAAY;QACvC,gDAAgD;QAChD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC5B,OAAO;SACV;QACD,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;YACpC,OAAO;SACV;QAED,IAAI,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,YAAY,GAAG,YAAY,GAAG,CAAC,CAAC;SACnC;QACD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACnD,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,GAAG,YAAY,CAAC;QAClD,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAClD,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAO,EAAE,EAAE;gBAC5C,EAAE,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;oBACpB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;wBACX,OAAO;qBACV;oBAED,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC9E,IAAI,CAAC,GAAG,YAAY,EAAE;wBAClB,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC;wBACnB,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;4BACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAChD;qBACJ;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEO,OAAO,CAAC,QAAkB;QAC9B,MAAM,GAAG,GAAQ,EAAE,CAAC;QAEpB,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;YACrE,OAAO;SACV;QACD,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,YAAY,IAAI,CAAC,EAAE;YACjD,OAAO;SACV;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;SACnG;QAED,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAC1G,IAAI,MAAM,CAAC;QACX,IAAI,OAAO,IAAI,OAAO,GAAG,QAAQ,EAAE;YAC/B,OAAO;SACV;QACD,IAAI,OAAO,IAAI,OAAO,GAAG,QAAQ,EAAE;YAC/B,OAAO;SACV;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,YAAY,IAAI,EAAE;YAChD,GAAG,CAAC,QAAQ,GAAG,oGAA0B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzD,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC;SACzB;QACD,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,YAAY,IAAI,EAAE;YAC5C,GAAG,CAAC,MAAM,GAAG,oGAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrD,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;SAC/F;aAAM;YACH,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;aACjD;iBAAM;gBACH,GAAG,CAAC,MAAM,GAAG,OAAO,CAAC;aACxB;SACJ;aAAM;YACH,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;SAC/C;aAAM;YACH,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC;SAC1B;QAED,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE7B,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAC9B,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;SACvE;aAAM;YACH,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;YAC9C,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;gBAC5B,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC,cAAc,GAAG,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC;aAClE;SACJ;QAED,IAAI,IAAI,CAAC,uBAAuB,IAAI,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,KAAK,CAAC,EAAE;YAC7F,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC;YACxE,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,GAAG,GAAG,GAAG,SAAS,GAAG,IAAI,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;YAC1F,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC;SACzB;QAED,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACpB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,EAAE;YACX,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,2FAA4B,EAAE;gBAChE,EAAE,EAAE,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ;aAC5C,CAAC,CAAC;SACN;IACL,CAAC;IAEO,2BAA2B;QAC/B,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CACpD,CAAC,qFAAsB,EAAE,4FAA6B,CAAC,EACvD,IAAI,CAAC,eAAe,CACvB,CAAC;SACL;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAClF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAEpF,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,sCAAsC;QAEtF,IAAI,SAAS,CAAC;QACd,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,QAAQ,GAAG,4EAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC5D;aAAM;YACH,IAAI,CAAC,QAAQ,GAAG;gBACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,YAAY,EAAE,IAAI,CAAC,YAAY;aAClC,CAAC;SACL;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;QACvD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAExD,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC;SACjC;aAAM;YACH,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC7B;QACD,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,SAAS,CAAC,MAAM,EAAE;YACpC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YACxB,SAAS,CAAC,MAAM,GAAG,EAAE,CAAC;SACzB;QACD,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,KAAK,EAAE,EAAE;gBAC1D,OAAO;aACV;YACD,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;YACjG,IAAI,QAAQ,EAAE;gBACV,QAAQ,CAAC,cAAc,EAAE,CAAC;aAC7B;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,eAAe,CAAC,IAAS;QAC7B,QAAQ,IAAI,EAAE;YACV,KAAK,4FAA6B,EAAE,2BAA2B;gBAC3D,IAAI,CAAC,2BAA2B,EAAE,CAAC;gBACnC,MAAM;YACV;gBACI,OAAO,CAAC,GAAG,CAAC,sCAAsC,GAAG,IAAI,CAAC,CAAC;SAClE;IACL,CAAC;IAEO,SAAS;QACb,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;QACrD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO;YACvB,CAAC,CAAC,IAAI,CAAC,OAAO;YACd,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,MAAM,UAAU,GACZ,yGAA8B,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC;YAChD,CAAC,CAAC,yGAA8B,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC;YACtD,CAAC,CAAC,CAAC,CAAC;QACZ;mFAC2E;QAE3E,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;QAExE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;YACjC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,MAAM,QAAQ,GAAG,+GAAoC,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;YAC/F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAChB,GAAG,EAAE,CAAC;gBACN,QAAQ;gBACR,KAAK,EAAE,QAAQ,CAAC,WAAW;gBAC3B,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,KAAK,CAAC;gBACjE,IAAI,EAAE,QAAQ,CAAC,IAAI;gBACnB,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,WAAW,CAAC;aAC7F,CAAC,CAAC;SACN;IACL,CAAC;IAEO,WAAW,CAAC,OAAY;QAC5B,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,QAAQ;QAC3D,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,OAAO,CAAC,QAAQ,EAAE;YAClB,MAAM,QAAQ,GAAG,iGAAuB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC3D,IAAI,QAAQ,EAAE;gBACV,IAAI,OAAO,CAAC,QAAQ,EAAE;oBAClB,MAAM,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACxC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;iBACtB;qBAAM;oBACH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;oBAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;iBACpB;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC5C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAO,EAAE,EAAE;wBAC5C,EAAE,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;4BACpB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;gCACX,OAAO;6BACV;4BACD,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;4BAC9E,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC,OAAO,EAAE,EAAE;gCACpC,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;6BACpC;wBACL,CAAC,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;gBACD,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;oBAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;iBACvB;aACJ;YACD,IAAI,MAAM,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,MAAM,EAAE;gBAClE,MAAM,GAAG,iGAAuB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aACpD;YACD,IAAI,MAAM,EAAE;gBACR,IAAI,OAAO,CAAC,MAAM,EAAE;oBAChB,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACtC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;iBACxB;qBAAM;oBACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;oBACpF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;iBACtB;gBAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;gBAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAClB,MAAM,CAAC,WAAW,EAAE,EACpB,MAAM,CAAC,QAAQ,EAAE,EACjB,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAC5C,CAAC;gBAEF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;aAClD;YAED,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;gBAC7F,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;aACrC;SACJ;IACL,CAAC;IAEO,kBAAkB;QACtB,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE;YACnE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SAC1D;QAED,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;YAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;SAClD;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YAC1C,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,OAAO;SACV;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACpC,CAAC;IAEO,QAAQ,CAAC,QAAc,EAAE,MAAY,EAAE,QAAkB;QAC7D,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAc,CAAC;QAC9C,MAAM,KAAK,GAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QAChD,MAAM,GAAG,GAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;QAC5C,IAAI,QAAQ,KAAK,GAAG,EAAE;YAClB,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACtC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SAC3C;QACD,MAAM,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;QAEzB,6EAA6E;QAC7E,wBAAwB;QACxB,IAAI,QAAQ,KAAK,GAAG,IAAI,IAAI,GAAG,uFAAa,EAAE;YAC1C,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAClD;QACD,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,qFAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;IACpD,CAAC;IAEO,gBAAgB,CAAC,QAAc,EAAE,MAAY,EAAE,gBAAsB;QACzE,IAAI,gBAAgB,IAAI,IAAI,CAAC,MAAM,EAAE;YACjC,OAAO;SACV;QAED,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE;YACtB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,OAAO;SACV;QAED,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;QACjE,IAAI,IAAI,CAAC,OAAO,KAAK,sFAAwB,IAAI,IAAI,CAAC,OAAO,KAAK,wFAA0B,EAAE;YAC1F,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,oFAAU,CAAC,CAAC;YAC7D,mEAAmE;YACnE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;YACjD,OAAO;SACV;QACD,IAAI,cAAc,IAAI,CAAC,EAAE;YACrB,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;YACjC,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;gBAC1C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,mDAAmD;aAC5E;SACJ;IACL,CAAC;;kHA1lCQ,iCAAiC;gIAAjC,iCAAiC;QCtB9C,0EAA6F;QAErF,8HAIM;QACV,6DAAM;QAEN,0EAGC;QACG,gIA4HM;;QACV,6DAAM;QAEN,0EAA0E;QAQ9D,gIAEO;QAEP,4EACK;QAAA,yDAEiD;;QAAA,6DACrD;QAED,4EAAoD;QAAC,yDAAkC;;QAAA,6DAAO;QAE9F,4EAA4B;QAEnB,yDAEiD;;QAAA,6DACrD;QAIT,4EAAgD;QAExC,uIASS;QACb,6DAAM;QACN,4EAAkC;QAG1B,2JAAS,qBAAiB,IAAC;QAQ3B,yDACJ;;QAAA,6DAAS;;QAhMf,2DAAc;QAAd,+EAAc;QASpB,2DAAiE;QAAjE,+JAAiE;QASrE,2DAG6B;QAH7B,8QAG6B;QAyHrB,2DAAkC;QAAlC,oGAAkC;QAIvB,2DAAc;QAAd,+EAAc;QAIf,2DAA2C;QAA3C,6GAA2C;QAC5C,2DAEiD;QAFjD,oUAEiD;QAGhD,2DAA6C;QAA7C,+GAA6C;QAAE,2DAAkC;QAAlC,gKAAkC;QAEjF,2DAAqB;QAArB,mFAAqB;QACjB,2DAAiF;QAAjF,+JAAiF;QAClF,2DAEiD;QAFjD,wUAEiD;QAQjD,2DAAqC;QAArC,sGAAqC;QActC,2DAEE;QAFF,uOAEE;QAKF,2DACJ;QADI,+JACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjM2B;AACoF;AACL;AAC1B;AAC9C;AACiB;AACsB;AAClC;AACd;AACQ;;;;AAkB9C,MAAM,qBAAqB;;0FAArB,qBAAqB;kHAArB,qBAAqB;sHATrB;YACL,qEAAoB;YACpB,yDAAY;YACZ,yEAAwB,CAAC,iFAAkB,CAAC;YAC5C,wDAAW;YACX,+DAAY;SACf;mIAGQ,qBAAqB,mBAd1B,6GAAwB;QACxB,4IAAiC;QACjC,uIAAgC;QAChC,qGAAyB,aAGzB,qEAAoB;QACpB,yDAAY,oEAEZ,wDAAW;QACX,+DAAY,aAEN,6GAAwB;kEAZ9B,6GAAwB,qHAExB,uIAAgC;IADhC,4IAAiC,qDAEjC,qGAAyB;;;;;;;;;;;;;;;;;;AChBW;AACgB;;AAKrD,MAAM,oBAAoB;IAC7B,gBAAe,CAAC;IAET,MAAM,CAAC,UAAU,CACpB,SAA2B,EAC3B,UAAyB,EACzB,MAAgB;QAEhB,QAAQ,SAAS,EAAE;YACf,KAAK,uFAAyB;gBAC1B,OAAO,MAAM,IAAI,UAAU,KAAK,iEAAe,CAAC;YACpD,KAAK,qFAAuB;gBACxB,OAAO,UAAU,CAAC,CAAC,CAAC,UAAU,KAAK,iEAAe,CAAC,CAAC,CAAC,SAAS,CAAC;YACnE,KAAK,yFAA2B;gBAC5B,OAAO,KAAK,CAAC;YACjB,KAAK,0FAA4B;gBAC7B,OAAO,IAAI,CAAC;YAChB;gBACI,OAAO;SACd;IACL,CAAC;IAEM,MAAM,CAAC,SAAS,CAAC,EAAQ,EAAE,EAAQ;QACtC,IAAI,MAAM,CAAC;QACX,MAAM,GAAG,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,CAAC;QACpD,MAAM,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;QACxB,MAAM,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;QACxB,OAAO,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;IACpC,CAAC;IAEM,MAAM,CAAC,eAAe,CAAC,WAAmB,EAAE,IAAY;QAC3D,OAAO;YACH,WAAW;YACX,IAAI;SACP,CAAC;IACN,CAAC;IAEM,MAAM,CAAC,eAAe,CAAC,IAAS,EAAE,CAAM,EAAE,GAAQ;QACrD,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;QAC7B,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;QAC3C,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,SAAS,CAAC,QAAQ,EAAE,EAAE,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC;QAEtG,IAAI,WAAW,GAAG,YAAY,EAAE;YAC5B,OAAO,IAAI,CAAC;SACf;QAED,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,SAAS,CAAC,QAAQ,EAAE,EAAE,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,WAAW,CAAC;IACtG,CAAC;IAEM,MAAM,CAAC,WAAW,CAAC,IAAS;QAC/B,OAAO,IAAI,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;IAC1D,CAAC;IAEM,MAAM,CAAC,oCAAoC,CAAC,OAAe,EAAE,UAAe,EAAE,OAAY;QAC7F,OAAO,CACH,OAAO,CAAC,MAAM;YACd,OAAO,CAAC,MAAM,KAAK,EAAE;YACrB,oBAAoB,CAAC,wBAAwB,CAAC,SAAS,EAAE,UAAU,EAAE,OAAO,CAAC,CAChF,CAAC;IACN,CAAC;IAEM,MAAM,CAAC,wBAAwB,CAAC,OAAe,EAAE,UAAe,EAAE,OAAY;QACjF,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,KAAK,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;YAC/D,KAAK,MAAM,KAAK,IAAI,UAAU,CAAC,OAAO,CAAC,EAAE;gBACrC,IAAI,KAAK,KAAK,OAAO,EAAE;oBACnB,SAAS;iBACZ;gBACD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,CAAC;gBACtD,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;gBAClD,SAAS;oBACL,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO;wBACjF,MAAM,KAAK,QAAQ,CAAC;aAC3B;SACJ;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;IAEM,MAAM,CAAC,2BAA2B,CAAC,WAAgB,EAAE,OAAY,EAAE,gBAAqB;QAC3F,IAAI,gBAAgB,CAAC,aAAa,IAAI,gBAAgB,CAAC,QAAQ,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,EAAE,EAAE;YACxG,IACI,WAAW;gBACX,WAAW,CAAC,QAAQ,KAAK,8DAAY;gBACrC,WAAW,CAAC,QAAQ;gBACpB,WAAW,CAAC,QAAQ,KAAK,EAAE,EAC7B;gBACE,OAAO,CACH,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;oBAC3D,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAC5D,CAAC;aACL;iBAAM,IAAI,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,WAAW,CAAC,MAAM,KAAK,EAAE,EAAE;gBACvE,OAAO,CACH,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;oBAC3D,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAC1D,CAAC;aACL;SACJ;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,MAAM,CAAC,2BAA2B,CAAC,OAAe,EAAE,cAAmB,EAAE,MAAW;QACvF,IAAI,CAAC,cAAc,EAAE;YACjB,OAAO,KAAK,CAAC;SAChB;QACD,KAAK,IAAI,OAAO,GAAG,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;YACnE,KAAK,MAAM,KAAK,IAAI,cAAc,CAAC,OAAO,CAAC,EAAE;gBACzC,IAAI,KAAK,KAAK,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE;oBAC7D,SAAS;iBACZ;gBAED,IAAI,OAAO,CAAC;gBACZ,IAAI,OAAO,CAAC;gBAEZ,IACI,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ;oBAC9C,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC;oBACtD,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,KAAK,EAAE,EACxE;oBACE,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;iBACvF;gBAED,IACI,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM;oBAC5C,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;oBACpD,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,EAAE,EACpE;oBACE,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC;iBACnF;gBAED,IACI,CAAC,OAAO,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC;oBACzD,CAAC,OAAO,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,EACzD;oBACE,OAAO,IAAI,CAAC;iBACf;aACJ;SACJ;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,MAAM,CAAC,uBAAuB,CAAC,QAAQ,GAAG,KAAK;QAClD,OAAO;YACH,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,EAAE;YACV,YAAY,EAAE,QAAQ;YACtB,UAAU,EAAE,KAAK;YACjB,cAAc,EAAE,EAAE;YAClB,YAAY,EAAE,EAAE;YAChB,eAAe,EAAE,KAAK;YACtB,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,KAAK;YACjB,YAAY,EAAE,WAAW;YACzB,UAAU,EAAE,EAAE;SACjB,CAAC;IACN,CAAC;;wFA3JQ,oBAAoB;qHAApB,oBAAoB,WAApB,oBAAoB,mBAFjB,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJqC;AACtB;AAGmD;AACrB;AAEX;AAQV;;;;;;;;AAI9C,MAAM,cAAc,GAAG,0BAA0B,CAAC;AAK3C,MAAM,cAAc;IAGvB,YACY,gBAAkC,EAClC,iBAAoC,EACpC,eAAgC,EAChC,gBAAkC,EAClC,aAA4B,EAC5B,mBAAwC;QALxC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,oBAAe,GAAf,eAAe,CAAiB;QAChC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,kBAAa,GAAb,aAAa,CAAe;QAC5B,wBAAmB,GAAnB,mBAAmB,CAAqB;IACjD,CAAC;IAEI,MAAM,CAAC,aAAa,CAAC,IAAS,EAAE,UAAe;QACnD,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAEzD,IAAI,UAAU,CAAC,WAAW,CAAC,EAAE;YACzB,OAAO;gBACH,GAAG,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC,QAAQ;gBACrC,GAAG,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC,SAAS;gBACtC,OAAO,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC,YAAY;gBAC7C,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC5C,OAAO,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC,OAAO;aAC3C,CAAC;SACL;QAED,OAAO,SAAS,CAAC;IACrB,CAAC;IAEM,QAAQ,CAAC,QAAa,EAAE,WAAgB,EAAE,UAAkB,EAAE,QAAa;QAC9E,iCAAiC;QACjC,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,WAAW,CAAC,OAAO,KAAK,EAAE,EAAE;YACpD,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC3B,OAAO;SACV;QAED,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,IAAI,CAChE,CAAC,IAAS,EAAE,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;YACrC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;YAC5B,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC;YAC3C,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC3C,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;YAC7C,QAAQ,CAAC,gBAAgB,GAAG,WAAW,CAAC,QAAQ,CAAC;YACjD,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAClC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;YACzB,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YACpC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YACpC,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;YAC3C,QAAQ,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;YAC9C,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAC,QAAQ,CAAC;YAE3C;;;;;;;;;;;;;;;;;;;iDAmBqC;YACrC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC,EACD,CAAC,GAAQ,EAAE,EAAE;YACT,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;YACxB,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;YAC5B,OAAO,CAAC,GAAG,CAAC,+BAA+B,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACnE,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC,CACJ,CAAC;IACN,CAAC;IAEM,YAAY,CAAC,SAAiB;QACjC,MAAM,UAAU,GAAG,IAAI,yCAAO,EAAiB,CAAC;QAChD,MAAM,GAAG,GAAG,8FAAgC,GAAG,SAAS,GAAG,QAAQ,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAChG,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,IAAI,CAC9C,CAAC,QAAQ,EAAE,EAAE;YACT,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBACjC,UAAU,CAAC,KAAK,CAAC,0CAA0C,CAAC,CAAC;aAChE;YAED,IAAI,MAAM,CAAC;YACX,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAC,QAAQ,EAAE;gBACrC,KAAK,MAAM,SAAS,IAAI,OAAO,CAAC,UAAU,EAAE;oBACxC,IAAI,SAAS,KAAK,OAAO,EAAE;wBACvB,MAAM,GAAG,OAAO,CAAC;wBACjB,MAAM;qBACT;iBACJ;aACJ;YACD,IAAI,MAAM,KAAK,SAAS,EAAE;gBACtB,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aACjC;YAED,IAAI,WAAW,CAAC;YAChB,IAAI,WAAW,CAAC;YAChB,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC1D,IAAI,OAAO,EAAE;gBACT,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC;gBAC1D,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC;aAC9B;YACD,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACzB,MAAM,WAAW,GAAG,WAAW,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;YAEnE,UAAU,CAAC,IAAI,CAAC;gBACZ,WAAW;gBACX,WAAW;gBACX,OAAO,EAAE,MAAM,CAAC,EAAE;gBAClB,OAAO,EAAE,KAAK;gBACd,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC1B,SAAS,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC3B,gBAAgB,EAAE,MAAM,CAAC,aAAa;gBACtC,UAAU,EAAE,WAAW;gBACvB,WAAW,EAAE,WAAW;aACV,CAAC,CAAC;QACxB,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,OAAO,CAAC,CAAC;YACjD,UAAU,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;QACrC,CAAC,CACJ,CAAC;QACF,OAAO,UAAU,CAAC;IACtB,CAAC;IAEM,WAAW,CAAC,WAAgB,EAAE,SAAc,EAAE,UAAe,EAAE,QAAa;QAC/E,IAAI,QAAQ,GAAQ,EAAE,CAAC;QAEvB,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC;QAC5C,MAAM,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,WAAW,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;QACvF,IAAI,WAAW,EAAE;YACb,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC;gBAC5B,OAAO,EAAE,WAAW;aACvB,CAAC,CAAC;YACH,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAC3B,OAAO;SACV;QAED,QAAQ,CAAC,gBAAgB,GAAG,WAAW,CAAC,gBAAgB,CAAC;QACzD,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;QAEzC,IAAI,WAAW,CAAC,WAAW,EAAE;YACzB,QAAQ,CAAC,gBAAgB,GAAG,WAAW,CAAC,eAAe,CAAC;SAC3D;QAED,QAAQ,CAAC,WAAW,GAAG,WAAW,CAAC,cAAc,CAAC;QAClD,6EAA6E;QAC7E,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,OAAO,KAAK,WAAW,CAAC,OAAO,CAAC;QAC7D,QAAQ,CAAC,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC;QACvC,QAAQ,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;QACjC,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;QAC7C,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;QAC3C,QAAQ,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;QACnC,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;QAC3C,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;QAC3C,QAAQ,CAAC,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC;QAC/C,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;QAE3C,IAAI,QAAQ,CAAC,WAAW,EAAE;YACtB,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;YACtD,QAAQ,CAAC,gBAAgB,GAAG,QAAQ,CAAC,UAAU,CAAC;YAChD,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,SAAS,CAAC,QAAQ,KAAK,yGAAwB,EAAE;YACjD,IAAI,WAAW,CAAC,QAAQ,EAAE;gBACtB,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;gBACzC,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;gBAC3C,QAAQ,CAAC,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC;gBACtC,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;gBACzC,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;gBACzC,QAAQ,CAAC,gBAAgB,GAAG,WAAW,CAAC,QAAQ,CAAC;gBACjD,QAAQ,CAAC,eAAe,GAAG,WAAW,CAAC,eAAe,CAAC;gBACvD,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;gBAC7C,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;gBAC7C,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;gBAEzB,IAAI,QAAQ,CAAC,WAAW,KAAK,EAAE,EAAE;oBAC7B,QAAQ,CAAC,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC;iBAClD;gBAED,IAAI,WAAW,CAAC,SAAS,KAAK,MAAM,EAAE;oBAClC,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;iBAC5C;gBAED;iEACiD;gBACjD,kEAAkE;gBAClE,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;aAC9B;iBAAM;gBACH,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,WAAW,EAAE,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;aAClE;SACJ;aAAM;YACH,IAAI,WAAW,CAAC,QAAQ,IAAI,WAAW,CAAC,YAAY,EAAE;gBAClD,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,YAAY,CAAC;gBAC7C,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC;aAClD;iBAAM;gBACH,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;gBAClD,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC;aACvD;YACD,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS,CAAC;YAC3C,QAAQ,CAAC,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC;YACtC,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;YACzC,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;YAC7C,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;YACzB,IAAI,WAAW,CAAC,SAAS,KAAK,MAAM,EAAE;gBAClC,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;aAC5C;YACD,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAC/B,kEAAkE;YAClE,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SAC9B;IACL,CAAC;IAEM,WAAW,CAAC,WAAgB,EAAE,QAAa,EAAE,UAAe,EAAE,QAAa;QAC9E,IAAI,QAAQ,GAAQ,EAAE,CAAC;QAEvB,IAAI,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;QAC5B,IAAI,CAAC,IAAI,IAAI,WAAW,CAAC,QAAQ,EAAE;YAC/B,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC;SAC/B;QAED,IAAI,cAAc,GAAG,IAAI,CAAC;QAC1B,IAAI,WAAW,CAAC,SAAS,KAAK,IAAI,EAAE;YAChC,cAAc,GAAG,MAAM,CAAC;SAC3B;QAED,yEAAyE;QACzE,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,EAAE;YAC5D;;;eAGG;YAEH,IAAI,kHAAiC,CAAC,WAAW,EAAE,UAAU,CAAC,cAAc,CAAC,CAAC,EAAE;gBAC5E,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;gBAC5F,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;gBAC3B,OAAO;aACV;SACJ;QAED,IAAI,QAAQ,GAAG,KAAK,CAAC,CAAC,6EAA6E;QACnG,IAAI,QAAQ,CAAC,OAAO,KAAK,WAAW,CAAC,OAAO,EAAE;YAC1C,QAAQ,GAAG,IAAI,CAAC;SACnB;QACD,QAAQ,GAAG,WAAW,CAAC;QACvB,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC7B,QAAQ,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC;QAC3C,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC;QACzC,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAClD,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC;QACpD,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;QACtB,QAAQ,CAAC,IAAI,GAAG,EAAE,CAAC;QACnB,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;QAEzB,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;QAEtD,IAAI,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,YAAY,EAAE;YAC5C,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,YAAY,CAAC;YAC7C,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC;SAClD;QAED,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IAEM,mBAAmB,CAAC,WAAgB,EAAE,QAAa,EAAE,SAAc,EAAE,UAAe;QACvF,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACnC,MAAM,QAAQ,GAAQ;gBAClB,OAAO;gBACP,MAAM;aACT,CAAC;YAEF,QAAQ,SAAS,CAAC,QAAQ,EAAE;gBACxB,KAAK,yGAAwB;oBACzB,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;gBAC1E,KAAK,yGAAwB;oBACzB,IAAI,SAAS,CAAC,IAAI,KAAK,OAAO,IAAI,SAAS,CAAC,IAAI,KAAK,OAAO,EAAE;wBAC1D,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;qBACzE;yBAAM;wBACH,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;qBACxE;gBACL;oBACI,OAAO,CAAC,KAAK,CAAC,mBAAmB,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;oBACxD,MAAM,CAAC,SAAS,CAAC,CAAC;aACzB;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,gBAAgB,CACnB,SAAiB,EACjB,SAAc,EACd,SAAc,EACd,UAAe;QAEf,QAAQ,SAAS,CAAC,QAAQ,EAAE;YACxB,KAAK,yGAAwB;gBACzB,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/E,KAAK,yGAAwB;gBACzB,IAAI,SAAS,CAAC,IAAI,KAAK,OAAO,IAAI,SAAS,CAAC,IAAI,KAAK,OAAO,EAAE;oBAC1D,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;iBAC9E;qBAAM;oBACH,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;iBAC1E;YACL;gBACI,OAAO,CAAC,KAAK,CAAC,mBAAmB,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;gBACxD,OAAO,wCAAE,CAAC,EAAqB,CAAC,CAAC;SACxC;IACL,CAAC;IAED,8EAA8E;IAC9E,yDAAyD;IAClD,uBAAuB;QAC1B,OAAO,IAAI,6CAAU,CAAgB,CAAC,UAAqC,EAAE,EAAE;YAC3E,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;gBAC5C,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACjC,OAAO;aACV;YAED,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;gBACxB,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC,CAAC;gBAChF,OAAO;aACV;YAED,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;gBACxB,yEAAyE;gBACzE,gGAAgG;gBAChG,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC,CAAC;gBAC9D,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;gBACpC,OAAO;aACV;YAED,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBACjE,IAAI,MAAM,CAAC,KAAK,KAAK,SAAS,IAAI,MAAM,CAAC,KAAK,KAAK,QAAQ,EAAE;oBACzD,0EAA0E;oBAC1E,6EAA6E;oBAC7E;;;;uBAIG;oBAEH,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;iBACvC;gBAED,IAAI,MAAM,CAAC,KAAK,KAAK,QAAQ,EAAE;oBAC3B,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC;iBAC5E;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,qBAAqB,CACxB,gBAA+B,EAC/B,SAA4B,EAC5B,SAAyB;QAEzB,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE;YAC3B,OAAO;SACV;QAED,gBAAgB,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC;QAC7C,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,SAAS,CAAC,QAAQ,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;IACpG,CAAC;IAEO,kBAAkB,CAAC,UAAqC;QAC5D,SAAS,CAAC,WAAW,CAAC,kBAAkB,CACpC,CAAC,QAAQ,EAAE,EAAE;YACT,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;YAC/B,IAAI,CAAC,MAAM,EAAE;gBACT,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC,CAAC;gBAChF,OAAO;aACV;YAED,MAAM,UAAU,GAAG;gBACf,QAAQ,EAAE,MAAM,CAAC,QAAQ;gBACzB,SAAS,EAAE,MAAM,CAAC,SAAS;gBAC3B,MAAM,EAAE,KAAK;gBACb,WAAW,EAAE,MAAM;gBACnB,IAAI,EAAE,UAAU;gBAChB,YAAY,EAAE,IAAI;aACJ,CAAC;YAEnB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,GAAG,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CACjE,CAAC,KAAK,EAAE,EAAE;gBACN,MAAM,SAAS,mCACR,UAAU,GACV,KAAK,CACX,CAAC;gBACF,SAAS,CAAC,UAAU,GAAG,SAAS,CAAC,WAAW,CAAC;gBAE7C,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;gBAC5B,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/B,CAAC,EACD,GAAG,EAAE;gBACD,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBAChC,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAChC,CAAC,CACJ,CAAC;QACN,CAAC,EACD,CAAC,SAAS,EAAE,EAAE;YACV,MAAM,QAAQ,GACV,SAAS,CAAC,IAAI,KAAK,IAAI;gBACnB,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,uBAAuB,CAAC;gBACxD,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC;YAC5B,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,QAAQ,CAAC,CAAC;YAC7C,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC,CACJ,CAAC;IACN,CAAC;IAEO,aAAa,CACjB,SAAiB,EACjB,SAA4B,EAC5B,SAAyB,EACzB,UAAe;QAEf,IAAI,YAAY,GAAG,IAAI,CAAC;QACxB,IAAI,SAAS,CAAC,KAAK,KAAK,IAAI,EAAE;YAC1B,YAAY,GAAG,MAAM,CAAC;SACzB;QAED,MAAM,SAAS,GAAG,CAAC,SAAS,IAAI,SAAS,KAAK,GAAG,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1E,IAAI,SAAS,EAAE;YACX,MAAM,GAAG,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC,OAAO;gBACxC,CAAC,CAAE;oBACG,OAAO,EAAE,UAAU,CAAC,YAAY,CAAC,CAAC,OAAO;oBACzC,MAAM,EAAE,CAAC;iBACQ;gBACvB,CAAC,CAAC,SAAS,CAAC;YAEhB,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;SACxG;QAED,IAAI,SAAS,GAAG,SAAS,CAAC;QAC1B,IAAI,SAAS,EAAE;YACX,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAC5C,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrB,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;aAC3B;SACJ;QAED,yFAAyF;QACzF,IAAI,SAAS,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE;YAC5E,IACI,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS;gBACrC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EACpE;gBACE,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC;aACrD;SACJ;QACD,MAAM,UAAU,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC;QAEzD,OAAO,IAAI,CAAC,gBAAgB;aACvB,mBAAmB,CAAC;YACjB,KAAK,EAAE,SAAS,CAAC,IAAI,EAAE;SAC1B,CAAC;aACD,IAAI,CACD,oDAAG,CAAC,CAAC,OAAO,EAAE,EAAE;YACZ,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;gBAChD,OAAO,EAAE,CAAC;aACb;YAED,MAAM,YAAY,GAAQ,EAAE,CAAC,CAAC,mCAAmC;YACjE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpD,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC;gBAC9C,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;gBAC/C,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,cAAc,GAAG,KAAK,CAAC;gBACzC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,4HAA2C,CAAC;gBAC1E,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,kGAAgC,CAAC;gBAChE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS;oBACvB,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAErF,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE;oBAC3C,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC5B,CAAC,EAAE,CAAC;oBACJ,SAAS;iBACZ;qBAAM;oBACH,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;iBACpD;gBAED,IAAI,UAAU,KAAK,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;oBAC5C,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,IAAI,CAAC;iBAC5C;gBAED,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC;gBACjC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;gBACtF,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;aACrF;YAED,OAAO,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;QACzE,CAAC,CAAC,CACL,CAAC;IACV,CAAC;IAEO,iBAAiB,CAAC,SAAiB,EAAE,SAAc,EAAE,SAAc,EAAE,UAAe;QACxF,MAAM,GAAG,GAAG,cAAc,CAAC,aAAa,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QAChE,MAAM,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC;QAElC,MAAM,SAAS,GAAG,CAAC,SAAS,IAAI,SAAS,KAAK,GAAG,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1E,IAAI,SAAS,EAAE;YACX,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;SAC9F;QAED;;;;;;WAMG;QAEH,MAAM,MAAM,GAAQ;YAChB,KAAK,EAAE,SAAS;YAChB,SAAS,EAAE,SAAS,CAAC,IAAI;SAC5B,CAAC;QAEF,IAAI,GAAG,EAAE;YACL,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE;gBACpB,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;gBAC1C,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;aAC9B;YAED,IAAI,GAAG,CAAC,OAAO,EAAE;gBACb,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;aAChC;SACJ;QAED,MAAM,UAAU,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC;QACjD,OAAO,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,KAAK,yGAAwB,EAAE,MAAM,CAAC,CAAC,IAAI,CAC/F,oDAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;YACb,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC5B,OAAO,EAAE,CAAC;aACb;YAED,KAAK,MAAM,UAAU,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE;gBAChD,UAAU,CAAC,SAAS,GAAG,SAAS,CAAC;gBACjC,UAAU,CAAC,UAAU;oBACjB,SAAS,CAAC,QAAQ,KAAK,yGAAwB;wBAC3C,CAAC,CAAC,0FAAwB;wBAC1B,CAAC,CAAC,0FAAwB,CAAC;gBACnC,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAC;gBAEtC,IAAI,UAAU,CAAC,OAAO,KAAK,UAAU,EAAE;oBACnC,UAAU,CAAC,eAAe,GAAG,IAAI,CAAC;iBACrC;gBAED,IAAI,SAAS,CAAC,QAAQ,KAAK,yGAAwB,EAAE;oBACjD,UAAU,CAAC,UAAU,GAAG,UAAU,CAAC,QAAQ,CAAC;iBAC/C;gBAED,IAAI,UAAU,CAAC,WAAW,KAAK,EAAE,EAAE;oBAC/B,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;oBAC1B,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;oBAC/E,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;iBAC9E;aACJ;YAED,OAAO,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC;QACrC,CAAC,CAAC,CACL,CAAC;IACN,CAAC;IAEO,2BAA2B,CAAC,GAAQ;QACxC,IAAI,GAAG,CAAC,WAAW,KAAK,eAAe,EAAE;YACrC,OAAO,GAAG,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;SACpF;QAED,IAAI,GAAG,CAAC,YAAY,EAAE;YAClB,OAAO,GAAG,CAAC,QAAQ,GAAG,IAAI,GAAG,GAAG,CAAC,OAAO,CAAC;SAC5C;QAED,IAAI,GAAG,CAAC,QAAQ,IAAI,GAAG,CAAC,WAAW,KAAK,UAAU,EAAE;YAChD,OAAO,GAAG,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;SACtF;QAED,IAAI,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE;YACpC,IAAI,GAAG,CAAC,WAAW,KAAK,SAAS,EAAE;gBAC/B,OAAO,GAAG,CAAC,QAAQ,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aACtE;YAED,IAAI,GAAG,CAAC,WAAW,KAAK,cAAc,EAAE;gBACpC,OAAO,GAAG,CAAC,IAAI,CAAC;aACnB;SACJ;QACD,OAAO,GAAG,CAAC,UAAU,CAAC;IAC1B,CAAC;IAEO,cAAc,CAAC,WAAgB,EAAE,QAAa;QAClD,IAAI,WAAW,CAAC,WAAW,KAAK,SAAS,IAAI,WAAW,CAAC,WAAW,KAAK,UAAU,EAAE;YACjF,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC;SAC5B;QAED,IAAI,WAAW,CAAC,WAAW,KAAK,cAAc,IAAI,WAAW,CAAC,WAAW,KAAK,eAAe,EAAE;YAC3F,QAAQ,CAAC,IAAI,GAAG,OAAO,CAAC;YACxB,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAC,YAAY,CAAC;YAC7C,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC;SAClD;QAED,IAAI,WAAW,CAAC,WAAW,KAAK,MAAM,EAAE;YACpC,IAAI,UAAU,GAAG,WAAW,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC;YACnF,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE;gBAC3C,UAAU,GAAG,UAAU,GAAG,IAAI,GAAG,WAAW,CAAC,OAAO,CAAC;aACxD;YACD,QAAQ,CAAC,UAAU,GAAG,UAAU,CAAC;SACpC;aAAM;YACH,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,2BAA2B,CAAC,WAAW,CAAC,CAAC;SACvE;QAED,OAAO,QAAQ,CAAC;IACpB,CAAC;IAEO,oBAAoB,CAAC,UAAe,EAAE,WAAgB,EAAE,UAAkB;QAC9E,IAAI,WAAW,CAAC,SAAS,KAAK,sHAAqC,EAAE;YACjE,QAAQ,WAAW,CAAC,SAAS,EAAE;gBAC3B,KAAK,IAAI;oBACL,IAAI,UAAU,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,CAAC,OAAO,KAAK,WAAW,CAAC,OAAO,EAAE;wBAC1E,OAAO,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;qBACxD;oBACD,MAAM;gBACV,KAAK,SAAS;oBACV,IAAI,UAAU,CAAC,EAAE,IAAI,UAAU,CAAC,EAAE,CAAC,OAAO,KAAK,WAAW,CAAC,OAAO,EAAE;wBAChE,OAAO,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;qBACxD;aACR;YACD,OAAO;SACV;QAED,QAAQ,WAAW,CAAC,SAAS,EAAE;YAC3B,KAAK,IAAI,IAAI,CAAS;gBAClB,IAAI,UAAU,CAAC,IAAI,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,KAAK,WAAW,CAAC,OAAO,EAAE;oBACpE,OAAO,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;iBACxD;gBACD,MAAM;YACV,KAAK,MAAM,IAAI,CAAS;gBACpB,IAAI,UAAU,CAAC,EAAE,IAAI,UAAU,CAAC,EAAE,CAAC,OAAO,KAAK,WAAW,CAAC,OAAO,EAAE;oBAChE,OAAO,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;iBACxD;gBACD,MAAM;SACb;QAED,OAAO,SAAS,CAAC;IACrB,CAAC;IAEO,kBAAkB;QACtB,MAAM,SAAS,GAA8B;YACzC,IAAI,EAAE,OAAO;YACb,YAAY,EAAE,gFAAyB;YACvC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,QAAQ;SAC1C,CAAC;QAEF,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE;YACzB,IAAI,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;gBAC/B,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;aAC3C;SACJ;QACD,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC5B,CAAC;IAEO,iBAAiB,CACrB,SAAiB,EACjB,YAAoB,EACpB,IAAoB,EACpB,WAA6B;QAE7B,MAAM,aAAa,GAAoB,EAAE,CAAC;QAE1C,MAAM,cAAc,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,cAAc,EAAE;YAChB,aAAa,CAAC,IAAI,CACd,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO;gBACtC,CAAC,CAAC,IAAI,CAAC,UAAU;gBACjB,CAAC,CAAE;oBACG,YAAY,EAAE,IAAI;oBAClB,UAAU,EAAE,EAAE;iBACC,CAC5B,CAAC;SACL;QAED,IAAI,YAAY,GAAG,CAAC,EAAE;YAClB,OAAO,wCAAE,CAAC,aAAa,CAAC,CAAC;SAC5B;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAC5D,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EACxB,IAAI,CAAC,IAAI,EACT,SAAS,EACT,WAAW,CACd,CAAC;QACF,KAAK,MAAM,OAAO,IAAI,cAAc,EAAE;YAClC,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;YAC9B,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC;YAE7B,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC/B;QAED,OAAO,wCAAE,CAAC,aAAa,CAAC,CAAC;IAC7B,CAAC;;4EAtsBQ,cAAc;gHAAd,cAAc,WAAd,cAAc,mBAFX,MAAM;;;;;;;;;;;;;;;;;AClBf,MAAM,WAAW;IAIb,IAAI,CAAC,YAAiB;QACzB,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC;IACpC,CAAC;IAEM,SAAS,CAAC,SAAiB,EAAE,IAAS;QACzC,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE;YAC7B,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;SACtC;IACL,CAAC;IAEM,QAAQ,CAAC,SAAiB;QAC7B,IAAI,SAAS,EAAE;YACX,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SACtC;QACD,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAEM,aAAa,CAAC,UAAe;QAChC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACjC,CAAC;IAEM,aAAa;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;;sEA3BQ,WAAW;4GAAX,WAAW,WAAX,WAAW,mBAFR,MAAM","sources":["./src/app/modules/core/constants/calendar-conf.ts","./src/app/modules/core/schemas/modules/core/search-address.ts","./src/app/modules/search/calendar/calendar.component.ts","./src/app/modules/search/calendar/calendar.component.html","./src/app/modules/search/components/mob-loc-field-results/mob-loc-field-results.component.ts","./src/app/modules/search/components/mob-loc-field-results/mob-loc-field-results.component.html","./src/app/modules/search/datetime-calendar/datetime-calendar.component.ts","./src/app/modules/search/datetime-calendar/datetime-calendar.component.html","./src/app/modules/search/directives/field-navigation.directive.ts","./src/app/modules/search/loc-field/loc-field.component.ts","./src/app/modules/search/loc-field/loc-field.component.html","./src/app/modules/search/mob-loc-field-modal/mob-loc-field-modal.component.ts","./src/app/modules/search/mob-loc-field-modal/mob-loc-field-modal.component.html","./src/app/modules/search/mob-loc-field/mob-loc-field.component.ts","./src/app/modules/search/mob-loc-field/mob-loc-field.component.html","./src/app/modules/search/mob-search-details/mob-search-details.component.ts","./src/app/modules/search/mob-search-details/mob-search-details.component.html","./src/app/modules/search/passenger/passenger.component.ts","./src/app/modules/search/passenger/passenger.component.html","./src/app/modules/search/search.component.ts","./src/app/modules/search/search.component.html","./src/app/modules/search/search.module.ts","./src/app/modules/search/trazler-calendar/components/base-trazler-calendar.ts","./src/app/modules/search/trazler-calendar/components/trazler-calendar/trazler-calendar.component.ts","./src/app/modules/search/trazler-calendar/components/trazler-calendar/trazler-calendar.component.html","./src/app/modules/search/trazler-calendar/components/trazler-transfer-calendar/trazler-transfer-calendar.component.ts","./src/app/modules/search/trazler-calendar/components/trazler-transfer-calendar/trazler-transfer-calendar.component.html","./src/app/modules/search/trazler-calendar/components/trazler-trip-dates-calendar/trazler-trip-dates-calendar.component.ts","./src/app/modules/search/trazler-calendar/components/trazler-trip-dates-calendar/trazler-trip-dates-calendar.component.html","./src/app/modules/search/trazler-calendar/trazler-calendar.module.ts","./src/app/services/modules/search/utils/calendar.utils.ts","./src/app/services/modules/services/address-service.ts","./src/app/services/searchEngine/services/search-state.service.ts"],"sourcesContent":["export const CalendarConf = {\n    class: 'col-xl-4 col-md-4 order3',\n    content: 'transferCal',\n    dateRange: 'free',\n    fieldRole: 2,\n    editOrder: 3,\n    mainOrder: 2,\n    maxDays: 84,\n    minDays: 0,\n    placeholder: 'SEARCH.TRIP_DATES',\n    showNights: false,\n    showTripOption: true,\n    tabOrder: 3,\n    time: true,\n};\n","export enum AddressSource {\n    SRC_GOOGLE = 'google',\n    SRC_MAPBOX = 'mapbox',\n    SRC_AIRPORT_CITIES = 'sac',\n}\n\nexport interface Location {\n    latitude: number;\n    longitude: number;\n}\n\nexport interface SearchAddress {\n    latitude: number;\n    longitude: number;\n    header: boolean;\n    stationType: string;\n    icon: string;\n    isMyLocation: boolean;\n    countryCode: string;\n    countryName: string;\n    placeId: string;\n    isDirty: boolean;\n    cityName: string;\n    showText: string;\n    formattedAddress: string;\n    displayStr: string;\n    selectedStr: string;\n    iataCode: string;\n    code: string;\n    codes: string;\n    cityCode: string;\n    tchCode: string;\n    iconType: string;\n    trazlerIcon: string;\n    longDescription: string;\n    shortDescription: string;\n    detailsAddress: string;\n    address: string;\n    autoCompleteAddress: string;\n    mainText: string;\n    id: string;\n    types: string[];\n    description: string;\n    departureFlightsCount?: number;\n    name: string;\n    hotelName: string;\n    alternateName: string;\n    havingGroup?: boolean;\n    isFromOthers?: boolean;\n    popularity?: number;\n    addrCityName: string;\n    cityLatitude?: number;\n    cityLongitude?: number;\n    isCityHeader?: boolean;\n    country: string;\n    countryISOCode: string;\n    isHeader?: boolean;\n    location: Location;\n    placeType: string;\n    trainCodes?: any;\n    isDebug?: boolean;\n    inputName: string;\n    searchTxt: string;\n    showMyLocation?: boolean;\n    api_source: string;\n    uniqueKey: string;\n    isPlace?: boolean;\n    All_airports: string;\n    All_trains: string;\n    selectedAddress: boolean;\n    isRecent?: boolean;\n    recentSelected?: boolean;\n    isCached: boolean;\n    isSingleStation: boolean;\n}\n\nexport interface SearchConfigOrder {\n    field: string;\n    confIdx: number;\n    fieldType: string;\n    class: string[];\n    fieldOrder: number;\n    tabOrder: number;\n}\n\nexport interface Linked {\n    radius: number;\n    field: string;\n}\n\nexport interface Extra {\n    myLoc: boolean;\n    map: boolean;\n}\n\nexport interface LocationConfig {\n    provider: boolean;\n    type: string;\n    class: string;\n    icon: string;\n    placeholder: string;\n    optional: boolean;\n    tabOrder: number;\n    mainOrder: number;\n    editOrder: number;\n    fieldRole: number;\n    linked?: Linked;\n    extra?: Extra;\n}\n\nexport interface LinkedFieldInfo {\n    lat: number;\n    lng: number;\n    radius: number;\n    placeId: string;\n    country: string;\n}\n","import {\n    AfterViewInit,\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n} from '@angular/core';\nimport { Trip } from '@core/constants/trip';\nimport * as moment from 'moment';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { SettingsService } from '@services/services/settings-service';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ModalService } from '@services/modal.service';\nimport { TrazlerCalendarComponent } from '../trazler-calendar/components/trazler-calendar/trazler-calendar.component';\nimport { PlatformService } from '@services/platform.service';\nimport { CalendarUtilsService } from '@services/modules/search/utils/calendar.utils';\nimport { DatesService } from '@services/modules/search/utils/dates.service';\nimport { CalTypes } from '@core/constants/call-types.const';\n\n@Component({\n    selector: 'tz-calendar',\n    templateUrl: './calendar.component.html',\n    styleUrls: ['./calendar.component.scss'],\n})\nexport class CalendarComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n    @Input() formGroup: any;\n    @Input() searchData: any;\n    @Input() calData = {\n        fromDate: '',\n        toDate: '',\n        fromTime: '',\n        toTime: '',\n        travelOption: 'roundTrip',\n        twoDates: true,\n        showCalendar: false,\n    };\n    @Input() fieldConf: any;\n    @Input() formField!: {\n        field: string;\n        confIdx: number;\n        fieldType: string;\n        tabOrder: number;\n    };\n    @Input() readonly = false;\n    @Input() isModalEditMode = false;\n    @Input() travelType: string = Trip.ROUND_TRIP;\n    @Input() selectedServices!: { [key: string]: boolean };\n    @Output() dateSelected = new EventEmitter<{ selectedObj: any; formField: any }>();\n    @Output() focusInvalid = new EventEmitter<void>();\n    @Output() searchDropDownToggle: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    public minDate = moment(new Date(), 'DD-MM-YYYY');\n    // public maxDate = moment(new Date(this.today.getFullYear() + 1, this.today.getMonth(), this.today.getDate()), 'DD-MM-YYYY');\n    public showTime = false;\n    public locale = {\n        format: 'YYYY-MM-DDTHH:mm:ss.SSSSZ',\n        displayFormat: 'DD MMM YYYY',\n        applyLabel: 'Done', // detault is 'Apply'\n        clearLabel: 'Clear', // detault is 'Clear'\n    };\n    public destroy$: Subject<boolean> = new Subject<boolean>();\n    private calTypes = CalTypes;\n\n    constructor(\n        private datesService: DatesService,\n        private searchDataService: SearchDataService,\n        private settingsService: SettingsService,\n        private modalService: ModalService,\n        public platformService: PlatformService\n    ) {}\n\n    ngAfterViewInit() {\n        this.patchValueOfTheCalendarInput(this.calData);\n    }\n\n    ngOnInit(): void {\n        this.showTime = this.fieldConf.time;\n        if (this.showTime) {\n            this.locale.displayFormat = 'DD MMM HH:mm';\n        }\n        this.initDefaultDates();\n        this.settingsService.selectedLanguageSubject.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.patchValueOfTheCalendarInput(this.calData);\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['calData'] && changes['calData'].currentValue) {\n            if (changes['calData'].currentValue) {\n                this.patchValueOfTheCalendarInput(this.calData);\n            }\n        }\n    }\n\n    ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public onCalendarFieldFocus(field: string) {\n        if (this.platformService.isMobileDevice) {\n            const content = this.fieldConf.content;\n            let modalCssClass = this.isModalEditMode ? ['mob-second-search-modal'] : ['mob-main-modal'];\n            let modalTitle = 'SEARCH.TRIP_DATES';\n\n            if (content === this.calTypes.CAL_TRANSFER_TYPE || content === this.calTypes.CAL_RENTAL_TYPE) {\n                modalCssClass = ['mob-main-modal', 'mob-picker-modal'];\n                modalTitle = 'SEARCH.SELECT_DATE_AND_TIME';\n            }\n\n            const data = {\n                travelOption: this.travelType,\n                fieldConf: this.fieldConf,\n                searchData: this.searchData,\n                defaultValue: this.searchData[this.formField.field],\n                calendarData: this.searchData[this.formField.field],\n                selectedServices: this.selectedServices,\n                isModalEditMode: this.isModalEditMode,\n            };\n\n            if (content === this.calTypes.CAL_TRANSFER_TYPE || content === this.calTypes.CAL_RENTAL_TYPE) {\n                this.modalService\n                    .openDatePickerModal(TrazlerCalendarComponent, {\n                        data,\n                        title: modalTitle,\n                        cssClass: modalCssClass,\n                    })\n                    .then((modal: any) => {\n                        if (modal.data) {\n                            this.onApplyCalendarData({ newDates: modal.data.newDates, keepOpen: false });\n                        }\n                    });\n            } else {\n                this.modalService\n                    .createMainModal(TrazlerCalendarComponent, {\n                        data,\n                        title: modalTitle,\n                        cssClass: modalCssClass,\n                    })\n                    .then((modal: any) => {\n                        if (modal.data) {\n                            this.onApplyCalendarData({ newDates: modal.data.newDates, keepOpen: false });\n                        }\n                    });\n            }\n        } else {\n            this.searchData[field].showCalendar = true; //!this.searchData[field].showCalendar;\n            this.searchDropDownToggle.emit(true);\n        }\n    }\n\n    public onCalendarFieldBlur() {\n        this.searchDropDownToggle.emit(false);\n        this.searchData[this.formField.field].showCalendar = false;\n    }\n\n    public onApplyCalendarData($event: any): void {\n        const { keepOpen, newDates } = $event;\n        this.calData.showCalendar = keepOpen;\n        this.searchData[this.formField.field].showCalendar = true;\n        newDates.showCalendar = keepOpen;\n        if (!newDates.fromDate) {\n            this.calData.fromDate = '';\n            this.calData.toDate = '';\n            this.setDefaultCal();\n            this.setFieldInvalid();\n        } else {\n            this.calData = newDates;\n        }\n        this.dateSelected.emit({ selectedObj: this.calData, formField: this.formField });\n        this.patchValueOfTheCalendarInput(newDates);\n        if (!keepOpen) {\n            this.searchData[this.formField.field].showCalendar = true;\n            this.focusInvalid.emit();\n        }\n    }\n\n    public ngModelChange(event: any): void {\n        if (!event.startDate) {\n            this.calData.fromDate = '';\n            this.calData.toDate = '';\n            this.setDefaultCal();\n            this.setFieldInvalid();\n        } else {\n            const twoDatesRequired = this.calData.twoDates || this.fieldConf.dateRange === true;\n            this.calData.fromDate = event.startDate.format('YYYY-MM-DD');\n            if (twoDatesRequired) {\n                this.calData.toDate = event.endDate.format('YYYY-MM-DD');\n            }\n\n            if (this.showTime) {\n                this.calData.fromTime = event.startDate.format('HH:mm');\n\n                if (twoDatesRequired) {\n                    this.calData.toTime = event.endDate.format('HH:mm');\n                }\n            }\n        }\n        this.dateSelected.emit({ selectedObj: this.calData, formField: this.formField });\n        this.focusInvalid.emit();\n    }\n\n    public onClear() {\n        this.formGroup.controls[this.formField.field].reset();\n        this.resetSearch(this.formField.field);\n    }\n\n    private setDefaultCal(): void {\n        let defaultTime = '';\n\n        this.calData.travelOption = this.travelType;\n        this.calData.twoDates = this.travelType !== Trip.ONE_WAY;\n\n        if (this.fieldConf.defaultTime) {\n            defaultTime = this.fieldConf.defaultTime + ':00';\n            this.calData.fromTime = this.calData.fromTime ? this.calData.fromTime : defaultTime;\n            this.calData.toTime = this.calData.toTime ? this.calData.toTime : defaultTime;\n        }\n        this.patchValueOfTheCalendarInput(this.calData);\n    }\n\n    private initDefaultDates(): void {\n        this.setDefaultCal();\n        if (\n            this.searchData[this.formField.field] &&\n            (this.searchData[this.formField.field].fromDate || this.searchData[this.formField.field].toDate)\n        ) {\n            this.calData = { ...this.calData, ...this.searchData[this.formField.field] };\n        } else {\n            if (!this.showTime) {\n                this.setDefaultCal();\n            }\n        }\n    }\n\n    private patchValueOfTheCalendarInput(calData: any): void {\n        const control = this.formGroup.controls[this.formField.field];\n        const twoDates = CalendarUtilsService.isTwoDates(\n            this.fieldConf.dateRange,\n            this.travelType,\n            this.searchDataService.hasAcc()\n        );\n        const transferCal = this.fieldConf.content === this.calTypes.CAL_TRANSFER_TYPE;\n        const transferRoundTrip = transferCal && calData.tripType === Trip.ROUND_TRIP;\n\n        if (\n            ((!transferCal && twoDates) || transferRoundTrip) &&\n            !calData.toDate &&\n            control.validator !== null /*&&\n            ((calData.tripType !== undefined && calData.tripType !== Trip.ONE_WAY) ||\n                (calData.tripType === undefined && this.travelType !== Trip.ONE_WAY))*/\n        ) {\n            this.setFieldInvalid();\n        } else {\n            const data: any = {};\n            data[this.formField.field] = this.dateString(calData);\n            this.formGroup.patchValue(data);\n        }\n    }\n\n    private resetSearch(str: string): void {\n        this.searchData[str] = {\n            fromDate: '',\n            toDate: '',\n            showCalendar: true,\n            updateTime: false,\n            fromDisplayStr: '',\n            toDisplayStr: '',\n            businessMeeting: false,\n            preferBC: false,\n            translator: false,\n            travelOption: 'roundTrip',\n            displayStr: '',\n        };\n    }\n\n    private setFieldInvalid(): void {\n        queueMicrotask(() => {\n            this.formGroup.controls[this.formField.field].setErrors({ invalid: true });\n        });\n    }\n\n    private dateString(calData: any): string {\n        return this.datesService.getCalendarDateString(\n            calData.fromDate,\n            calData.toDate,\n            calData.diplayStr,\n            this.fieldConf,\n            this.calData.fromTime,\n            this.calData.toTime,\n            this.travelType\n        );\n    }\n}\n","<div [formGroup]=\"formGroup\" class=\"input-field-component calendar\" [ngClass]=\"formField.fieldType\">\n    <input\n        no-calendar-close\n        data-test=\"result-page-searchBar-trip-dates\"\n        type=\"text\"\n        [formControlName]=\"formField.field\"\n        readonly\n        [class]=\"{\n            'optional-field': fieldConf.optional,\n            'hide-cal': !readonly,\n            mob: platformService.isMobileDevice\n        }\"\n        [placeholder]=\"fieldConf.placeholder | translate\"\n        tzFieldNavigation\n        [attr.id]=\"'tabIdx' + formField.tabOrder\"\n        [attr.calId]=\"'gen' + formField.confIdx\"\n        [attr.optionalField]=\"fieldConf.optional\"\n        [fieldType]=\"formField.fieldType\"\n        [tabindex]=\"formField.tabOrder\"\n        [searchFormGroup]=\"formGroup\"\n        [controllerName]=\"formField.field\"\n        (focus)=\"onCalendarFieldFocus(formField.field)\"\n        (closeField)=\"onCalendarFieldBlur()\"\n    />\n    <div\n        *ngIf=\"platformService.isMobileDevice\"\n        [attr.calId]=\"'gen' + formField.confIdx\"\n        no-calendar-close\n        class=\"field-icon\"\n    >\n        <tz-svg-icon icon=\"clarity_date-line\" [mobile]=\"true\"></tz-svg-icon>\n    </div>\n    <div\n        *ngIf=\"!platformService.isMobileDevice\"\n        [attr.calId]=\"'gen' + formField.confIdx\"\n        no-calendar-close\n        class=\"field-icon tz-icon-date_range\"\n    ></div>\n    <tz-trazler-calendar\n        *ngIf=\"searchData[formField.field]?.showCalendar && !platformService.isMobileDevice\"\n        no-calendar-close\n        id=\"gen{{ formField.confIdx }}\"\n        [attr.calId]=\"'gen' + formField.confIdx\"\n        [calendarId]=\"'gen' + formField.confIdx\"\n        [search]=\"searchData\"\n        [defaultValue]=\"searchData[formField.field]\"\n        [calendarData]=\"searchData[formField.field]\"\n        [calendarConf]=\"fieldConf\"\n        (hideCalDropdown)=\"onCalendarFieldBlur()\"\n        (clear)=\"onClear()\"\n        (apply)=\"onApplyCalendarData($event)\"\n        [travelOption]=\"travelType\"\n        [selectedServices]=\"selectedServices\"\n    >\n    </tz-trazler-calendar>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SearchAddress } from '@schemas/modules/core/search-address';\n\n@Component({\n    selector: 'tz-mob-loc-field-results',\n    templateUrl: './mob-loc-field-results.component.html',\n    styleUrls: ['./mob-loc-field-results.component.scss'],\n})\nexport class MobLocFieldResultsComponent implements OnInit {\n    @Input() results: SearchAddress[] = [];\n    @Input() text = '';\n    @Input() isInputFocused!: boolean;\n    @Input() inputValue!: string;\n    @Input() fieldName!: string;\n    @Output() selectItem: EventEmitter<SearchAddress> = new EventEmitter<SearchAddress>();\n\n    constructor() {}\n\n    ngOnInit() {}\n\n    public onSelectItem(item: SearchAddress): void {\n        this.selectItem.emit(item);\n    }\n}\n","<div\n    *ngFor=\"let item of results; let first = first\"\n    class=\"loc-filed-results\"\n    [ngClass]=\"{ 'loc-filed-results-focused': inputValue }\"\n>\n    <a\n        class=\"loc-filed-results__item loc-filed-results__item-my-location\"\n        *ngIf=\"item.isMyLocation\"\n        (click)=\"onSelectItem(item)\"\n    >\n        <div class=\"loc-text-overflow-block\">\n            <div class=\"tz-icon-map_loc\"></div>\n\n            <div class=\"item-my-location-title loc-text-overflow-block\">\n                <div class=\"loc-text-overflow\">\n                    {{ item.displayStr ? item.displayStr : ('SEARCH.MY_LOCATION' | translate) }}\n                </div>\n            </div>\n        </div>\n    </a>\n\n    <div\n        *ngIf=\"\n            first &&\n            !isInputFocused &&\n            !inputValue &&\n            ((results.length > 1 && fieldName === 'from') || (results.length > 0 && fieldName === 'to'))\n        \"\n        class=\"recent-searches-text\"\n    >\n        {{ 'SEARCH.RECENT_SEARCHES' | translate }}\n    </div>\n\n    <a\n        *ngIf=\"!item.isMyLocation && ((isInputFocused && inputValue) || !isInputFocused)\"\n        [ngClass]=\"{ 'selected-address': item.selectedAddress }\"\n        class=\"loc-filed-results__item\"\n        (click)=\"onSelectItem(item)\"\n    >\n        <ng-container *ngIf=\"item.api_source === 'sac'\">\n            <div *ngIf=\"item.isCityHeader\" class=\"loc-text-overflow-block\">\n                <div class=\"tz-icon-{{ item.isCached ? 'restore' : 'location' }}\"></div>\n\n                <div class=\"loc-text-overflow-block\">\n                    <div class=\"loc-text-overflow\">\n                        {{ item.cityName + ', ' + item.country }}\n                    </div>\n                </div>\n            </div>\n\n            <div *ngIf=\"item.isHeader && item.stationType === 'airports'\" class=\"loc-text-overflow-block\">\n                <div class=\"tz-icon-{{ item.isCached ? 'restore' : 'service-flight' }}\"></div>\n\n                <div class=\"loc-text-overflow-block\">\n                    <div class=\"loc-text-overflow\">\n                        {{ item.cityName + ' &#8212; ' + item.All_airports }}\n                    </div>\n                </div>\n            </div>\n\n            <div *ngIf=\"item.isHeader && item.stationType === 'rail_stations'\" class=\"loc-text-overflow-block\">\n                <div class=\"tz-icon-{{ item.isCached ? 'restore' : 'train' }}\"></div>\n\n                <div class=\"loc-text-overflow-block\">\n                    <div class=\"loc-text-overflow\">\n                        {{ item.cityName + ' &#8212; ' + item.All_trains }}\n                    </div>\n                </div>\n            </div>\n\n            <div\n                *ngIf=\"item.stationType && item.stationType !== 'city' && !item.isHeader && !item.isCityHeader\"\n                class=\"loc-text-overflow-block\"\n                [class]=\"{\n                    'pl-16': !item.isCached && item.isSingleStation,\n                    'pl-no-icon': !item.isCached && !item.isSingleStation\n                }\"\n            >\n                <div *ngIf=\"item.isCached\" class=\"tz-icon-restore\"></div>\n                <div *ngIf=\"!item.isCached && item.isSingleStation\">\n                    <div *ngIf=\"item.stationType === 'airport'\" class=\"tz-icon-service-flight\"></div>\n                    <div *ngIf=\"item.stationType === 'rail_station'\" class=\"tz-icon-service-train\"></div>\n                </div>\n\n                <div class=\"loc-text-overflow-block\">\n                    <div class=\"loc-text-overflow\">{{ item.cityName + ' ' + item.code + ', ' + item.name }}</div>\n                </div>\n            </div>\n\n            <div\n                *ngIf=\"item.stationType === 'city' && !item.isHeader && !item.isCityHeader\"\n                class=\"loc-text-overflow-block\"\n            >\n                <div class=\"tz-icon-{{ item.isCached ? 'restore' : 'location' }}\"></div>\n\n                <div class=\"loc-text-overflow-block\">\n                    <div class=\"loc-text-overflow\">{{ item.name }}</div>\n                </div>\n            </div>\n        </ng-container>\n\n        <div *ngIf=\"item.stationType === '' || item.api_source !== 'sac'\" class=\"loc-text-overflow-block\">\n            <div *ngIf=\"item.isCached\" class=\"tz-icon-restore\"></div>\n            <div *ngIf=\"!item.isCached\">\n                <div *ngIf=\"!item.icon || item.icon === 'location'\" class=\"tz-icon-location\"></div>\n                <div *ngIf=\"item.icon === 'compass'\" class=\"tz-icon-compass\"></div>\n                <div *ngIf=\"item.icon === 'search'\" class=\"tz-icon-search_txt\"></div>\n                <div *ngIf=\"item.icon === 'flight'\" class=\"tz-icon-service-flight\"></div>\n                <div *ngIf=\"item.icon === 'train'\" class=\"tz-icon-service-train\"></div>\n                <div *ngIf=\"item.icon === 'car'\" class=\"tz-icon-service-rental\"></div>\n                <div *ngIf=\"item.icon === 'hotel'\" class=\"tz-icon-service-hotel\"></div>\n            </div>\n\n            <div class=\"loc-text-overflow-block\">\n                <div class=\"loc-text-overflow\">\n                    {{ item.api_source !== 'sac' ? item.longDescription : item.name }}\n                </div>\n            </div>\n        </div>\n        <!--        <tz-icon *ngIf=\"item.selectedAddress\" icon=\"dropdown-checked\" class=\"selected-location\"></tz-icon>-->\n    </a>\n</div>\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Trip } from '@core/constants/trip';\nimport { CalTypes } from '@core/constants/call-types.const';\nimport * as moment from 'moment';\nimport { ModalService } from '@services/modal.service';\nimport { MbscDatepicker } from '@mobiscroll/angular';\nimport { SettingsService } from '@services/services/settings-service';\nimport { localeEn, localeFr, localeEnGB } from '@mobiscroll/angular';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { CalendarConf } from '@core/constants/calendar-conf';\n\n@Component({\n    selector: 'tz-datetime-calendar',\n    templateUrl: './datetime-calendar.component.html',\n    styleUrls: ['./datetime-calendar.component.scss'],\n})\nexport class DatetimeCalendarComponent implements OnInit, OnDestroy {\n    @Input() calendarType!: string;\n    @Input() search: any;\n    @Input() defaultValue:\n        | {\n              displayStr: string;\n              fromDate: string;\n              fromTime: string;\n              showCalendar: boolean;\n              toDate: string | null;\n              toDisplayStr: string;\n              toTime: string | null;\n              tripType: 'roundTrip' | 'oneWay';\n              twoDates: boolean;\n          }\n        | undefined;\n    @Input() travelOption: string | Trip = Trip.ONE_WAY;\n    @Input() content = CalTypes.CAL_TRIP_TYPE;\n    @Input() calendarConf: any = CalendarConf;\n\n    public calendarDefaultValue: any = [new Date(), null];\n    public locale = localeEn;\n    public minDate: any = moment().add(10, 'minutes');\n    public maxDate: any;\n\n    private selectedDateTimeArr: Date[] | undefined;\n    private calType = CalTypes;\n    private destroy$: Subject<boolean> = new Subject<boolean>();\n\n    constructor(private modalService: ModalService, private settingsService: SettingsService) {}\n\n    get isCarCalendar(): boolean {\n        return this.calendarType === this.calType.CAL_RENTAL_TYPE;\n    }\n\n    get isTransferCalendar(): boolean {\n        return this.calendarType === this.calType.CAL_TRANSFER_TYPE;\n    }\n\n    get startLabel(): string {\n        if (this.isCarCalendar) {\n            return 'GENERAL.PICK_UP_TIME';\n        }\n\n        return 'GENERAL.Depart';\n    }\n\n    get endLabel(): string {\n        if (this.isCarCalendar) {\n            return 'GENERAL.DROP_OFF_TIME';\n        }\n\n        return 'GENERAL.Return';\n    }\n\n    get isCalendarValueInvalid() {\n        if (\n            this.isCarCalendar &&\n            this.selectedDateTimeArr &&\n            this.selectedDateTimeArr[0] &&\n            this.selectedDateTimeArr[1]\n        ) {\n            return false;\n        }\n\n        if (!this.isCarCalendar && this.selectedDateTimeArr && this.selectedDateTimeArr[0]) {\n            if (\n                !this.isCarCalendar &&\n                this.selectedDateTimeArr &&\n                this.minDate &&\n                this.maxDate &&\n                (!this.selectedDateTimeArr[0] || !this.selectedDateTimeArr[1])\n            ) {\n                return true;\n            }\n\n            return false;\n        }\n\n        return true;\n    }\n\n    ngOnInit() {\n        this.setDefaultValue();\n        this.langChange();\n        this.setMinMaxDate();\n    }\n\n    ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public onChange(event: { inst: MbscDatepicker; value: Date[] }): void {\n        this.selectedDateTimeArr = event.value;\n    }\n\n    public onSetDateTime(): void {\n        if (!this.selectedDateTimeArr?.length || this.isCalendarValueInvalid) {\n            return;\n        }\n\n        const fromDateTime = this.selectedDateTimeArr[0];\n        const toDateTime = this.selectedDateTimeArr[1] ? this.selectedDateTimeArr[1] : null;\n\n        const fromDateTimeMoment = moment(fromDateTime);\n        const toDateTimeMoment = toDateTime ? moment(toDateTime) : null;\n        const tripType = toDateTimeMoment ? 'roundTrip' : 'oneWay';\n\n        const data = {\n            displayStr: fromDateTimeMoment.format('YYYY-MM-DD'),\n            fromDate: fromDateTimeMoment.format('YYYY-MM-DD'),\n            fromTime: fromDateTimeMoment.format('HH:mm'),\n            toDate: toDateTimeMoment ? toDateTimeMoment.format('YYYY-MM-DD') : null,\n            toDisplayStr: '',\n            tripType,\n            toTime: toDateTimeMoment ? toDateTimeMoment.format('HH:mm') : null,\n            twoDates: !!toDateTimeMoment,\n        };\n\n        this.modalService.dismiss({ newDates: data });\n    }\n\n    public onCloseModal(): void {\n        this.modalService.dismiss();\n    }\n\n    private setDefaultValue(): void {\n        if (this.defaultValue && !this.defaultValue.fromDate) {\n            this.calendarDefaultValue = [new Date(), null];\n            return;\n        }\n\n        if (this.defaultValue) {\n            const fromDateTime = moment(this.defaultValue?.fromDate + ' ' + this.defaultValue.fromTime);\n            const toDateTime = moment(this.defaultValue?.toDate + ' ' + this.defaultValue.toTime);\n\n            this.calendarDefaultValue = [fromDateTime];\n\n            if (toDateTime) {\n                this.calendarDefaultValue.push(toDateTime);\n            }\n\n            this.selectedDateTimeArr = this.calendarDefaultValue;\n        }\n    }\n\n    private setLang(): void {\n        if (this.settingsService.i18nCode === 'en-us') {\n            this.locale = localeEn;\n        }\n\n        if (this.settingsService.i18nCode === 'en-gb') {\n            this.locale = localeEnGB;\n        }\n\n        if (this.settingsService.i18nCode === 'fr-fr') {\n            this.locale = localeFr;\n        }\n    }\n\n    private langChange(): void {\n        this.settingsService.selectedLanguageSubject.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.setLang();\n        });\n    }\n\n    private setMinMaxDate(): void {\n        const calendarConf = this.calendarConf;\n        const search = this.search;\n\n        if (!calendarConf.linked) {\n            return;\n        }\n\n        for (const dep in calendarConf.linked) {\n            if (search[calendarConf.linked[dep]]) {\n                switch (dep) {\n                    case 'fromDate':\n                        if (search[calendarConf.linked[dep]].fromDate) {\n                            this.minDate = new Date(search[calendarConf.linked[dep]].fromDate);\n                        }\n                        break;\n                    case 'toDate':\n                        if (search[calendarConf.linked[dep]].toDate) {\n                            this.maxDate = new Date(search[calendarConf.linked[dep]].toDate);\n                        }\n                        break;\n                }\n            }\n        }\n    }\n}\n","<tz-mob-main-modal-header (closeModal)=\"onCloseModal()\"></tz-mob-main-modal-header>\n\n<div class=\"datetime-calendar-wrapper\">\n    <div class=\"datetime-calendar-container tz-datetime-calendar\">\n        <mbsc-datepicker\n            [controls]=\"['datetime']\"\n            select=\"range\"\n            [touchUi]=\"true\"\n            display=\"inline\"\n            (onChange)=\"onChange($event)\"\n            [inRangeInvalid]=\"false\"\n            [rangeEndInvalid]=\"false\"\n            [rangeStartLabel]=\"startLabel | translate\"\n            [rangeEndLabel]=\"endLabel | translate\"\n            [maxRange]=\"7260000000\"\n            [rangeStartHelp]=\"'SELECT_DATE_AND_TIME' | translate\"\n            [rangeEndHelp]=\"'SELECT_DATE_AND_TIME' | translate\"\n            dateFormat=\"DD MMM, YYYY\"\n            timeFormat=\"HH:mm\"\n            timeWheels=\"HH:mm\"\n            [stepMinute]=\"10\"\n            [(ngModel)]=\"calendarDefaultValue\"\n            [locale]=\"locale\"\n            [min]=\"minDate\"\n            [max]=\"maxDate\"\n        ></mbsc-datepicker>\n    </div>\n\n    <div class=\"datetime-calendar-footer\">\n        <button\n            [class.datetime-calendar-select-btn--disable]=\"isCalendarValueInvalid\"\n            class=\"datetime-calendar-select-btn\"\n            (click)=\"onSetDateTime()\"\n        >\n            {{ 'GENERAL.Apply' | translate }}\n        </button>\n    </div>\n</div>\n","import { Directive, ElementRef, EventEmitter, HostListener, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { KeyType, TzFocusType } from '@core/constants/keyboard-key-types.const';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { ListenerId } from '@core/constants/listener-id.const';\n\nconst fieldTypes = {\n    ADDR_TYPE: 'loc-field',\n    CAL_TYPE: 'cal',\n    PERSON_TYPE: 'person',\n    SEARCH_TYPE: 'searchButton',\n    OPTIONAL: 'optionalfield',\n};\nconst ID_PREFIX = '#tabIdx';\nconst SEARCH_BUTTON_IDX = 9;\ntype focusHandler = { id: string; checkCurrentField: boolean; moveTo: number };\n\n@Directive({\n    selector: '[tzFieldNavigation]',\n})\nexport class FieldNavigationDirective implements OnInit, OnDestroy {\n    @Input() tabindex!: number;\n    @Input() searchFormGroup = new FormGroup({});\n    @Input() controllerName = '';\n    @Input() fieldType = '';\n    @Input() ignoreEnterKey = false;\n\n    @Output() closeField = new EventEmitter<void>();\n\n    private keyBoardEvent!: KeyboardEvent;\n    private focusNextListenerId = -1;\n    private currentField!: HTMLElement;\n\n    constructor(private EleRef: ElementRef, private listenersService: ListenersService) {\n        this.currentField = this.EleRef.nativeElement as HTMLElement;\n    }\n\n    @HostListener('document:keydown', ['$event'])\n    onKeyUp(event: KeyboardEvent) {\n        this.keyBoardEvent = event;\n\n        const targetElement = (this.keyBoardEvent.target || this.keyBoardEvent.currentTarget) as HTMLElement;\n        this.handleKeyBoardEvent(event.key, {\n            id: targetElement.id,\n        } as focusHandler);\n    }\n\n    ngOnInit(): void {\n        this.focusNextListenerId = this.listenersService.registerListener(\n            ListenerId.LISTEN_FOCUS_NEXT,\n            this.moveNext,\n            this\n        );\n    }\n\n    ngOnDestroy(): void {\n        if (this.focusNextListenerId !== -1) {\n            this.listenersService.unregisterListener(this.focusNextListenerId);\n        }\n    }\n\n    private getNextField(nextIndex: number, inc: number): HTMLElement {\n        const nextInput = document.querySelector(ID_PREFIX + nextIndex) as HTMLElement;\n\n        if (nextInput && nextInput.getAttribute(fieldTypes.OPTIONAL) === 'true') {\n            // next element is optional and empty let's move to next one\n            return this.getNextField(nextIndex + inc, inc);\n        }\n\n        if (!nextInput) {\n            if (nextIndex >= SEARCH_BUTTON_IDX) {\n                // move to search button with id = ID_PREFIX + SEARCH_BUTTON_IDX\n                return document.querySelector(ID_PREFIX + SEARCH_BUTTON_IDX) as HTMLElement;\n            } else if (nextIndex !== 0) {\n                return this.getNextField(nextIndex + inc, inc);\n            }\n        }\n\n        return nextInput;\n    }\n\n    //close current field popup\n    private closeCurrentField(): void {\n        requestAnimationFrame(() => {\n            this.closeField.emit();\n            this.currentField.blur();\n            this.currentField.dispatchEvent(\n                new KeyboardEvent('keydown', {\n                    keyCode: 27,\n                    bubbles: true,\n                })\n            );\n        });\n    }\n\n    private getNextTabIndex(keyType: string | number): number | undefined {\n        let inc = 0;\n        const locationSelected = (): boolean => {\n            const fieldValue = this.searchFormGroup.controls[this.controllerName].value;\n            return typeof fieldValue === 'object' || fieldValue === '';\n        };\n\n        switch (keyType) {\n            case KeyType.ENTER:\n                if (this.ignoreEnterKey) {\n                    return;\n                }\n\n                if (this.tabindex === SEARCH_BUTTON_IDX) {\n                    // sendEvent(el, 'click');\n                    return;\n                } else {\n                    inc = 1;\n                }\n                break;\n\n            case KeyType.RIGHT_ARROW:\n                if (this.fieldType === fieldTypes.ADDR_TYPE && !locationSelected()) {\n                    return;\n                }\n            /* fallthrough */\n            case TzFocusType.MOVE_NEXT:\n                inc = 1;\n                break;\n\n            case KeyType.LEFT_ARROW:\n                if (this.fieldType === fieldTypes.ADDR_TYPE && !locationSelected()) {\n                    return;\n                }\n\n                inc = -1;\n                break;\n\n            case KeyType.TAB:\n                if (this.keyBoardEvent.shiftKey) {\n                    inc = -1;\n                } else {\n                    inc = 1;\n                }\n                break;\n\n            case KeyType.ESCAPE:\n                this.closeCurrentField();\n                return;\n\n            case TzFocusType.MOVE_TO_INVALID:\n                break;\n\n            default:\n                return;\n        }\n\n        return inc;\n    }\n\n    private handleKeyBoardEvent(keyType: string | number, handlerObj: focusHandler): void {\n        const isCurrentElement = handlerObj.id === this.currentField.id;\n        const hasTabIndex = this.tabindex;\n        if (!isCurrentElement || !hasTabIndex) {\n            return;\n        }\n\n        const inc = this.getNextTabIndex(keyType);\n        if (inc === undefined) {\n            return;\n        }\n\n        const nextFieldIndex = this.tabindex + inc;\n        let nextField = this.getNextField(nextFieldIndex, inc);\n        if (!nextField) {\n            return;\n        }\n\n        this.closeCurrentField();\n\n        const focusSearchBtn =\n            this.fieldType === fieldTypes.PERSON_TYPE &&\n            this.searchFormGroup.valid &&\n            nextField.id === 'tabIdx' + SEARCH_BUTTON_IDX;\n        if (focusSearchBtn) {\n            requestAnimationFrame(() => {\n                nextField.focus();\n            });\n            return;\n        }\n\n        if (this.fieldType === fieldTypes.CAL_TYPE && keyType === KeyType.ENTER) {\n            keyType = TzFocusType.MOVE_TO_INVALID;\n            handlerObj.checkCurrentField = true;\n        }\n\n        if (keyType === TzFocusType.MOVE_NEXT || keyType === TzFocusType.MOVE_TO_INVALID) {\n            const listenerObj = {\n                id: nextField.id,\n                checkCurrentField: true,\n            };\n\n            if (handlerObj?.checkCurrentField) {\n                const isCurrentFieldValid =\n                    (this.fieldType === fieldTypes.PERSON_TYPE && this.searchFormGroup.valid) ||\n                    (this.fieldType !== fieldTypes.PERSON_TYPE &&\n                        this.searchFormGroup.controls[this.controllerName].valid); /*&&\n                        (this.fieldType !== fieldTypes.ADDR_TYPE ||\n                            (this.fieldType === fieldTypes.ADDR_TYPE &&\n                                typeof this.searchFormGroup.controls[this.controllerName].value === 'object'))*/\n                if (isCurrentFieldValid) {\n                    this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, listenerObj);\n                    return;\n                }\n\n                nextField = this.currentField;\n            } else {\n                this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, listenerObj);\n                return;\n            }\n        }\n\n        requestAnimationFrame(() => {\n            nextField.click();\n            nextField.focus();\n        });\n    }\n\n    private moveNext(handlerObj: focusHandler) {\n        if (!handlerObj || this.currentField.id !== handlerObj.id) {\n            return;\n        }\n\n        this.handleKeyBoardEvent(\n            handlerObj.moveTo === TzFocusType.MOVE_TO_INVALID ? TzFocusType.MOVE_TO_INVALID : TzFocusType.MOVE_NEXT,\n            handlerObj\n        );\n    }\n}\n","import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    OnInit,\n    ElementRef,\n    ViewChild,\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    OnDestroy,\n} from '@angular/core';\nimport { Observable, Subject, merge } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap, takeUntil } from 'rxjs/operators';\n\nimport { AddressService } from '@services/modules/services/address-service';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { SearchAddress, SearchConfigOrder } from '@schemas/modules/core/search-address';\nimport { FormGroup } from '@angular/forms';\nimport { ScreenDetectorService } from '@services/screen-detector.service';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { ListenerId } from '@core/constants/listener-id.const';\nimport { TzFocusType } from '@core/constants/keyboard-key-types.const';\nimport { DialogService } from '@services/dialog.service';\n\nconst defaultPlacement = 'bottom-left | bottom-right | top-left | top-right';\n\n@Component({\n    selector: 'tz-loc-field',\n    templateUrl: './loc-field.component.html',\n    styleUrls: ['./loc-field.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LocFieldComponent implements OnInit, AfterViewInit, OnDestroy {\n    @Input() htmlConf: any;\n    @Input() formGroup = new FormGroup({});\n    @Input() searchData: any;\n    @Input() formField!: SearchConfigOrder;\n    @Input() readonly = false;\n    @Input() editMode = false;\n    @Output() locSelected = new EventEmitter<{ selectedObj: any; formField: any }>();\n    @Output() invertFromTo = new EventEmitter<void>();\n    @Output() searchDropDownToggle: EventEmitter<boolean> = new EventEmitter<boolean>();\n    @ViewChild('locField') fieldRef!: ElementRef<HTMLInputElement>;\n\n    public dropdownPlacement = defaultPlacement;\n    public fieldConf: any;\n    focus$ = new Subject<string>();\n\n    private inputValue = '';\n    private locationSelected = false;\n    private destroy$: Subject<boolean> = new Subject<boolean>();\n\n    constructor(\n        private addressService: AddressService,\n        private screenSizeDetectorService: ScreenDetectorService,\n        private listenersService: ListenersService,\n        private dialogService: DialogService\n    ) {}\n\n    get showInvertBtn(): boolean {\n        return (\n            this.formField.field === 'to' &&\n            this.fieldConf &&\n            this.fieldConf.mainOrder === 2 &&\n            this.searchData.from?.displayStr &&\n            this.searchData.to.displayStr\n        );\n    }\n\n    private static getNewInput(displayStr: string, selectedStr: string): string | undefined {\n        for (let i = 0; i < selectedStr.length; i++) {\n            if (selectedStr[i] !== displayStr[i]) {\n                return displayStr[i];\n            }\n        }\n        return undefined;\n    }\n\n    ngOnInit(): void {\n        this.fieldConf = this.htmlConf[this.formField.confIdx][this.formField.field];\n        this.screenSizeDetectorService.isMobile.subscribe((isMobile) => {\n            if (isMobile) {\n                this.dropdownPlacement = this.formField.fieldOrder % 2 === 0 ? 'bottom-right' : 'bottom-left';\n            } else {\n                this.dropdownPlacement = this.formField.fieldOrder > 2 ? 'bottom-right' : 'bottom-left';\n            }\n        });\n    }\n\n    ngAfterViewInit(): void {\n        if (this.searchData[this.formField.field] && this.searchData[this.formField.field].displayStr) {\n            const displayStr = this.searchData[this.formField.field].displayStr;\n            this.fieldRef.nativeElement.value = displayStr;\n            this.inputValue = displayStr;\n        } else {\n            this.fieldRef.nativeElement.value = '';\n            this.inputValue = '';\n        }\n\n        const field = this.formGroup.controls[this.formField.field];\n        field?.valueChanges?.subscribe(() => {\n            if (!field?.value) {\n                return;\n            }\n\n            if (field.value?.displayStr && field.value.displayStr !== '') {\n                this.inputValue = field.value?.displayStr;\n            }\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public search = (text$: Observable<string>): Observable<any> => {\n        const inputFocus$ = this.focus$;\n        const debouncedText$ = text$.pipe(debounceTime(300), distinctUntilChanged());\n\n        return merge(debouncedText$, inputFocus$).pipe(\n            switchMap((term) =>\n                this.addressService.getTypeAheadList(term, this.formField, this.fieldConf, this.searchData)\n            )\n        );\n    };\n\n    public invertFieldVals(): void {\n        this.invertFromTo.emit();\n    }\n\n    public onInputFocus(): void {\n        this.searchDropDownToggle.emit(true);\n    }\n\n    // To clear input value on blur if it's not been selected from dropdown\n    public clearInputTxt(clear: boolean): void {\n        this.searchDropDownToggle.emit(false);\n\n        this.fieldRef.nativeElement.dispatchEvent(\n            new KeyboardEvent('keydown', {\n                keyCode: 27,\n                bubbles: true,\n            })\n        );\n\n        if (this.locationSelected) {\n            return;\n        }\n\n        const selectedData = this.searchData[this.formField.field];\n        if (clear || !selectedData || !selectedData.placeId || selectedData.placeId === '') {\n            this.fieldRef.nativeElement.value = '';\n            this.updateSearch({\n                selectedObj: SearchDataService.getNewLoc(),\n                formField: this.formField,\n            });\n        }\n\n        if (clear) {\n            this.fieldRef.nativeElement.click();\n            this.fieldRef.nativeElement.focus();\n        }\n\n        if ((this.editMode || this.fieldRef.nativeElement.value !== '') && !clear) {\n            this.fieldRef.nativeElement.value = this.inputValue;\n        }\n    }\n\n    public itemSelected(selectedObj: { item: any; preventDefault: any }): void {\n        this.locationSelected = true;\n        if (selectedObj.item.isMyLocation) {\n            const updateUserLocation = (address: SearchAddress) => {\n                this.inputValue = address.displayStr;\n                this.updateSearch({\n                    selectedObj: address,\n                    formField: this.formField,\n                });\n\n                requestAnimationFrame(() => {\n                    this.formGroup.controls[this.formField.field].setValue(address);\n                    this.focusNextField();\n                });\n            };\n\n            if (selectedObj.item.placeId) {\n                updateUserLocation(selectedObj.item);\n                return;\n            }\n\n            this.addressService\n                .checkGeoLocationAllowed()\n                .pipe(takeUntil(this.destroy$))\n                .subscribe(\n                    (currentLocationInfo) => {\n                        updateUserLocation(currentLocationInfo);\n                    },\n                    (error) => {\n                        this.formGroup.controls[this.formField.field].reset();\n                        this.dialogService.openSnackBar({ message: error });\n                        console.log('Error while fetching current location: ', error);\n                    }\n                );\n\n            return;\n        }\n\n        const isCachedAddress = selectedObj.item.isCached;\n        this.addressService.formSelectedAddress(selectedObj.item, this.htmlConf, this.fieldConf, this.searchData).then(\n            (res: any) => {\n                this.updateLocData(selectedObj, res);\n                this.inputValue = res.displayStr;\n                this.addressService.cacheSelectedLocation(\n                    { ...selectedObj.item, ...res },\n                    this.formField,\n                    this.fieldConf\n                );\n\n                if (!isCachedAddress) {\n                    requestAnimationFrame(() => {\n                        this.focusNextField();\n                    });\n                }\n            },\n            (res: any) => {\n                this.updateLocData(selectedObj, res);\n                this.locationSelected = false;\n                console.log('Fail: ', res);\n            }\n        );\n\n        if (isCachedAddress) {\n            this.focusNextField();\n        }\n    }\n\n    // TO format uib-data once selected\n    public formatter(obj: { displayStr: string } | string): string {\n        if (typeof obj === 'string') {\n            return obj;\n        } else if (obj.displayStr) {\n            return obj.displayStr;\n        } else {\n            return '';\n        }\n    }\n\n    //Reset already selected search data when we try to edit\n    public resetOnNewInput(): void {\n        const fieldVal = this.fieldRef.nativeElement.value;\n        const selectedData = this.searchData[this.formField.field];\n\n        if (!selectedData || !selectedData.selectedStr || fieldVal.trim() === selectedData.selectedStr.trim()) {\n            return;\n        }\n\n        let input = '';\n        const clearSelectedAddress = fieldVal.length > selectedData.selectedStr.length;\n        if (clearSelectedAddress) {\n            if (selectedData.selectedStr === fieldVal.substring(0, selectedData.selectedStr.length)) {\n                input = fieldVal[fieldVal.length - 1];\n            } else {\n                const newInput = LocFieldComponent.getNewInput(fieldVal, selectedData.selectedStr);\n                if (newInput) {\n                    input = newInput;\n                } else {\n                    return;\n                }\n            }\n        } else if (fieldVal.length < 3) {\n            input = fieldVal;\n        } else if (fieldVal.length <= selectedData.selectedStr.length) {\n            return;\n        }\n\n        const newLoc = SearchDataService.getNewLoc();\n        newLoc.displayStr = input;\n        this.updateSearch({\n            selectedObj: newLoc,\n            formField: this.formField,\n        });\n\n        this.inputValue = input;\n        this.fieldRef.nativeElement.value = this.inputValue;\n    }\n\n    private updateSearch(obj: { selectedObj: any; formField: any }): void {\n        if (!obj.selectedObj.placeId || obj.selectedObj.placeId === '') {\n            this.formGroup.controls[this.formField.field].reset();\n        }\n\n        this.locSelected.emit(obj);\n    }\n\n    private updateLocData(selectedObj: { item: any; preventDefault: any }, formedAddr: any): void {\n        if (!formedAddr) {\n            selectedObj.preventDefault();\n            formedAddr = SearchDataService.getNewLoc();\n        }\n\n        formedAddr.selectedStr = formedAddr && formedAddr.displayStr ? formedAddr.displayStr : '';\n        this.updateSearch({\n            selectedObj: formedAddr,\n            formField: this.formField,\n        });\n    }\n\n    private focusNextField(): void {\n        this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n            id: 'tabIdx' + this.formField.tabOrder,\n            moveTo: TzFocusType.MOVE_NEXT,\n        });\n        this.locationSelected = false;\n    }\n}\n","<div [formGroup]=\"formGroup\" class=\"input-field-component\" [ngClass]=\"{ 'show-invert': showInvertBtn }\">\n    <input\n        type=\"text\"\n        #locField\n        [formControlName]=\"formField.field\"\n        [class]=\"{ 'optional-field': fieldConf.optional }\"\n        [placeholder]=\"\n            (editMode && fieldConf.editPlaceHolder ? fieldConf.editPlaceHolder : fieldConf.placeholder) | translate\n        \"\n        [ngbTypeahead]=\"search\"\n        [resultTemplate]=\"locDropdown\"\n        popupClass=\"search-dropdown-menu\"\n        (blur)=\"clearInputTxt(false)\"\n        (focus)=\"focus$.next($any($event).target.value); onInputFocus()\"\n        [inputFormatter]=\"formatter\"\n        (selectItem)=\"itemSelected($event)\"\n        (input)=\"resetOnNewInput()\"\n        [placement]=\"dropdownPlacement\"\n        [attr.disabled]=\"readonly ? true : null\"\n        tzFieldNavigation\n        [attr.id]=\"'tabIdx' + formField.tabOrder\"\n        [attr.optionalField]=\"fieldConf.optional && (!editMode || !fieldConf.editMandatory)\"\n        [fieldType]=\"formField.fieldType\"\n        [tabindex]=\"formField.tabOrder\"\n        [searchFormGroup]=\"formGroup\"\n        [controllerName]=\"formField.field\"\n        data-test=\"flight-containers-from-to\"\n    />\n    <div\n        *ngIf=\"\n            !searchData[formField.field] || !searchData[formField.field].icon || searchData[formField.field].icon === ''\n        \"\n        class=\"field-icon tz-{{ fieldConf.icon }}\"\n    ></div>\n    <div\n        *ngIf=\"searchData[formField.field] && searchData[formField.field].icon !== ''\"\n        class=\"field-icon tz-icon-{{ searchData[formField.field].icon }}\"\n    ></div>\n    <div class=\"field-icon tz-icon-clear\" data-test=\"input-from-to-clear\" (click)=\"clearInputTxt(true)\"></div>\n    <div class=\"tz-icon-compare_arrows\" data-test=\"revers-flight\" (click)=\"invertFieldVals()\"></div>\n</div>\n\n<ng-template #locDropdown let-r=\"result\" let-t=\"term\">\n    <a *ngIf=\"r.isMyLocation\" data-test=\"from-my-location-button\">\n        <div class=\"full-width\">\n            <div class=\"tz-icon-map_loc\"></div>\n            <em>{{ 'SEARCH.MY_LOCATION' | translate }}</em>\n            <div *ngIf=\"r.showText\" class=\"my-loc-text\">{{ r.showText }}</div>\n        </div>\n    </a>\n    <a *ngIf=\"!r.isMyLocation\" [ngClass]=\"{ 'selected-address': r.selectedAddress }\">\n        <ng-container *ngIf=\"r.api_source === 'sac'\">\n            <div *ngIf=\"r.isCityHeader\">\n                <div class=\"tz-icon-{{ r.isCached ? 'restore' : 'location' }}\"></div>\n                <em> <ngb-highlight [result]=\"r.cityName + ', ' + r.country\" [term]=\"t\"></ngb-highlight> </em>\n            </div>\n            <div *ngIf=\"r.isHeader && r.stationType === 'airports'\" [class]=\"{ 'pl-16': !r.isCached }\">\n                <div class=\"tz-icon-{{ r.isCached ? 'restore' : 'service-flight' }}\"></div>\n                <em> <ngb-highlight [result]=\"r.cityName + ' - ' + r.All_airports\" [term]=\"t\"></ngb-highlight> </em>\n            </div>\n            <div *ngIf=\"r.isHeader && r.stationType === 'rail_stations'\" [class]=\"{ 'pl-16': !r.isCached }\">\n                <div class=\"tz-icon-{{ r.isCached ? 'restore' : 'service-train' }}\"></div>\n                <em> <ngb-highlight [result]=\"r.cityName + ' - ' + r.All_trains\" [term]=\"t\"></ngb-highlight> </em>\n            </div>\n\n            <div\n                *ngIf=\"r.stationType && r.stationType !== 'city' && !r.isHeader && !r.isCityHeader\"\n                [class]=\"{ 'pl-16': !r.isCached && r.isSingleStation, 'pl-no-icon': !r.isCached && !r.isSingleStation }\"\n            >\n                <div *ngIf=\"r.isCached\" class=\"tz-icon-restore\"></div>\n                <div *ngIf=\"!r.isCached && r.isSingleStation\">\n                    <div *ngIf=\"r.stationType === 'airport'\" class=\"tz-icon-service-flight\"></div>\n                    <div *ngIf=\"r.stationType === 'rail_station'\" class=\"tz-icon-service-train\"></div>\n                </div>\n                <em *ngIf=\"r.stationType && r.stationType !== 'rail_station'\">\n                    <ngb-highlight [result]=\"r.cityName + ' ' + r.code + ', '\" [term]=\"t\"></ngb-highlight>\n                </em>\n                <em> <ngb-highlight [result]=\"r.name\" [term]=\"t\"></ngb-highlight> </em>\n            </div>\n\n            <div *ngIf=\"r.stationType === 'city' && !r.isHeader && !r.isCityHeader\">\n                <div class=\"tz-icon-{{ r.isCached ? 'restore' : 'location' }}\"></div>\n                <em> <ngb-highlight [result]=\"r.name\" [term]=\"t\"></ngb-highlight> </em>\n            </div>\n        </ng-container>\n\n        <div *ngIf=\"r.stationType === '' || r.api_source !== 'sac'\">\n            <div *ngIf=\"r.isCached\" class=\"tz-icon-restore\"></div>\n            <div *ngIf=\"!r.isCached\">\n                <div *ngIf=\"!r.icon || r.icon === 'location'\" class=\"tz-icon-location\"></div>\n                <div *ngIf=\"r.icon === 'compass'\" class=\"tz-icon-compass\"></div>\n                <div *ngIf=\"r.icon === 'search'\" class=\"tz-icon-search_txt\"></div>\n                <div *ngIf=\"r.icon === 'flight'\" class=\"tz-icon-service-flight\"></div>\n                <div *ngIf=\"r.icon === 'train'\" class=\"tz-icon-service-train\"></div>\n                <div *ngIf=\"r.icon === 'car'\" class=\"tz-icon-service-rental\"></div>\n                <div *ngIf=\"r.icon === 'hotel'\" class=\"tz-icon-service-hotel\"></div>\n            </div>\n            <em>\n                <ngb-highlight\n                    [result]=\"r.api_source !== 'sac' ? r.longDescription : r.name\"\n                    [term]=\"t\"\n                ></ngb-highlight>\n            </em>\n        </div>\n        <tz-icon *ngIf=\"r.selectedAddress\" icon=\"dropdown-checked\" class=\"selected-location\"></tz-icon>\n    </a>\n</ng-template>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SearchConfigOrder } from '@schemas/modules/core/search-address';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'tz-mob-loc-field-modal',\n    templateUrl: './mob-loc-field-modal.component.html',\n    styleUrls: ['./mob-loc-field-modal.component.scss'],\n})\nexport class MobLocFieldModalComponent implements OnInit {\n    @Output() locFieldChange: EventEmitter<any> = new EventEmitter<any>();\n    @Input() data!: {\n        htmlConf: any;\n        formField: SearchConfigOrder;\n        formGroup: FormGroup;\n        searchData: any;\n        editMode: boolean;\n    };\n\n    constructor() {}\n\n    ngOnInit(): void {}\n}\n","<div class=\"mob-loc-field-modal\">\n    <tz-mob-loc-field\n        [isModal]=\"true\"\n        [htmlConf]=\"data.htmlConf\"\n        [formField]=\"data.formField\"\n        [formGroup]=\"data.formGroup\"\n        [searchData]=\"data.searchData\"\n        [editMode]=\"data.editMode\"\n    ></tz-mob-loc-field>\n</div>\n","import {\n    AfterViewInit,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnDestroy,\n    OnInit,\n    Output,\n    ViewChild,\n} from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { SearchAddress, SearchConfigOrder } from '@schemas/modules/core/search-address';\nimport { Subject } from 'rxjs';\nimport { AddressService } from '@services/modules/services/address-service';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { ScreenDetectorService } from '@services/screen-detector.service';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { DialogService } from '@services/dialog.service';\nimport { PlatformService } from '@services/platform.service';\nimport { ModalService } from '@services/modal.service';\nimport { debounceTime, distinctUntilChanged, takeUntil } from 'rxjs/operators';\nimport { ListenerId } from '@core/constants/listener-id.const';\nimport { TzFocusType } from '@core/constants/keyboard-key-types.const';\nimport { MobLocFieldModalComponent } from '../mob-loc-field-modal/mob-loc-field-modal.component';\n\n@Component({\n    selector: 'tz-mob-loc-field',\n    templateUrl: './mob-loc-field.component.html',\n    styleUrls: ['./mob-loc-field.component.scss'],\n})\nexport class MobLocFieldComponent implements OnInit, AfterViewInit, OnDestroy {\n    @Input() htmlConf: any;\n    @Input() isModal = false;\n    @Input() isLast = false;\n    @Input() editMode = false;\n    @Input() formGroup = new FormGroup({});\n    @Input() searchData!: any;\n    @Input() formField!: SearchConfigOrder;\n    @Output() locSelected = new EventEmitter<{ selectedObj: any; formField: any }>();\n    @Output() invertFromTo = new EventEmitter<void>();\n\n    @ViewChild('locField') fieldRef!: ElementRef<HTMLInputElement>;\n\n    public fieldConf: any;\n    public results: SearchAddress[] = [];\n    public focus$ = new Subject<string>();\n    public isInputFocused = false;\n    public inputValue = '';\n    private locationSelected = false;\n    private destroy$: Subject<boolean> = new Subject<boolean>();\n    private isModalOpen = false;\n    private isInputValueSet = false;\n\n    constructor(\n        private addressService: AddressService,\n        private searchDataService: SearchDataService,\n        private screenSizeDetectorService: ScreenDetectorService,\n        private listenersService: ListenersService,\n        private dialogService: DialogService,\n        public platformService: PlatformService,\n        private modalService: ModalService\n    ) {}\n\n    get showInvertBtn(): boolean {\n        return (\n            this.formField.field === 'to' &&\n            this.fieldConf &&\n            this.fieldConf.mainOrder === 2 &&\n            this.searchData.from?.displayStr &&\n            this.searchData.to?.displayStr\n        );\n    }\n\n    ngOnInit(): void {\n        this.fieldConf = this.htmlConf[this.formField.confIdx][this.formField.field];\n\n        this.initSearch();\n    }\n\n    ngAfterViewInit(): void {\n        this.setValuesForm();\n    }\n\n    ngOnDestroy(): void {\n        this.setValuesForm();\n\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public async onSearchClick() {\n        if (this.isModal || this.isModalOpen) {\n            return;\n        }\n\n        if (!this.isInputValueSet && !this.editMode) {\n            this.clearInputTxt(true);\n        }\n\n        this.isModalOpen = true;\n        const cssClass = this.editMode ? 'mob-second-search-modal' : 'mob-main-modal';\n\n        const modal = await this.modalService.createMainModal<{ data: SearchAddress | undefined }>(\n            MobLocFieldModalComponent,\n            {\n                data: {\n                    htmlConf: this.htmlConf,\n                    formGroup: this.formGroup,\n                    searchData: this.searchData,\n                    formField: this.formField,\n                    editMode: this.editMode,\n                },\n                cssClass,\n            }\n        );\n\n        this.isModalOpen = false;\n\n        if (modal.data) {\n            this.itemSelected({ item: modal.data });\n            this.formGroup.controls[this.formField.field].setValue(modal.data.displayStr);\n        }\n    }\n\n    public async onItemSelected(res: SearchAddress) {\n        await this.modalService.dismiss(res);\n    }\n\n    public invertFieldVals(): void {\n        this.invertFromTo.emit();\n    }\n\n    public onInputBlockClick(): void {\n        if (this.isModal) {\n            this.fieldRef.nativeElement.focus();\n        }\n    }\n\n    public clearInputTxt(clear: boolean): void {\n        this.fieldRef.nativeElement.dispatchEvent(\n            new KeyboardEvent('keydown', {\n                keyCode: 27,\n                bubbles: true,\n            })\n        );\n\n        if (this.locationSelected) {\n            return;\n        }\n\n        const selectedData = this.searchData[this.formField.field];\n        if (clear || !selectedData || !selectedData.placeId || selectedData.placeId === '') {\n            this.fieldRef.nativeElement.value = '';\n            this.updateSearch({\n                selectedObj: SearchDataService.getNewLoc(),\n                formField: this.formField,\n            });\n        }\n\n        if (this.fieldRef.nativeElement.value !== '' && !clear) {\n            this.fieldRef.nativeElement.value = this.inputValue;\n        }\n    }\n\n    public itemSelected(selectedObj: { item: SearchAddress }): void {\n        this.locationSelected = true;\n        this.isInputValueSet = true;\n        if (selectedObj.item.isMyLocation) {\n            const updateUserLocation = (address: SearchAddress) => {\n                this.inputValue = address.displayStr;\n                this.updateSearch({\n                    selectedObj: address,\n                    formField: this.formField,\n                });\n\n                requestAnimationFrame(() => {\n                    console.log('address');\n                    console.log(address);\n                    this.formGroup.controls[this.formField.field].setValue(address.selectedStr);\n                    this.focusNextField();\n                });\n            };\n\n            if (selectedObj.item.placeId) {\n                updateUserLocation(selectedObj.item);\n                return;\n            }\n\n            this.addressService\n                .checkGeoLocationAllowed()\n                .pipe(takeUntil(this.destroy$))\n                .subscribe(\n                    (currentLocationInfo) => {\n                        updateUserLocation(currentLocationInfo);\n                    },\n                    (error) => {\n                        this.formGroup.controls[this.formField.field].reset();\n                        this.dialogService.openSnackBar({ message: error });\n                        console.log('Error while fetching current location: ', error);\n                    }\n                );\n\n            return;\n        }\n\n        const isCachedAddress = selectedObj.item.isCached;\n        this.addressService.formSelectedAddress(selectedObj.item, this.htmlConf, this.fieldConf, this.searchData).then(\n            (res: any) => {\n                this.updateLocData(res);\n                this.inputValue = res.displayStr;\n                this.addressService.cacheSelectedLocation(\n                    { ...selectedObj.item, ...res },\n                    this.formField,\n                    this.fieldConf\n                );\n\n                if (!isCachedAddress) {\n                    requestAnimationFrame(() => {\n                        this.focusNextField();\n                    });\n                }\n            },\n            (res: any) => {\n                this.updateLocData(res);\n                this.locationSelected = false;\n                console.log('Fail: ', res);\n            }\n        );\n\n        if (isCachedAddress) {\n            this.focusNextField();\n        }\n    }\n\n    public resetOnNewInput(): void {\n        const fieldVal = this.inputValue;\n        const selectedData = this.searchData[this.formField.field];\n\n        if (!selectedData || !selectedData.selectedStr || fieldVal.trim() === selectedData.selectedStr.trim()) {\n            return;\n        }\n\n        let input = '';\n        const clearSelectedAddress = fieldVal.length > selectedData.selectedStr.length;\n        if (clearSelectedAddress) {\n            if (selectedData.selectedStr === fieldVal.substring(0, selectedData.selectedStr.length)) {\n                input = fieldVal[fieldVal.length - 1];\n            } else {\n                const newInput = this.getNewInput(fieldVal, selectedData.selectedStr);\n                if (newInput) {\n                    input = newInput;\n                } else {\n                    return;\n                }\n            }\n        } else if (fieldVal.length < 3) {\n            input = fieldVal;\n        } else if (fieldVal.length <= selectedData.selectedStr.length) {\n            return;\n        }\n\n        const newLoc = SearchDataService.getNewLoc();\n        newLoc.displayStr = input;\n        this.updateSearch({\n            selectedObj: newLoc,\n            formField: this.formField,\n        });\n    }\n\n    public async onInputEnterKey() {\n        await this.modalService.dismiss(this.results[0]);\n    }\n\n    public onFocusInput(value: string): void {\n        this.isInputFocused = true;\n\n        if (!value) {\n            this.results = this.results.filter((result) => result.isMyLocation);\n        }\n    }\n\n    public onBlurInput(value: string): void {\n        this.isInputFocused = false;\n\n        if (!value) {\n            this.getDefaultResults();\n        }\n    }\n\n    private initSearch(): void {\n        this.formGroup.controls[this.formField.field].valueChanges\n            .pipe(debounceTime(300), distinctUntilChanged(), takeUntil(this.destroy$))\n            .subscribe((text: string) => {\n                this.addressService\n                    .getTypeAheadList(text, this.formField, this.fieldConf, this.searchData)\n                    .subscribe((res: SearchAddress[]) => {\n                        this.results = res;\n                    });\n            });\n\n        setTimeout(() => {\n            if (!this.inputValue) {\n                this.getDefaultResults();\n            }\n        }, 10);\n    }\n\n    private getDefaultResults(): void {\n        this.addressService\n            .getTypeAheadList('', this.formField, this.fieldConf, this.searchData)\n            .subscribe((res: SearchAddress[]) => {\n                this.results = res;\n            });\n    }\n\n    private updateSearch(obj: { selectedObj: any; formField: any }): void {\n        if (!obj.selectedObj.placeId || obj.selectedObj.placeId === '') {\n            this.formGroup.controls[this.formField.field].reset();\n        }\n\n        this.locSelected.emit(obj);\n    }\n\n    private updateLocData(formedAddr: any): void {\n        if (!formedAddr) {\n            formedAddr = SearchDataService.getNewLoc();\n        }\n\n        formedAddr.selectedStr = formedAddr && formedAddr.displayStr ? formedAddr.displayStr : '';\n        this.updateSearch({\n            selectedObj: formedAddr,\n            formField: this.formField,\n        });\n    }\n\n    private getNewInput(displayStr: string, selectedStr: string): string | undefined {\n        for (let i = 0; i < selectedStr.length; i++) {\n            if (selectedStr[i] !== displayStr[i]) {\n                return displayStr[i];\n            }\n        }\n        return undefined;\n    }\n\n    private focusNextField(): void {\n        this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n            id: 'tabIdx' + this.formField.tabOrder,\n            moveTo: TzFocusType.MOVE_NEXT,\n        });\n        this.locationSelected = false;\n    }\n\n    private setValuesForm(): void {\n        if (this.searchData[this.formField.field].displayStr) {\n            const displayStr = this.searchData[this.formField.field].displayStr;\n            this.formGroup.controls[this.formField.field].setValue(displayStr);\n            this.inputValue = displayStr;\n        }\n    }\n}\n","<div\n    class=\"mob-loc-field\"\n    [ngClass]=\"{\n        'mob-loc-field--focused': isInputFocused,\n        'mob-loc-field--results': locField.value && isModal,\n        'mob-loc-field--modal': isModal\n    }\"\n>\n    <div\n        [formGroup]=\"formGroup\"\n        class=\"mob-loc-field__input-block\"\n        [ngClass]=\"{ 'show-invert': showInvertBtn, mob: platformService.isMobileDevice, last: isLast }\"\n        (click)=\"onInputBlockClick()\"\n    >\n        <div *ngIf=\"isModal && !isInputFocused && !locField.value\">\n            <tz-svg-icon icon=\"mob-loc-field-search\"></tz-svg-icon>\n        </div>\n\n        <input\n            #locField\n            [formControlName]=\"formField.field\"\n            type=\"search\"\n            (click)=\"onSearchClick()\"\n            [attr.id]=\"'tabIdx' + formField.tabOrder\"\n            [placeholder]=\"fieldConf.placeholder | translate\"\n            (input)=\"resetOnNewInput()\"\n            tzFieldNavigation\n            [fieldType]=\"formField.fieldType\"\n            [tabindex]=\"formField.tabOrder\"\n            [searchFormGroup]=\"formGroup\"\n            [controllerName]=\"formField.field\"\n            autocomplete=\"off\"\n            data-mob=\"search-from-to-input\"\n            [ignoreEnterKey]=\"true\"\n            (keydown.enter)=\"onInputEnterKey()\"\n            (focus)=\"focus$.next($any($event).target.value); onFocusInput(locField.value)\"\n            (blur)=\"onBlurInput(locField.value)\"\n            class=\"mob-loc-field-input\"\n            [readonly]=\"!isModal\"\n        />\n        <div>\n            <tz-svg-icon *ngIf=\"!isModal\" icon=\"location\" class=\"field-icon\" [mobile]=\"true\"></tz-svg-icon>\n        </div>\n        <!-- <div *ngIf=\"\n                (!searchData[formField.field] ||\n                !searchData[formField.field].icon ||\n                searchData[formField.field].icon === '') && fieldConf.icon !== 'icon-location'\n            \" class=\"field-icon tz-{{ fieldConf.icon }}\"></div> -->\n        <!-- <div *ngIf=\"searchData[formField.field] && searchData[formField.field].icon !== ''\"\n            class=\"field-icon tz-icon-{{ searchData[formField.field].icon }}\"></div> -->\n        <div class=\"field-icon tz-icon-clear\" (click)=\"clearInputTxt(true)\"></div>\n        <div *ngIf=\"!isModal\" class=\"tz-icon-compare_arrows\" (click)=\"invertFieldVals()\"></div>\n    </div>\n</div>\n\n<div *ngIf=\"isModal\" class=\"mob-loc-field__results\">\n    <tz-mob-loc-field-results\n        [results]=\"results\"\n        [text]=\"''\"\n        [isInputFocused]=\"isInputFocused\"\n        [inputValue]=\"locField.value\"\n        [fieldName]=\"formField.field\"\n        (selectItem)=\"onItemSelected($event)\"\n    ></tz-mob-loc-field-results>\n</div>\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    EventEmitter,\n    Injector,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { GeneralSettings } from '@core/constants/general-settings';\nimport { ServiceId } from '@core/constants/service-id.const';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { DateRangePipe } from '@shared/pipes/date-range.pipe';\nimport { SearchInfoInterface } from '@schemas/modules/search/search';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DatePipe, Location } from '@angular/common';\nimport { TzCheckoutService } from '@services/modules/checkout/services/tz-checkout.service';\nimport { CartService } from '@services/modules/cart/services/cart.service';\nimport { CheckoutCartServiceSummary } from '@schemas/modules/checkout/cart-summary';\nimport { StateFrom } from '@core/constants/state-from.const';\nimport { CartRoutingService } from '@services/modules/cart/services/cart-routing.service';\nimport { CurrencyService } from '@services/services/currency-service';\nimport { MobPickerWheels } from '@schemas/modules/picker/mob-picker';\nimport { ModalService } from '@services/modal.service';\nimport { Currency } from '@schemas/modules/core/currency';\nimport { AdjustedRentalCalendar } from '@schemas/modules/car-rentals/car-rentals-response';\n\n@Component({\n    selector: 'tz-mob-search-details',\n    templateUrl: './mob-search-details.component.html',\n    styleUrls: ['./mob-search-details.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MobSearchDetailsComponent implements OnChanges, OnDestroy, OnInit {\n    @Input() selectedServices: { [key: string]: boolean } = GeneralSettings.defaultSelectedServices;\n    @Input() isHotelDetailsPage = false;\n    @Input() currentService: ServiceId = ServiceId.INVALID;\n    @Output() editSearch: EventEmitter<void> = new EventEmitter<void>();\n\n    public searchInfo!: SearchInfoInterface;\n    public accommodation: undefined | CheckoutCartServiceSummary;\n    public currency!: string;\n    public serviceId = ServiceId;\n    private destroy$: Subject<boolean> = new Subject<boolean>();\n    private dateRange: DateRangePipe;\n    private currencies!: Currency[];\n    private selectedCurrency!: Currency;\n\n    constructor(\n        private changeDetectorRef: ChangeDetectorRef,\n        private searchDataService: SearchDataService,\n        injector: Injector,\n        private router: Router,\n        public datePipe: DatePipe,\n        private tzCheckoutService: TzCheckoutService,\n        private cartService: CartService,\n        private cartRouterService: CartRoutingService,\n        private currencyService: CurrencyService,\n        private modalService: ModalService,\n        private location: Location\n    ) {\n        this.dateRange = injector.get(DateRangePipe);\n\n        this.searchDataService.isUpdatedSearch$.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.serviceTitle(this.currentService);\n            this.updateAccommodationStatus();\n        });\n    }\n\n    public ngOnInit(): void {\n        this.serviceTitle(this.currentService);\n\n        this.getCurrencies();\n        this.currencyChange();\n    }\n\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.serviceTitle(this.currentService);\n    }\n\n    public insertTime = (date: string, st: string = '', et: string = '') =>\n        date.replace(new RegExp('', 'g'), st + ' ') + ' ' + et;\n\n    public serviceTitle(serviceId: ServiceId): void {\n        this.changeDetectorRef.markForCheck();\n\n        const { searchData, passengers } = this.searchDataService.getSearch(serviceId);\n\n        if (!searchData) {\n            return;\n        }\n\n        switch (serviceId) {\n            case ServiceId.FLIGHT_TRAIN: {\n                this.searchInfo = {\n                    to: searchData.to.displayStr,\n                    from: searchData.from?.displayStr,\n                    adults: passengers.adults,\n                    children: passengers.children + passengers.infants,\n                    people: passengers.children ? passengers.children + passengers.adults : passengers.adults,\n                    rooms: passengers.rooms,\n                    ...this.getDateTransform(searchData.tripCal.fromDate, searchData.tripCal.toDate),\n                };\n\n                break;\n            }\n            case ServiceId.ACC: {\n                this.searchInfo = {\n                    to: searchData.address.displayStr,\n                    adults: passengers.adults,\n                    children: passengers.children + passengers.infants,\n                    people: passengers.total,\n                    rooms: passengers.rooms,\n                    ...this.getDateTransform(searchData.tripCal.fromDate, searchData.tripCal.toDate),\n                };\n\n                break;\n            }\n            case ServiceId.TRANSFER: {\n                this.searchInfo = {\n                    to: searchData.address?.displayStr,\n                    from: searchData.to?.displayStr,\n                    adults: passengers.adults,\n                    children: passengers.children + passengers.infants,\n                    people: passengers.children ? passengers.children + passengers.adults : passengers.adults,\n                    rooms: passengers.rooms,\n                    ...this.getDateTransform(searchData.transferCal.fromDate, searchData.transferCal.toDate),\n                };\n\n                break;\n            }\n            case ServiceId.CAR_RENTAL: {\n                this.searchInfo = {\n                    from: searchData.to?.displayStr,\n                    to: searchData.address?.displayStr,\n                    adults: passengers.adults,\n                    people: passengers.children ? passengers.children + passengers.adults : passengers.adults,\n                    children: passengers.children + passengers.infants,\n                    rooms: passengers.rooms,\n                };\n\n                if (searchData.rentalCal) {\n                    this.searchInfo = {\n                        ...this.searchInfo,\n                        ...this.getCarRentalDate(searchData.rentalCal),\n                    };\n                }\n                break;\n            }\n        }\n    }\n\n    public gotoRoute(): void {\n        if (this.currentService === ServiceId.ACC_DETAILS) {\n            this.cartRouterService.goToState(ServiceId.ACC, undefined, false, StateFrom.ACC_DETAILS);\n            return;\n        }\n\n        this.location.back();\n    }\n\n    public onEditSearch(): void {\n        this.editSearch.emit();\n    }\n\n    public onOpenCurrencyPicker(): void {\n        const wheels: MobPickerWheels[] = [];\n\n        this.currencies.map((lang) => {\n            wheels.push({ display: lang.name, value: lang.code });\n        });\n\n        const selected = this.selectedCurrency.code;\n\n        this.modalService.openPickerModal({ wheels, selected: [selected] }, {}).then((modal) => {\n            if (modal.data?.selected) {\n                this.currencyService.setCurrency(modal.data.selected[0]);\n            }\n        });\n    }\n\n    private getDateTransform(fromDate: string, toDate?: string, st?: string, et?: string) {\n        if (toDate && st && et) {\n            return {\n                dateRange: `${this.datePipe.transform(fromDate + 'T' + st, 'd MMM HH:mm')} - ${\n                    this.datePipe.transform(toDate + 'T' + et, 'MMM') ===\n                    this.datePipe.transform(fromDate + 'T' + st, 'MMM')\n                        ? this.datePipe.transform(toDate + 'T' + et, 'd MMM HH:mm')\n                        : this.datePipe.transform(toDate + 'T' + et, 'd MMM HH:mm')\n                }`,\n            };\n        } else if (toDate) {\n            return {\n                dateRange:\n                    this.datePipe.transform(fromDate, 'MMM') === this.datePipe.transform(toDate, 'MMM')\n                        ? `${this.datePipe.transform(fromDate, 'd')} - ${this.datePipe.transform(toDate, 'd MMM yyyy')}`\n                        : `${this.datePipe.transform(fromDate, 'd MMM')} - ${this.datePipe.transform(\n                              toDate,\n                              'd MMM yyyy'\n                          )}`,\n            };\n        } else if (fromDate && st) {\n            return {\n                dateRange: `${this.datePipe.transform(fromDate + 'T' + st, 'd MMM yyyy HH:mm')}`,\n            };\n        } else {\n            return { date: this.insertTime(fromDate, st, et) };\n        }\n    }\n\n    private getCarRentalDate(rentalCal: AdjustedRentalCalendar): { dateRange: string } {\n        const fromDate = this.datePipe.transform(rentalCal.fromDate + 'T' + rentalCal.fromTime, 'd MMM HH:mm');\n        const toDate = this.datePipe.transform(rentalCal.toDate + 'T' + rentalCal.toTime, 'd MMM YYYY HH:mm');\n\n        return { dateRange: `${fromDate} - ${toDate}` };\n    }\n\n    private updateAccommodationStatus(): void {\n        const cartData = this.cartService.getCartData();\n        if (cartData) {\n            const cartSummaryItems = this.tzCheckoutService.formCheckoutCartSummary(cartData.items);\n\n            this.accommodation = cartSummaryItems.find(\n                (selectedCart: CheckoutCartServiceSummary) => selectedCart.serviceId === ServiceId.ACC\n            );\n        }\n    }\n\n    private getCurrencies(): void {\n        this.currencies = this.currencyService.currencies;\n    }\n\n    private currencyChange(): void {\n        this.currencyService.selectedCurrencySubject.subscribe((currency) => {\n            this.currency = currency.selectedLable;\n            this.selectedCurrency = currency;\n            this.changeDetectorRef.detectChanges();\n        });\n    }\n}\n","<div\n    *ngIf=\"searchInfo\"\n    class=\"search-details\"\n    data-mob=\"mob-search-details-content\"\n    xmlns=\"http://www.w3.org/1999/html\"\n>\n    <div class=\"search-details__back-btn\" (click)=\"gotoRoute()\" data-mob=\"mob-search-details-go-back-btn\">\n        <tz-svg-icon icon=\"arrow-back-mobile\" [mobile]=\"true\"></tz-svg-icon>\n    </div>\n\n    <div class=\"search-details__data\" data-mob=\"mob-search-details-container\" (click)=\"onEditSearch()\">\n        <p class=\"text-bold crop-text\" data-mob=\"mob-search-details-from\">{{ searchInfo.from }}</p>\n        <p\n            *ngIf=\"\n                currentService !== serviceId.CAR_RENTAL ||\n                (currentService === serviceId.CAR_RENTAL && searchInfo.from !== searchInfo.to)\n            \"\n            class=\"text-bold crop-text\"\n            data-mob=\"mob-search-details-to\"\n        >\n            {{ searchInfo.to }}\n        </p>\n\n        <div class=\"text-with-icon\">\n            <p class=\"text-normal crop-text\" data-mob=\"mob-search-details-options\">\n                <span>{{ searchInfo.dateRange ? searchInfo.dateRange : '' }}</span>\n                <ng-container *ngIf=\"currentService !== 2\">\n                    <span>{{ searchInfo.date ? (searchInfo.date | tzDate: 'mediumDate') : '' }}</span>\n                    <span class=\"separator vertical-line-separator\"></span>\n                    <span>{{ currentService === 0 ? searchInfo.people : searchInfo.adults }} </span>\n                    <span *ngIf=\"currentService !== 0\">{{\n                        (searchInfo.adults > 1 ? 'TRAVELLER.ADULTS' : 'TRAVELLER.ADULT') | translate\n                    }}</span>\n                    <span *ngIf=\"currentService === 0\">{{\n                        (searchInfo.people > 1 ? 'TRAVELLER.PEOPLE' : 'TRAVELLER.PERSON') | translate\n                    }}</span>\n                    <ng-container *ngIf=\"searchInfo.children && currentService !== 0\">\n                        <span class=\"separator comma-separator\"></span>\n                        <span>{{ searchInfo.children }} </span>\n                        <span>\n                            {{ (searchInfo.children > 1 ? 'TRAVELLER.children' : 'TRAVELLER.child') | translate }}\n                        </span>\n                    </ng-container>\n                    <ng-container *ngIf=\"searchInfo.rooms && currentService === 0\">\n                        <span class=\"separator comma-separator\"></span>\n                        <span>{{ searchInfo.rooms }} </span>\n                        <span>{{ (searchInfo.rooms > 1 ? 'HOTELS.rOOMS' : 'HOTELS.rOOM') | translate }}</span>\n                    </ng-container>\n                </ng-container>\n            </p>\n\n            <tz-svg-icon class=\"edit-pencil\" icon=\"edit-pencil\" [mobile]=\"true\"></tz-svg-icon>\n        </div>\n        <!--        currently, it's just a placeholder because the first need to resolve TMWEB-309-->\n        <!--        https://trazlerdev.atlassian.net/browse/TMWEB-309-->\n    </div>\n    <div class=\"search-details__currency\" (click)=\"onOpenCurrencyPicker()\">\n        <p data-mob=\"mob-search-details-currency\">{{ currency }}</p>\n        <tz-svg-icon\n            icon=\"arrow-down-purple\"\n            [styles]=\"{\n                width: '0.63rem'\n            }\"\n        >\n        </tz-svg-icon>\n    </div>\n</div>\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {\n    AbstractControl,\n    FormArray,\n    FormControl,\n    FormGroup,\n    ValidationErrors,\n    Validators,\n    ValidatorFn,\n} from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { TzPassengerUtil } from '@core/utils/tz-passenger.util';\nimport { DefaultPassenger, PassengerReq } from '@shared/schemas/tz-service-search-data';\nimport { GeneralSettings } from '@core/constants/general-settings';\nimport { SettingsService } from '@services/services/settings-service';\nimport { skip, take, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { NgbDropdown } from '@ng-bootstrap/ng-bootstrap';\nimport { ServiceId } from '@core/constants/service-id.const';\nimport { CartRoutingService } from '@services/modules/cart/services/cart-routing.service';\nimport { PlatformService } from '@services/platform.service';\nimport { ModalService } from '@services/modal.service';\nimport { MobPickerWheels } from '@schemas/modules/picker/mob-picker';\n\n@Component({\n    selector: 'tz-passenger',\n    templateUrl: './passenger.component.html',\n    styleUrls: ['./passenger.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PassengerComponent implements OnInit, OnChanges, OnDestroy {\n    @ViewChild('passengerPopup', { read: NgbDropdown }) passengerPopup!: NgbDropdown;\n    @ViewChild('driverAgeField', { read: ElementRef }) driverAge!: ElementRef;\n\n    @Input() passenger!: PassengerReq;\n    @Input() passengersFormGroup = new FormGroup({});\n    @Input() editMode = false;\n    @Input() isMobSearch = false;\n    @Input() resetOldValue!: number;\n    @Input() readonly = false;\n    @Input() selectedServices: { [key: string]: boolean } = GeneralSettings.defaultSelectedServices;\n    @Input() config!: {\n        rooms: boolean;\n        driver: boolean;\n        tabOrder: number;\n        driverOnly: boolean;\n    };\n    @Output() applyPax = new EventEmitter<{ passenger: PassengerReq }>();\n    @Output() addNewChild = new EventEmitter<number>();\n    @Output() focusInvalid = new EventEmitter<void>();\n    @Output() searchDropDownToggle: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    public passengerRules = GeneralSettings.passengerRules;\n    public selectedPax!: DefaultPassenger;\n    public childAgesList: {\n        label: string;\n        value: number;\n    }[] = [];\n\n    public data:\n        | {\n              passenger: PassengerReq;\n              passengerAges: FormGroup;\n              config: {\n                  rooms: boolean;\n                  driver: boolean;\n                  tabOrder: number;\n                  driverOnly: boolean;\n              };\n              selectedServices: { [key: string]: boolean };\n              selectedPax: any;\n              addNewChild$: Subject<number>;\n              applyPax$: Subject<{ passenger: PassengerReq }>;\n          }\n        | undefined;\n    private destroy$: Subject<boolean> = new Subject<boolean>();\n\n    constructor(\n        private translateService: TranslateService,\n        private settingsService: SettingsService,\n        private cartRoutingService: CartRoutingService,\n        public platformService: PlatformService,\n        private modalService: ModalService,\n        private changeDetectorRef: ChangeDetectorRef\n    ) {\n        this.initiateChildrenDropdown();\n        this.settingsService.selectedLanguageSubject.pipe(skip(1), takeUntil(this.destroy$)).subscribe(() => {\n            const passengerReq = TzPassengerUtil.MakePassengerReq(\n                this.selectedServices,\n                this.selectedPax,\n                this.translateService\n            );\n            this.selectedPax.displayStr = passengerReq.displayStr;\n            this.initiateChildrenDropdown();\n        });\n    }\n\n    get childAges(): FormArray {\n        return this.passengersFormGroup.controls['childAges'] as FormArray;\n    }\n\n    get dropdownPosition() {\n        return this.editMode ? 'bottom-end' : 'bottom-start';\n    }\n\n    get isChildAgesValid(): boolean {\n        let isFormValid = true;\n\n        this.childAges.value.map((childAge: { childAge: number }) => {\n            if (childAge.childAge === -1) {\n                isFormValid = false;\n            }\n        });\n\n        return isFormValid;\n    }\n\n    get mobSelectedPax(): string[] {\n        return this.selectedPax.displayStr ? this.selectedPax.displayStr.split(',') : [];\n    }\n\n    ngOnInit() {\n        this.mobSetInputData();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes['config']) {\n            this.selectedPax = TzPassengerUtil.FormPax(this.selectedServices, this.passenger, this.translateService);\n            this.config.driverOnly = TzPassengerUtil.rentalOnly(this.selectedServices);\n            this.reInitPassengersInfo();\n            this.childAges.addValidators(this.infantsLimitValidator());\n            if (!this.config.driverOnly) {\n                this.passengersFormGroup.addControl('adults', new FormControl('', this.adultsLimitValidator()));\n            } else {\n                this.passengersFormGroup.removeControl('adults');\n            }\n        }\n\n        if (changes['resetOldValue'] && changes['resetOldValue'].currentValue) {\n            this.selectedPax = TzPassengerUtil.FormPax(this.selectedServices, this.passenger, this.translateService);\n            this.applyPassengersInfo();\n            this.childAges.addValidators(this.infantsLimitValidator());\n        }\n\n        if (changes['passengersFormGroup']) {\n            this.passengersFormGroup?.statusChanges.subscribe((result) => {\n                this.applyPassengersInfo();\n            });\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public addAdults(n: number): void {\n        this.selectedPax.adults += n;\n        const isMoreRoomsThanAdult = this.config.rooms && this.selectedPax.adults < this.selectedPax.rooms;\n        if (isMoreRoomsThanAdult) {\n            this.selectedPax.rooms = this.selectedPax.adults;\n        }\n\n        this.childAges.updateValueAndValidity();\n        this.setTotal();\n        this.passengersFormGroup.controls['adults'].updateValueAndValidity();\n    }\n\n    public addChild(n: number): void {\n        this.selectedPax.child += n;\n        if (n === 1) {\n            this.addNewChild.emit(-1);\n\n            if (this.platformService.isMobileDevice && this.data) {\n                this.childAges.addValidators(this.infantsLimitValidator());\n                this.data.addNewChild$.next(-1);\n            }\n        } else {\n            const idx = this.childAges.length - 1;\n            this.childAges.removeAt(idx);\n        }\n\n        this.setTotal();\n    }\n\n    public addRooms(n: number): void {\n        this.selectedPax.rooms += n;\n        this.selectedPax.isDefault = false;\n        this.applyPassengersInfo();\n    }\n\n    public reInitPassengersInfo(dropdownClosed = false): void {\n        const passengerReq = TzPassengerUtil.MakePassengerReq(\n            this.selectedServices,\n            this.selectedPax,\n            this.translateService\n        );\n\n        this.selectedPax.displayStr = passengerReq.displayStr;\n\n        this.applyPax.emit({ passenger: passengerReq });\n\n        if (this.platformService.isMobileDevice && this.data) {\n            this.data.applyPax$.next({ passenger: passengerReq });\n        }\n\n        if (dropdownClosed) {\n            this.focusInvalid.emit();\n\n            if (this.platformService.isMobileDevice) {\n                this.modalService.dismiss();\n            }\n        }\n    }\n\n    public applyPassengersInfo(dropdownClosed = false): void {\n        const ages = this.passengersFormGroup.value;\n        this.selectedPax.driversAge = ages.driversAge;\n        this.selectedPax.childAges = ages.childAges.map((ageObj: { childAge: number }) => ageObj.childAge);\n        this.reInitPassengersInfo(dropdownClosed);\n    }\n\n    public isInValidField(controlName: string): boolean {\n        const fieldControl = this.passengersFormGroup.controls[controlName];\n\n        return (\n            fieldControl.invalid &&\n            (fieldControl.touched || fieldControl.dirty || (fieldControl.value !== null && fieldControl.value !== ''))\n        );\n    }\n\n    public dropDownChange(isOpen: boolean): void {\n        this.searchDropDownToggle.emit(isOpen);\n        if (isOpen) {\n            this.cartRoutingService.currentServiceId\n                .pipe(skip(1), take(1), takeUntil(this.destroy$))\n                .subscribe((serviceId: ServiceId) => {\n                    this.passengerPopup.close();\n                });\n\n            requestAnimationFrame(() => {\n                this.driverAge?.nativeElement.focus();\n            });\n        }\n    }\n\n    public onOpenPassengerModal(): void {\n        const applyPax$: Subject<{ passenger: PassengerReq }> = new Subject<{ passenger: PassengerReq }>();\n        const addNewChild$: Subject<number> = new Subject<number>();\n        const cssClass = this.editMode ? 'mob-second-search-modal' : 'mob-main-modal';\n        const data = {\n            passenger: this.passenger,\n            passengerAges: this.passengersFormGroup,\n            config: this.config,\n            selectedServices: this.selectedServices,\n            selectedPax: this.selectedPax,\n            applyPax$,\n            addNewChild$,\n        };\n\n        addNewChild$.subscribe((data2: any) => {\n            this.addNewChild.emit(data2);\n            this.childAges.addValidators(this.infantsLimitValidator());\n        });\n\n        applyPax$.subscribe((data2: any) => {\n            this.applyPax.emit(data2);\n            this.childAges.addValidators(this.infantsLimitValidator());\n        });\n\n        this.modalService.createMainModal(PassengerComponent, { data, cssClass }).then(() => {\n            this.applyPassengersInfo();\n            this.childAges.addValidators(this.infantsLimitValidator());\n        });\n    }\n\n    public onMobSelectChildAge(childAgesList: { value: number; label: string }[], index: number): void {\n        const childAgeWheels: MobPickerWheels[] = [];\n\n        childAgesList.map((childAge) => {\n            if (childAge.value !== -1) {\n                childAgeWheels.push({ display: childAge.label, value: childAge.value });\n            }\n        });\n\n        const selectedChildAges = this.passengersFormGroup.controls['childAges'].value[index].childAge;\n\n        const selected = selectedChildAges && selectedChildAges !== -1 ? selectedChildAges : childAgeWheels[0].value;\n        this.modalService\n            .openPickerModal({ wheels: childAgeWheels, selected: [selected] }, { title: 'PICKER.SELECT_CHILD_AGE' })\n            .then((modal) => {\n                if (!modal.data) {\n                    return;\n                }\n\n                if (modal.data.selected) {\n                    const childAges = this.passengersFormGroup.controls['childAges'] as FormArray;\n                    childAges.controls[index].patchValue({ childAge: parseInt(modal.data.selected[0], 10) });\n                    this.changeDetectorRef.detectChanges();\n                }\n            });\n    }\n\n    public onMobSelectDriverAge(): void {\n        const minDriverAge = GeneralSettings.passengerRules.minDriverAge;\n        const maxDriverAge = GeneralSettings.passengerRules.maxDriverAge;\n\n        const driverAges: MobPickerWheels[] = [];\n\n        for (let i = minDriverAge; i <= maxDriverAge; i++) {\n            driverAges.push({ display: i, value: i });\n        }\n\n        const driverAge = this.passengersFormGroup.controls['driversAge'].value;\n        const selected = driverAge ? driverAge : driverAges[0].value;\n\n        this.modalService\n            .openPickerModal({ wheels: driverAges, selected: [selected] }, { title: 'CAR_RENTAL.DRIVERS_AGE_LABEL' })\n            .then((modal) => {\n                if (!modal.data) {\n                    return;\n                }\n\n                if (modal.data.selected) {\n                    this.passengersFormGroup.controls['driversAge'].patchValue(parseInt(modal.data.selected[0], 10));\n                    this.changeDetectorRef.detectChanges();\n                }\n            });\n    }\n\n    private setTotal(): void {\n        this.selectedPax.total = this.selectedPax.adults + this.selectedPax.child;\n        this.selectedPax.isDefault = false;\n        this.applyPassengersInfo();\n    }\n\n    private adultsLimitValidator(): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null =>\n            this.selectedPax.adults <= 0 ? { Invalid: true } : null;\n    }\n\n    private infantsLimitValidator(): ValidatorFn {\n        return (control: AbstractControl): ValidationErrors | null => {\n            const totalInfants = control.value.filter((ageObj: { childAge: number }) => ageObj.childAge === 0);\n\n            return this.selectedPax.adults < totalInfants.length ? { Invalid: true } : null;\n        };\n    }\n\n    private initiateChildrenDropdown(): void {\n        this.childAgesList = [\n            { value: -1, label: this.translateService.instant('TRAVELLER.AGE_NEEDED') }, // non filled value\n            { value: 0, label: this.translateService.instant('TRAVELLER.upto2') },\n        ];\n\n        for (let j = this.passengerRules.childMinAge; j <= this.passengerRules.childMaxAge; j++) {\n            this.childAgesList.push({\n                value: j,\n                label: j.toString(),\n            });\n        }\n    }\n\n    private mobSetInputData(): void {\n        if (this.platformService.isMobileDevice && this.data) {\n            this.passenger = this.data.passenger;\n            this.passengersFormGroup = this.data.passengerAges;\n            this.config = this.data.config;\n            this.selectedServices = this.data.selectedServices;\n            this.selectedPax = this.data.selectedPax;\n\n            this.data.passengerAges.valueChanges.subscribe((val) => {\n                console.log('this.data.passengerAges');\n                if (this.data) {\n                    console.log(this.data.passengerAges);\n                    this.childAges.addValidators(this.infantsLimitValidator());\n                    console.log('this.childAges.valid');\n                    console.log(this.childAges.valid);\n                }\n            });\n\n            console.log('this.data.passengerAges.valid');\n            console.log(this.data.passengerAges.valid);\n        }\n    }\n}\n","<div\n    *ngIf=\"!platformService.isMobileDevice\"\n    class=\"passenger-container\"\n    ngbDropdown\n    #passengerPopup=\"ngbDropdown\"\n    [placement]=\"dropdownPosition\"\n    (openChange)=\"dropDownChange($event)\"\n    data-test=\"searching-page-passenger-container\"\n>\n    <button\n        class=\"search-option body-1 passenger-option\"\n        ngbDropdownToggle\n        tzFieldNavigation\n        [attr.id]=\"'tabIdx' + config.tabOrder\"\n        fieldType=\"person\"\n        [tabindex]=\"config.tabOrder\"\n        [searchFormGroup]=\"passengersFormGroup\"\n        *ngIf=\"!editMode\"\n        data-test=\"count-of-passenger\"\n    >\n        <div class=\"tz-icon-person tz-icon\" data-test=\"searching-page-pax\"></div>\n        {{ selectedPax.displayStr }}\n        <div class=\"tz-icon-arrow arrow\"></div>\n    </button>\n    <button\n        class=\"input-field-component\"\n        ngbDropdownToggle\n        tzFieldNavigation\n        [attr.id]=\"'tabIdx' + config.tabOrder\"\n        fieldType=\"person\"\n        [tabindex]=\"config.tabOrder\"\n        [searchFormGroup]=\"passengersFormGroup\"\n        *ngIf=\"editMode\"\n    >\n        <input\n            data-test=\"result-page-search-bar-adults\"\n            type=\"text\"\n            [value]=\"selectedPax.displayStr\"\n            [disabled]=\"true\"\n        />\n        <div class=\"field-icon tz-icon-person\"></div>\n    </button>\n    <div\n        ngbDropdownMenu\n        class=\"passenger-popup-container tz-popup-container\"\n        data-test=\"searching-page-passenger-popup-container\"\n        [formGroup]=\"passengersFormGroup\"\n    >\n        <ng-container *ngIf=\"!config.driverOnly\">\n            <div class=\"passenger-row flex align-center space-between\" *ngIf=\"config.rooms\">\n                <div class=\"data-txt\">{{ 'HOTELS.ROOMS' | translate }}</div>\n                <div class=\"flex-center\">\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-rooms-subtract\"\n                        (click)=\"addRooms(-1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.rooms <= passengerRules.minRoom\n                        }\"\n                    >\n                        <tz-svg-icon [styles]=\"{ 'width.px': 12, 'height.px': 10 }\" icon=\"tz-main-minus\"></tz-svg-icon>\n                    </div>\n                    <div class=\"selected-count flex-center\" data-test=\"passenger-row-selected-count-rooms\">\n                        {{ selectedPax.rooms }}\n                    </div>\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-rooms-add\"\n                        (click)=\"addRooms(1)\"\n                        [ngClass]=\"{\n                            disabled:\n                                selectedPax.rooms >= passengerRules.maxRoom || selectedPax.adults <= selectedPax.rooms\n                        }\"\n                    >\n                        <tz-svg-icon [styles]=\"{ 'width.px': 12, 'height.px': 12 }\" icon=\"tz-main-plus\"></tz-svg-icon>\n                    </div>\n                </div>\n            </div>\n            <div class=\"passenger-row flex align-center space-between\">\n                <div class=\"data-txt\">{{ 'SEARCH.ADULTS' | translate }}</div>\n                <div class=\"flex-center\">\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-adults-subtract\"\n                        (click)=\"addAdults(-1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.adults <= passengerRules.minAdult\n                        }\"\n                    >\n                        <tz-svg-icon [styles]=\"{ 'width.px': 12, 'height.px': 10 }\" icon=\"tz-main-minus\"></tz-svg-icon>\n                    </div>\n                    <div class=\"selected-count flex-center\" data-test=\"passenger-row-selected-count-adults\">\n                        {{ selectedPax.adults }}\n                    </div>\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-adults-add\"\n                        (click)=\"addAdults(1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.total >= passengerRules.maxAllowedPersons\n                        }\"\n                    >\n                        <tz-svg-icon [styles]=\"{ 'width.px': 12, 'height.px': 12 }\" icon=\"tz-main-plus\"></tz-svg-icon>\n                    </div>\n                </div>\n            </div>\n            <div class=\"passenger-row flex align-center space-between mb-0\">\n                <div class=\"data-txt\">{{ 'SEARCH.CHILDREN' | translate }}</div>\n                <div class=\"flex-center\">\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-child-subtract\"\n                        (click)=\"addChild(-1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.child <= passengerRules.minChild\n                        }\"\n                    >\n                        <tz-svg-icon [styles]=\"{ 'width.px': 12, 'height.px': 10 }\" icon=\"tz-main-minus\"></tz-svg-icon>\n                    </div>\n                    <div class=\"selected-count flex-center\" data-test=\"passenger-row-selected-count-child\">\n                        {{ selectedPax.child }}\n                    </div>\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-child-add\"\n                        (click)=\"addChild(1)\"\n                        [ngClass]=\"{\n                            disabled:\n                                selectedPax.child >= passengerRules.maxChild ||\n                                selectedPax.total >= passengerRules.maxAllowedPersons\n                        }\"\n                    >\n                        <tz-svg-icon [styles]=\"{ 'width.px': 12, 'height.px': 12 }\" icon=\"tz-main-plus\"></tz-svg-icon>\n                    </div>\n                </div>\n            </div>\n            <ng-container *ngIf=\"selectedPax.child > 0\">\n                <div\n                    class=\"passenger-row flex wrap align-center space-between child-age-container mb-0\"\n                    data-test=\"passenger-row-select-child-age\"\n                >\n                    <ng-container\n                        formArrayName=\"childAges\"\n                        *ngFor=\"let childAgeGrp of childAges.controls; let i = index\"\n                    >\n                        <div [formGroupName]=\"i\">\n                            <ng-select\n                                class=\"child-age-container ng-select-no-dropdown-margin\"\n                                [items]=\"childAgesList\"\n                                [selectOnTab]=\"true\"\n                                bindLabel=\"label\"\n                                bindValue=\"value\"\n                                [clearable]=\"false\"\n                                [searchable]=\"false\"\n                                formControlName=\"childAge\"\n                                dropdownPosition=\"bottom\"\n                                data-test=\"passenger-row-child-age-container\"\n                            ></ng-select>\n                        </div>\n                    </ng-container>\n                </div>\n            </ng-container>\n        </ng-container>\n        <div\n            class=\"passenger-row flex align-center space-between driver-age-row mb-0\"\n            data-test=\"result-page-passenger-age\"\n            *ngIf=\"config.driver\"\n            [ngClass]=\"{ 'driver-only': config.driverOnly }\"\n        >\n            <div class=\"data-txt\">{{ 'CAR_RENTAL.DRIVERS_AGE_LABEL' | translate }}</div>\n            <div class=\"driver-field-container mt-0\">\n                <div>\n                    <input\n                        #driverAgeField\n                        type=\"number\"\n                        formControlName=\"driversAge\"\n                        min=\"21\"\n                        max=\"80\"\n                        [tzMaxLimit]=\"2\"\n                        data-test=\"passenger-row-input-age\"\n                    />\n                </div>\n            </div>\n        </div>\n        <button\n            class=\"btn select-btn selected apply-btn\"\n            data-test=\"searching-page-passenger-popup-container-done\"\n            (click)=\"$event.stopPropagation(); passengerPopup.close(); applyPassengersInfo(true)\"\n        >\n            {{ 'GENERAL.DONE' | translate }}\n        </button>\n    </div>\n</div>\n\n<div\n    *ngIf=\"platformService.isMobileDevice\"\n    class=\"tz-passenger\"\n    data-test=\"searching-page-passenger-container\"\n    [ngClass]=\"{\n        'search-passenger-mob': isMobSearch\n    }\"\n>\n    <input\n        *ngIf=\"!data\"\n        type=\"text\"\n        class=\"mob-hidden-input\"\n        tzFieldNavigation\n        [attr.id]=\"'tabIdx' + config.tabOrder\"\n        fieldType=\"person\"\n        [tabindex]=\"config.tabOrder\"\n        [searchFormGroup]=\"passengersFormGroup\"\n        (focus)=\"onOpenPassengerModal()\"\n    />\n\n    <div\n        *ngIf=\"selectedPax && !data\"\n        (click)=\"onOpenPassengerModal()\"\n        data-test=\"searching-page-pax\"\n        class=\"searching-page-pax\"\n    >\n        <tz-svg-icon class=\"field-icon\" icon=\"carbon_user\" [mobile]=\"true\"></tz-svg-icon>\n        <!-- <div *ngIf=\"isMobSearch\" class=\"field-icon tz-icon-person\"></div> -->\n        <span *ngFor=\"let person of mobSelectedPax; let i = index\">\n            <span class=\"searching-page-pax__seperator\" *ngIf=\"i === 1\">&nbsp;|</span>{{ person }}\n        </span>\n    </div>\n\n    <div\n        [hidden]=\"!data\"\n        [formGroup]=\"passengersFormGroup\"\n        class=\"passenger-popup-container\"\n        data-test=\"searching-page-passenger-popup-container\"\n    >\n        <ng-container *ngIf=\"!config.driverOnly\">\n            <div class=\"passenger-row flex align-center space-between\" *ngIf=\"config.rooms\">\n                <div class=\"data-txt\">{{ 'HOTELS.ROOMS' | translate }}</div>\n                <div class=\"flex-center\">\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-rooms-subtract\"\n                        (click)=\"addRooms(-1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.rooms <= passengerRules.minRoom\n                        }\"\n                    >\n                        <tz-svg-icon [stretch]=\"true\" icon=\"passenger-selection-minus\"></tz-svg-icon>\n                    </div>\n                    <div class=\"selected-count flex-center\" data-test=\"passenger-row-selected-count-rooms\">\n                        {{ selectedPax.rooms }}\n                    </div>\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-rooms-add\"\n                        (click)=\"addRooms(1)\"\n                        [ngClass]=\"{\n                            disabled:\n                                selectedPax.rooms >= passengerRules.maxRoom || selectedPax.adults <= selectedPax.rooms\n                        }\"\n                    >\n                        <tz-svg-icon [stretch]=\"true\" icon=\"passenger-selection-plus\"></tz-svg-icon>\n                    </div>\n                </div>\n            </div>\n            <div class=\"passenger-row flex align-center space-between\">\n                <div class=\"data-txt\">{{ 'SEARCH.ADULTS' | translate }}</div>\n                <div class=\"flex-center\">\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-adults-subtract\"\n                        (click)=\"addAdults(-1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.adults <= passengerRules.minAdult\n                        }\"\n                    >\n                        <tz-svg-icon [stretch]=\"true\" icon=\"passenger-selection-minus\"></tz-svg-icon>\n                    </div>\n                    <div class=\"selected-count flex-center\" data-test=\"passenger-row-selected-count-adults\">\n                        {{ selectedPax.adults }}\n                    </div>\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-adults-add\"\n                        (click)=\"addAdults(1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.total >= passengerRules.maxAllowedPersons\n                        }\"\n                    >\n                        <tz-svg-icon [stretch]=\"true\" icon=\"passenger-selection-plus\"></tz-svg-icon>\n                    </div>\n                </div>\n            </div>\n            <div class=\"passenger-row flex align-center space-between mb-0\">\n                <div class=\"data-txt\">{{ 'SEARCH.CHILDREN' | translate }}</div>\n                <div class=\"flex-center\">\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-child-subtract\"\n                        (click)=\"addChild(-1)\"\n                        [ngClass]=\"{\n                            disabled: selectedPax.child <= passengerRules.minChild\n                        }\"\n                    >\n                        <tz-svg-icon [stretch]=\"true\" icon=\"passenger-selection-minus\"></tz-svg-icon>\n                    </div>\n                    <div class=\"selected-count flex-center\" data-test=\"passenger-row-selected-count-child\">\n                        {{ selectedPax.child }}\n                    </div>\n                    <div\n                        class=\"select-btn flex-center pointer\"\n                        data-test=\"passenger-row-selected-count-child-add\"\n                        (click)=\"addChild(1)\"\n                        [ngClass]=\"{\n                            disabled:\n                                selectedPax.child >= passengerRules.maxChild ||\n                                selectedPax.total >= passengerRules.maxAllowedPersons\n                        }\"\n                    >\n                        <tz-svg-icon [stretch]=\"true\" icon=\"passenger-selection-plus\"></tz-svg-icon>\n                    </div>\n                </div>\n            </div>\n            <ng-container *ngIf=\"selectedPax.child > 0\">\n                <div\n                    class=\"passenger-row mob-select-child-age-row passenger-row-child-ages flex wrap align-center space-between child-age-container mb-0\"\n                    data-test=\"passenger-row-select-child-age\"\n                >\n                    <ng-container\n                        formArrayName=\"childAges\"\n                        *ngFor=\"let childAgeGrp of childAges.controls; let i = index\"\n                    >\n                        <div class=\"mob-select-child-age-col\">\n                            <div class=\"mob-select-child-age\" (click)=\"onMobSelectChildAge(childAgesList, i)\">\n                                <span\n                                    [ngClass]=\"{\n                                        'mob-select-child-age-text-selected': childAgeGrp.value.childAge !== -1\n                                    }\"\n                                >\n                                    {{\n                                        childAgeGrp.value.childAge !== -1\n                                            ? childAgeGrp.value.childAge === 0\n                                                ? ('TRAVELLER.upto2' | translate)\n                                                : childAgeGrp.value.childAge\n                                            : ('TRAVELLER.AGE_NEEDED' | translate)\n                                    }}\n                                </span>\n\n                                <span class=\"mob-select-child-age-icon\">\n                                    <tz-svg-icon icon=\"mob-select-child-age\"></tz-svg-icon>\n                                </span>\n                            </div>\n                        </div>\n                    </ng-container>\n                </div>\n            </ng-container>\n        </ng-container>\n        <div\n            class=\"passenger-row passenger-row-driver flex align-center space-between driver-age-row mb-0\"\n            data-test=\"result-page-passenger-age\"\n            *ngIf=\"config.driver\"\n            [ngClass]=\"{ 'driver-only': config.driverOnly }\"\n        >\n            <div class=\"data-txt\">{{ 'CAR_RENTAL.DRIVERS_AGE_LABEL' | translate }}</div>\n            <div class=\"mob-select-driver-age\" (click)=\"onMobSelectDriverAge()\">\n                <span\n                    [ngClass]=\"{\n                        'mob-select-child-age-text-selected': passengersFormGroup.controls['driversAge'].value\n                    }\"\n                >\n                    {{\n                        passengersFormGroup.controls['driversAge'].value\n                            ? passengersFormGroup.controls['driversAge'].value\n                            : ('TRAVELLER.AGE_NEEDED' | translate)\n                    }}\n                </span>\n\n                <span class=\"mob-select-child-age-icon\">\n                    <tz-svg-icon icon=\"mob-select-child-age\"></tz-svg-icon>\n                </span>\n            </div>\n        </div>\n\n        <div class=\"passenger-footer-block\">\n            <button\n                class=\"btn select-btn selected apply-btn\"\n                [ngClass]=\"{ 'apply-btn-invalid': !isChildAgesValid }\"\n                data-test=\"searching-page-passenger-popup-container-done\"\n                (click)=\"applyPassengersInfo(true)\"\n            >\n                {{ 'GENERAL.DONE' | translate }}\n            </button>\n        </div>\n    </div>\n</div>\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2,\n    SimpleChanges,\n} from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\n\nimport { ISearchStatus, UserSearchService } from '@services/searchEngine/services/user-search-service';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { EngineRuleService, IValidSearch } from '@services/searchEngine/services/engine-rule-service';\nimport { ToolsService } from '@core/utils/tools-service';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { ListenerId } from '@core/constants/listener-id.const';\nimport { SearchHelpers } from '@services/searchEngine/services/search-helpers';\nimport { SearchState } from '@services/searchEngine/services/search-state.service';\nimport { ServiceId } from '@core/constants/service-id.const';\nimport { Trip, TRIPTYPES } from '@core/constants/trip';\nimport { AddressService } from '@services/modules/services/address-service';\nimport { DialogService } from '@services/dialog.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { LoaderService } from '@services/modules/core/loader.service';\nimport { AddressSource, SearchConfigOrder } from '@schemas/modules/core/search-address';\nimport { GeneralSettings } from '@core/constants/general-settings';\nimport { PassengerReq } from '@shared/schemas/tz-service-search-data';\nimport { Subject } from 'rxjs';\nimport { TzPassengerUtil } from '@core/utils/tz-passenger.util';\nimport { CartService } from '@services/modules/cart/services/cart.service';\nimport { TzFocusType } from '@core/constants/keyboard-key-types.const';\nimport { ISearchData } from '@schemas/modules/search/search';\nimport { RecentSearchService } from '@services/modules/services/recent-search.service';\nimport { Router } from '@angular/router';\nimport { SearchUtilsService } from '@services/modules/search/utils/search.utils';\nimport { takeUntil } from 'rxjs/operators';\nimport { PlatformService } from '@services/platform.service';\nimport { CalTypes } from '@core/constants/call-types.const';\nimport { ModalService } from '@services/modal.service';\nimport { CalendarUtilsService } from '@services/modules/search/utils/calendar.utils';\n\n@Component({\n    selector: 'tz-search',\n    templateUrl: './search.component.html',\n    styleUrls: ['./search.component.scss', './search.component.tablet.scss'],\n    //changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SearchComponent implements OnInit, OnDestroy, OnChanges {\n    @Input() selectedServices: { [key: string]: boolean } = GeneralSettings.defaultSelectedServices;\n    @Input() editMode = false;\n    @Input() editing = false;\n    @Input() currentService: ServiceId = ServiceId.INVALID;\n    @Output() editingChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n    @Output() editingClose: EventEmitter<void> = new EventEmitter<void>();\n    @Output() searchDropDownToggle: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    public htmlSearchConf: any;\n    public formOrder!: SearchConfigOrder[];\n    public searchFormGroup: FormGroup;\n    public search: any;\n    public oldSearch!: ISearchData;\n    public context!: {\n        services: number[];\n        travelType: string;\n        runningMode: number;\n    };\n    public passengers!: PassengerReq;\n    public oldPassenger!: PassengerReq;\n    public fieldLength = 0;\n    public serviceIcon = '';\n    public trips = TRIPTYPES.LIST;\n    public passengersFormGroup = new FormGroup({});\n    public classList = [\n        { label: 'SEARCH.CLASS.Economy' },\n        { label: 'SEARCH.CLASS.Premium Economy' },\n        { label: 'SEARCH.CLASS.Business' },\n        { label: 'SEARCH.CLASS.First' },\n    ];\n    public ratingList = [\n        { rating: 1, selected: false },\n        { rating: 2, selected: false },\n        { rating: 3, selected: false },\n        { rating: 4, selected: false },\n        { rating: 5, selected: false },\n    ];\n    public resetPassengersValue = 0;\n    public data:\n        | {\n              selectedServices: { [key: string]: boolean };\n              editMode: boolean;\n              editing: boolean;\n              currentService: ServiceId;\n          }\n        | undefined;\n    public isModalEditMode = false;\n\n    private fieldOrderType = '';\n    private listeners: number[] = [];\n    private formValues!: { [key: string]: any };\n    private passengersFormValues!: { childAges: { childAge: number }[] };\n    private passengersOldValue!: PassengerReq;\n    private isOldPassengerDataSet = false;\n    private destroy$: Subject<boolean> = new Subject<boolean>();\n\n    constructor(\n        private userSearchService: UserSearchService,\n        private toolsService: ToolsService,\n        private searchDataService: SearchDataService,\n        private listenersService: ListenersService,\n        private engineRuleService: EngineRuleService,\n        private searchState: SearchState,\n        private fb: FormBuilder,\n        private addressService: AddressService,\n        private dialogService: DialogService,\n        private translateService: TranslateService,\n        private loaderService: LoaderService,\n        private cartService: CartService,\n        private recentSearchService: RecentSearchService,\n        private router: Router,\n        private renderer: Renderer2,\n        public platformService: PlatformService,\n        private modalService: ModalService\n    ) {\n        this.searchFormGroup = new FormGroup({});\n    }\n\n    get childAgesFormArray(): FormArray {\n        return this.passengersFormGroup.controls['childAges'] as FormArray;\n    }\n\n    ngOnInit(): void {\n        if (this.platformService.isMobileDevice && this.data) {\n            this.selectedServices = this.data.selectedServices;\n            this.editMode = this.data.editMode;\n            this.editing = this.data.editing;\n            this.currentService = this.data.currentService;\n            this.isModalEditMode = true;\n        }\n\n        this.initializeTzSearch();\n\n        this.searchDataService.resetSearch$.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.initializeTzSearch();\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const currentService = changes['currentService'];\n        const resultPageSwitched =\n            currentService &&\n            !currentService.firstChange &&\n            currentService.currentValue !== currentService.previousValue;\n        if (resultPageSwitched) {\n            this.unregisterListeners();\n            this.initializeTzSearch();\n        }\n\n        const editing = changes['editing'];\n        if (editing && !editing.firstChange && !editing.currentValue) {\n            this.resetSearch();\n            /* if (editing.currentValue.serviceId) {\n                let isValid = this.engineRuleService.isValidSearch(this.search, this.passengers, this.selectedServices,\n                 this.context.travelType, this.editMode);\n                editing.currentValue.invalid = !isValid.isValid;\n                this.searchErrorService.searchErrHdl();\n                return\n            }*/\n        }\n\n        if (changes['currentService'] && !changes['currentService'].firstChange) {\n            this.isOldPassengerDataSet = false;\n        }\n    }\n\n    // TODO: update hotel's code in params while edit from details page\n\n    public onSearch(): void {\n        this.renderer.removeClass(document.body, 'body-lock-scroll');\n\n        if (this.searchFormGroup.invalid || this.passengersFormGroup.invalid) {\n            if (this.searchFormGroup.valid && this.passengersFormGroup.invalid) {\n                this.passengersFormGroup.markAllAsTouched();\n            }\n\n            this.focusInvalid();\n            return;\n        }\n\n        const formValidity = this.isFormInvalid();\n        if (!formValidity.isValid) {\n            if (formValidity.firstField) {\n                this.focusInvalid();\n            }\n            return;\n        }\n\n        const isNewSearch = SearchUtilsService.isNewSearch(\n            this.searchDataService.getSearch(\n                SearchHelpers.getFirstServiceId(SearchHelpers.getServiceValue(this.selectedServices))\n            ),\n            this.search,\n            this.passengers,\n            this.selectedServices,\n            this.context.travelType,\n            this.editMode\n        );\n        if (!isNewSearch) {\n            if (this.editMode) {\n                this.editingClose.emit();\n\n                if (this.platformService.isMobileDevice && this.data) {\n                    this.modalService.dismiss();\n                }\n            } else {\n                this.editing = true;\n            }\n            return;\n        }\n        this.closeAllCalendars();\n        //this.editingChange.emit(false);\n        this.searchDropDownToggle.emit(false);\n        const params = this.getSearchParams();\n        const searchReq = {\n            searchData: ToolsService.deepCopy(this.search),\n            passengers: ToolsService.deepCopy(this.passengers),\n            context: {\n                ...this.context,\n                services: SearchHelpers.getServiceValue(this.selectedServices),\n            },\n        };\n        if (params && params.hotelCode !== '') {\n            searchReq.searchData.hotelCode = params.hotelCode;\n            searchReq.searchData.hotelName = params.hotelName;\n        }\n        this.recentSearchService.storeRecentAddress(searchReq, this.selectedServices, this.context.travelType);\n\n        if (!this.editMode) {\n            SearchUtilsService.resetSortingValue();\n\n            this.loaderService.triggerLoading.emit({ loading: true, textKey: 'LOADER_MESSAGES.SEARCH_OPTIONS' });\n\n            this.cartService.clearCart().subscribe(\n                () => {\n                    this.makeSearch(params, searchReq);\n                },\n                (error: any) => {\n                    this.loaderService.triggerLoading.emit({ loading: false });\n\n                    if (this.platformService.isMobileDevice && this.data) {\n                        this.modalService.dismiss();\n                    }\n\n                    console.log(error);\n                }\n            );\n        } else {\n            this.makeSearch(params, searchReq);\n        }\n    }\n\n    public invertFromTo(): void {\n        const selectedFrom = this.search.from;\n        const selectedTo = this.search.to;\n\n        this.search.from = { ...selectedTo, inputName: selectedFrom.inputName };\n        this.search.to = { ...selectedFrom, inputName: selectedTo.inputName };\n\n        this.searchFormGroup.controls['from'].setValue(this.search.from);\n        this.searchFormGroup.controls['to'].setValue(this.search.to);\n\n        this.recentSearchService.setRecentAddress(this.search.from, false, 'type2');\n        this.recentSearchService.setRecentAddress(this.search.to, false, 'type2');\n\n        if (this.search.address) {\n            this.search.address = SearchDataService.getNewLoc();\n            this.searchFormGroup.controls['address'].reset();\n        }\n    }\n\n    public applySearchData(fieldEvent: { selectedObj: any; formField: any }): void {\n        this.search = {\n            ...this.search,\n            [fieldEvent.formField.field]: fieldEvent.selectedObj,\n        };\n\n        if (fieldEvent.formField.fieldType === 'loc-field' && fieldEvent.selectedObj?.latitude) {\n            this.cleanLinkedField(fieldEvent.formField.field);\n        }\n\n        if (fieldEvent.formField.fieldType === 'cal' && fieldEvent.formField.field === CalTypes.CAL_TRIP_TYPE) {\n            this.checkIfSecondaryCalendarsShouldBeReset();\n        }\n    }\n\n    public applyPassenger(paxEvent: { passenger: PassengerReq }): void {\n        this.passengers = paxEvent.passenger;\n        if (!this.isOldPassengerDataSet) {\n            this.oldPassenger = ToolsService.deepCopy(this.passengers);\n            this.isOldPassengerDataSet = true;\n        }\n    }\n\n    public isRatingSelected(): boolean {\n        return this.ratingList.some((rating) => rating.selected);\n    }\n\n    public changeTravelType(travelType: { label: string; tripType: Trip }): void {\n        if (travelType.tripType === Trip.MULTI_CITY) {\n            this.context.travelType = Trip.ROUND_TRIP;\n            return;\n        }\n        requestAnimationFrame(() => {\n            if (!this.platformService.isMobileDevice) {\n                this.focusInvalid();\n            }\n        });\n        this.context.travelType = travelType.tripType;\n        this.searchDataService.changeFlyType({ travelType: travelType.tripType });\n    }\n\n    public addNewChild(age: number): void {\n        const childAgeCtrl = new FormControl(age >= 0 ? age : -1);\n        childAgeCtrl.setValidators([\n            Validators.required,\n            Validators.min(0),\n            Validators.max(GeneralSettings.passengerRules.childMaxAge),\n        ]);\n\n        this.childAgesFormArray.push(\n            this.fb.group({\n                childAge: childAgeCtrl,\n            })\n        );\n    }\n\n    public focusInvalid(moveToInvalid = true): void {\n        this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n            id: 'tabIdx1',\n            moveTo: moveToInvalid ? TzFocusType.MOVE_TO_INVALID : TzFocusType.MOVE_NEXT,\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this.unregisterListeners();\n    }\n\n    private isFormInvalid(): IValidSearch {\n        return EngineRuleService.validSearch(\n            this.search,\n            this.passengers,\n            this.selectedServices,\n            this.context.travelType,\n            this.editMode\n        );\n    }\n\n    private unregisterListeners(): void {\n        for (const listenerId of this.listeners) {\n            this.listenersService.unregisterListener(listenerId);\n        }\n    }\n\n    private makeSearch(params: any, searchReq: any) {\n        this.userSearchService.search(params, searchReq).then(\n            (searchStatus: ISearchStatus) => {\n                this.searchResHandler(searchStatus);\n            },\n            (searchStatus: ISearchStatus) => {\n                this.searchResHandler(searchStatus);\n            }\n        );\n    }\n\n    private searchResHandler(searchStatus: ISearchStatus): void {\n        if (this.editMode && this.editing) {\n            console.log('cancel editing');\n            this.editing = false;\n            this.editingClose.emit();\n\n            if (this.platformService.isMobileDevice) {\n                this.modalService.dismiss();\n            }\n        }\n        if (searchStatus.needEditRefresh) {\n            this.resetSearch();\n        }\n\n        if (searchStatus.searchInProgress) {\n            console.log('set old values to current one');\n            this.formValues = this.searchFormGroup.value;\n            this.passengersFormValues = this.passengersFormGroup.value;\n            this.passengersOldValue = ToolsService.deepCopy(ToolsService.deepCopy(this.passengers));\n            this.oldSearch = ToolsService.deepCopy(this.search);\n            this.oldPassenger = ToolsService.deepCopy(this.passengers);\n        } else if (!this.editMode) {\n            this.editing = true;\n        }\n    }\n\n    private setSearchToCurrent(currentService: ServiceId | undefined): boolean {\n        if (currentService === undefined || currentService === ServiceId.INVALID) {\n            console.error(`invalid service id: ${currentService}`);\n            return false;\n        }\n        console.log('setting current search content');\n        const serviceInfo = SearchUtilsService.getServiceInfo(currentService);\n        const search = this.searchDataService.getSearch(currentService);\n        if (serviceInfo) {\n            this.selectedServices = serviceInfo.service;\n            this.serviceIcon = serviceInfo.icon;\n        }\n\n        this.search = search.searchData;\n        this.oldSearch = ToolsService.deepCopy(this.search);\n        // console.log({searchData: this.search})\n\n        this.context = search.context;\n        // if (this.disableTransferController) {\n        // modifyTransferCal(search);\n        // }\n        // hdlNullCalInfo(this.tabView);\n        this.passengers = search.passengers;\n        this.passengersOldValue = ToolsService.deepCopy(search.passengers);\n        this.passengers.isDefault = false;\n        this.passengers.displayStr = '';\n        if (serviceInfo && serviceInfo.service.rentCar) {\n            this.passengers.isRental = true;\n        }\n\n        return true;\n    }\n\n    private initEditSearch(): void {\n        this.unregisterListeners();\n        if (!this.setSearchToCurrent(this.currentService)) {\n            return;\n        }\n        this.setListener(\n            //used to refresh edit search content with fresh data (called by trip listener)\n            this.listenersService.registerListener(ListenerId.LISTEN_EDIT_EXT_CHANGE, this.initEditSearch, this)\n        );\n        this.searchState.setPassengers(this.passengers);\n        // ListenersService.NotifyListeners(ListenersService.LISTEN_PASSENGER_RESET, SearchState.getPassengers());\n        // const displayTxt = ''; //tzPassengerService.GetEditPassengerDisplay(serviceInfo.service, search.passengers, true);\n\n        //initialise the invalid status on search fields fix for TRAZ-6614\n        EngineRuleService.validSearch(\n            this.search,\n            this.passengers,\n            this.selectedServices,\n            this.context.travelType,\n            this.editMode\n        );\n        // _getCompleteStatus();\n        this.searchState.init(this.search);\n        this.buildSearchForm();\n    }\n\n    private initializeTzSearch(): void {\n        this.editingChange.emit(false);\n        this.serviceIcon = '';\n        this.fieldOrderType = this.editMode ? 'editOrder' : 'mainOrder';\n\n        if (this.editMode) {\n            this.initEditSearch();\n            return;\n        }\n        this.unregisterListeners();\n        const search = ToolsService.deepCopy(this.searchDataService.getEmptySearch());\n        this.search = search.searchData;\n        this.oldSearch = ToolsService.deepCopy(this.search);\n        this.context = search.context;\n        this.passengers = TzPassengerUtil.FormPax(this.selectedServices, search.passengers, this.translateService);\n        this.oldPassenger = ToolsService.deepCopy(this.passengers);\n        this.buildSearchForm();\n\n        this.addressService.checkGeoLocationAllowed().pipe(takeUntil(this.destroy$)).subscribe();\n        this.setListener(\n            this.listenersService.registerListener(ListenerId.LISTEN_SERVICES, this.updateFieldConfig, this)\n        );\n        this.setListener(\n            this.listenersService.registerListener(ListenerId.LISTEN_TRAVEL_OPTION, this.updateFieldConfig, this)\n        );\n        this.setListener(\n            this.listenersService.registerListener(ListenerId.LISTEN_SERVICE_REINIT, this.resetSearchToDefault, this)\n        );\n    }\n\n    private setListener(listenerId: number): void {\n        if (this.listeners.indexOf(listenerId) > -1) {\n            return;\n        }\n\n        this.listeners.push(listenerId);\n    }\n\n    // _isAccDetailEdit is to validate to stay in accommodation details\n    private isAccDetailEdit(): string | undefined {\n        // Check whether we are in accommodation details page\n        if (this.router.url.indexOf('/hotel/') !== 0) {\n            return '';\n        }\n        let hotelCode = this.router.url.split('/').pop();\n\n        // Already we are validating isNewSearch. so check the new search contains address change.\n        // if no address change stay in the details page.\n        const combinationParams = EngineRuleService.buildSearchFieldsObj(\n            this.selectedServices,\n            this.context.travelType\n        );\n        const tempSearch = this.searchDataService.getSearch(this.currentService);\n        const resultSearch = tempSearch.searchData;\n        const search = this.search;\n\n        for (const i of combinationParams) {\n            for (const k in combinationParams[i]) {\n                if (k === 'address') {\n                    // if change in address no need to stay in details page\n                    if (search[k]) {\n                        if (\n                            search[k].uniqueKey &&\n                            search[k].uniqueKey !== '' &&\n                            search[k].uniqueKey !== resultSearch[k].uniqueKey\n                        ) {\n                            hotelCode = '';\n                        } else if (\n                            search[k].placeId &&\n                            search[k].placeId !== '' &&\n                            search[k].placeId !== resultSearch[k].placeId\n                        ) {\n                            hotelCode = '';\n                        }\n                    }\n                    return hotelCode;\n                }\n            }\n        }\n        return hotelCode;\n    }\n\n    private getSearchParams(): any {\n        const params = {\n            bookedServiceId: undefined,\n            editMode: this.editMode,\n            serviceId: this.currentService === ServiceId.ACC_DETAILS ? ServiceId.ACC : this.currentService,\n        };\n\n        const hotelCode = this.isAccDetailEdit();\n        if (hotelCode) {\n            return {\n                ...params,\n                hotelCode: this.router.url.split('/')[2],\n                hotelName: decodeURI(this.router.url.split('/')[4]),\n            };\n        }\n\n        return params;\n    }\n\n    private resetCalendar(field: string): void {\n        this.search[field] = {\n            fromDate: null,\n            toDate: null,\n            fromTime: '00:00',\n            toTime: '00:00',\n            showCalendar: false,\n        };\n    }\n\n    private closeAllCalendars() {\n        if (this.search[CalTypes.CAL_RENTAL_TYPE]) {\n            this.search[CalTypes.CAL_RENTAL_TYPE].showCalendar = false;\n        }\n        if (this.search[CalTypes.CAL_TRANSFER_TYPE]) {\n            this.search[CalTypes.CAL_TRANSFER_TYPE].showCalendar = false;\n        }\n        if (this.search[CalTypes.CAL_TRIP_TYPE]) {\n            this.search[CalTypes.CAL_TRIP_TYPE].showCalendar = false;\n        }\n    }\n\n    private buildFormGroup(fieldOrders: SearchConfigOrder[], selectedServiceConf: any): { [key: string]: any } {\n        const formGroup: { [key: string]: any } = {};\n        let fieldCount = 0;\n\n        for (const fieldOrder of fieldOrders) {\n            if (!fieldOrder) {\n                continue;\n            }\n            const conf = selectedServiceConf[fieldOrder.confIdx][fieldOrder.field];\n\n            if (fieldOrder.fieldType === 'cal') {\n                if (!this.search[fieldOrder.field]) {\n                    this.resetCalendar(fieldOrder.field);\n                }\n\n                formGroup[fieldOrder.field] =\n                    conf.optional && (!this.editMode || !conf.editMandatory) ? '' : ['', Validators.required];\n            } else {\n                const dispStr =\n                    this.search[fieldOrder.field] && this.search[fieldOrder.field].displayStr\n                        ? this.search[fieldOrder.field].displayStr\n                        : '';\n                formGroup[fieldOrder.field] =\n                    conf.optional && (!this.editMode || !conf.editMandatory) ? dispStr : [dispStr, Validators.required];\n            }\n\n            fieldCount++;\n        }\n\n        this.fieldLength = fieldCount;\n        return formGroup;\n    }\n\n    private buildSearchForm(): void {\n        const selectedServiceConf = EngineRuleService.buildSearchFieldsObj(\n            this.selectedServices,\n            this.context.travelType\n        );\n        const fieldOrders = SearchDataService.formSearchFieldOrder(\n            selectedServiceConf,\n            this.fieldOrderType,\n            this.editMode\n        );\n\n        this.searchFormGroup = this.fb.group(this.buildFormGroup(fieldOrders, selectedServiceConf));\n\n        this.formOrder = fieldOrders;\n        this.htmlSearchConf = selectedServiceConf;\n        this.buildPassengerFormGroup();\n\n        this.formValues = this.searchFormGroup.value;\n        this.passengersFormValues = this.passengersFormGroup.value;\n    }\n\n    private updateFieldConfig(data: any, subj: number): void {\n        switch (subj) {\n            case ListenerId.LISTEN_SERVICES:\n                this.selectedServices = data;\n                this.passengers = TzPassengerUtil.FormPax(\n                    this.selectedServices,\n                    this.passengers,\n                    this.translateService\n                );\n                this.serviceChange(data);\n                this.buildSearchForm();\n                break;\n            case ListenerId.LISTEN_TRAVEL_OPTION:\n                this.context.travelType = data.travelType;\n                if (data.runMode) {\n                    this.context.runningMode = data.runMode;\n                }\n\n                this.buildSearchForm();\n                break;\n        }\n    }\n\n    private buildPassengerFormGroup(): void {\n        const group: any = {\n            childAges: this.fb.array([]),\n        };\n        const passengerConf = this.htmlSearchConf[1].persons;\n\n        if (passengerConf.driver) {\n            group.driversAge = new FormControl(this.passengers.driversAge > 0 ? this.passengers.driversAge : '');\n            group.driversAge.setValidators([\n                Validators.required,\n                Validators.min(GeneralSettings.passengerRules.minDriverAge),\n                Validators.max(GeneralSettings.passengerRules.maxDriverAge),\n            ]);\n        }\n        this.passengersFormGroup = this.fb.group(group);\n\n        if (!TzPassengerUtil.rentalOnly(this.selectedServices)) {\n            const childAges = [\n                ...this.passengers.infantAges,\n                ...this.passengers.childrenAges,\n                ...this.passengers.youthAges,\n            ];\n            for (const i of childAges) {\n                this.addNewChild(i);\n            }\n        }\n    }\n\n    private notifyLocInconsistency(from: string, to: string, inconsistencyType: string): void {\n        const conf = this.htmlSearchConf;\n        for (const c of conf) {\n            for (const fieldName in c) {\n                if (!c.hasOwnProperty(fieldName)) {\n                    continue;\n                }\n\n                if (fieldName === from) {\n                    from = this.translateService.instant(c[fieldName].placeholder);\n                } else if (fieldName === to) {\n                    to = this.translateService.instant(c[fieldName].placeholder);\n                }\n            }\n        }\n\n        const formatAddress = (addr: string): string => {\n            addr = addr.split(',')[0];\n            addr = addr.split('(')[0];\n            return addr;\n        };\n\n        this.dialogService.openSnackBar({\n            message: this.translateService.instant(inconsistencyType, {\n                from: formatAddress(from),\n                to: formatAddress(to),\n            }),\n        });\n    }\n\n    private cleanLinkedField(field: string) {\n        const search = this.search;\n        const conf = this.htmlSearchConf;\n        if (search[field].noChange) {\n            return;\n        }\n\n        for (const c of conf) {\n            for (const fieldName in c) {\n                if (!c.hasOwnProperty(fieldName)) {\n                    continue;\n                }\n\n                const hasLinkedField = c[fieldName]?.linked?.field === field && search[fieldName]?.latitude;\n                if (!hasLinkedField) {\n                    continue;\n                }\n\n                const dep = c[fieldName].linked;\n                const distance = ToolsService.distance(\n                    search[fieldName].latitude,\n                    search[fieldName].longitude,\n                    search[dep.field].latitude,\n                    search[dep.field].longitude\n                );\n                if (isNaN(distance)) {\n                    continue;\n                }\n\n                const addressLocTooFar = dep.radius && dep.radius > 0 && distance > dep.radius;\n                const addressLocTooNear = dep.minRadius && dep.minRadius > 0 && distance < dep.minRadius;\n                if (addressLocTooFar || addressLocTooNear) {\n                    search[fieldName] = SearchDataService.getNewLoc();\n                    this.searchFormGroup.controls[fieldName].reset();\n                    this.notifyLocInconsistency(\n                        field,\n                        fieldName,\n                        addressLocTooFar ? 'NOTIFS.FROM_TO_TOO_FAR' : 'NOTIFS.FROM_TO_TOO_NEAR'\n                    );\n                }\n            }\n        }\n    }\n\n    private validateSelectedAddress(): void {\n        const searchData = this.search;\n\n        const isFromValidAirportCity =\n            searchData.from.placeId &&\n            (!searchData.from.latitude ||\n                !searchData.from.longitude ||\n                (!searchData.from.isMyLocation && searchData.from.api_source !== AddressSource.SRC_AIRPORT_CITIES));\n        if (isFromValidAirportCity) {\n            this.search.from = SearchDataService.getNewLoc();\n        }\n\n        const isToValidAirportCity =\n            searchData.to.placeId &&\n            (!searchData.to.latitude || !searchData.to.longitude || searchData.to.api_source !== 'sac');\n        if (isToValidAirportCity) {\n            this.search.to = SearchDataService.getNewLoc();\n        }\n    }\n\n    private serviceChange(data: any): void {\n        if (data.transport) {\n            this.validateSelectedAddress();\n        } else if (!data.accommodation) {\n            // reset from and to when single transfer or rental service selected\n            this.search.from = SearchDataService.getNewLoc();\n            this.search.to = SearchDataService.getNewLoc();\n        }\n        if (data.accommodation) {\n            const shouldReset = CalendarUtilsService.isTheSameDaySelectedForAccommodation(\n                'tripCal',\n                this.htmlSearchConf,\n                this.search.tripCal\n            );\n            if (shouldReset) {\n                this.resetDate('tripCal');\n            }\n        }\n    }\n\n    private resetSearchToDefault(): void {\n        const search = ToolsService.deepCopy(this.searchDataService.getEmptySearch());\n        this.search = search.searchData;\n        this.context = search.context;\n        this.passengers = TzPassengerUtil.FormPax(this.selectedServices, search.passengers, this.translateService);\n        this.context.travelType = Trip.ROUND_TRIP;\n        this.searchFormGroup.reset();\n    }\n\n    private resetSearch() {\n        if (this.currentService === undefined || this.currentService === ServiceId.INVALID) {\n            return;\n        }\n        console.error('reset search');\n        const search = ToolsService.deepCopy(this.searchDataService.getSearch(this.currentService));\n        this.search = search.searchData;\n        console.error(this.search);\n        this.passengers = ToolsService.deepCopy(this.passengersOldValue);\n        this.resetPassengersValue = ++this.resetPassengersValue;\n        SearchUtilsService.clearPassengerFormArray(this.childAgesFormArray);\n        this.passengersFormGroup.patchValue({ driversAge: this.passengersOldValue.driversAge });\n        this.resetPassengerValues();\n        this.searchFormGroup.reset({ ...this.formValues });\n    }\n\n    private resetPassengerValues(): void {\n        this.passengersFormValues.childAges.map((childAge) => {\n            this.childAgesFormArray.push(this.fb.group(childAge));\n        });\n    }\n\n    private checkIfSecondaryCalendarsShouldBeReset() {\n        if (\n            CalendarUtilsService.shouldResetTransferCalendar(\n                this.search.transferCal,\n                this.search.tripCal,\n                this.selectedServices\n            )\n        ) {\n            this.resetDate('transferCal');\n        }\n        if (CalendarUtilsService.shouldResetPreselectedDates('rentalCal', this.htmlSearchConf, this.search)) {\n            this.resetDate('rentalCal');\n        }\n    }\n\n    private resetDate(field: string, keepOpen = false): void {\n        this.search[field] = CalendarUtilsService.getDefaultCalendarValue();\n    }\n}\n","<div\n    class=\"form-container\"\n    [class]=\"{\n        'edit-search': editMode,\n        'no-edit-fld': !editing,\n        mob: isModalEditMode,\n        'home-page-search': editing && !editMode\n    }\"\n>\n    <div class=\"search-options-container flex align-center\" data-test=\"search-option-container\" *ngIf=\"!editMode\">\n        <tz-dropdown\n            *ngIf=\"selectedServices['transport'] && !platformService.isMobileDevice\"\n            data-test=\"searching-page-round-trip\"\n            optionKey=\"tripType\"\n            labelKey=\"label\"\n            labelSelectKey=\"label\"\n            placement=\"bottom-left\"\n            className=\"tz-search-option fly-type\"\n            dropArrowDownIcon=\"\"\n            dropArrowUpIcon=\"\"\n            [selectedOptionKey]=\"context.travelType\"\n            [options]=\"trips\"\n            (selectChange)=\"changeTravelType($event)\"\n        ></tz-dropdown>\n        <tz-passenger\n            *ngIf=\"!platformService.isMobileDevice\"\n            [passenger]=\"passengers\"\n            data-test=\"searching-page-passenger\"\n            [passengersFormGroup]=\"passengersFormGroup\"\n            [config]=\"htmlSearchConf[1].persons\"\n            [selectedServices]=\"selectedServices\"\n            (addNewChild)=\"addNewChild($event)\"\n            (applyPax)=\"applyPassenger($event)\"\n            (focusInvalid)=\"focusInvalid()\"\n        ></tz-passenger>\n\n        <!-- <tz-dropdown\n            *ngIf=\"selectedServices['transport']\"\n            data-test=\"searching-page-economy\"\n            optionKey=\"label\"\n            placement=\"bottom-left\"\n            labelKey=\"label\"\n            labelSelectKey=\"label\"\n            className=\"tz-search-option classes\"\n            dropArrowDownIcon=\"\"\n            dropArrowUpIcon=\"\"\n            selectedOptionKey=\"Economy\"\n            [options]=\"classList\"\n        ></tz-dropdown>\n        <div\n            ngbDropdown\n            #menu=\"ngbDropdown\"\n            data-test=\"searching-page-more\"\n            placement=\"bottom-start\"\n            *ngIf=\"selectedServices['accommodation']\"\n        >\n            <div class=\"search-option body-1\" ngbDropdownToggle>\n                <div class=\"tz-icon-tune tz-icon\"></div>\n                {{ 'GENERAL.MORE' | translate }}\n                <div class=\"tz-icon-arrow arrow\"></div>\n            </div>\n            <div ngbDropdownMenu class=\"tz-popup-container hotel-rating\">\n                <div class=\"subtitle-2 title\">{{ 'START_RATING' | translate }}</div>\n                <div class=\"flex rating-container\">\n                    <div\n                        class=\"subtitle-2\"\n                        *ngFor=\"let item of ratingList\"\n                        [ngClass]=\"{ selected: item.selected }\"\n                        (click)=\"item.selected = !item.selected\"\n                    >\n                        {{ item.rating }}\n                        <div class=\"tz-icon-rating-star tz-icon\"></div>\n                    </div>\n                </div>\n                <button\n                    [ngClass]=\"{ inValid: !isRatingSelected() }\"\n                    class=\"btn select-btn selected apply-btn\"\n                    (click)=\"$event.stopPropagation(); menu.close()\"\n                >\n                    {{ 'GENERAL.DONE' | translate }}\n                </button>\n            </div>\n        </div> -->\n    </div>\n\n    <div\n        *ngIf=\"platformService.isMobileDevice && selectedServices['transport']\"\n        class=\"mob-trip\"\n        [class.edit-modal]=\"isModalEditMode\"\n    >\n        <div\n            *ngFor=\"let trip of trips\"\n            class=\"mob-trip-type\"\n            [ngClass]=\"{\n                selected: context.travelType === trip.tripType\n            }\"\n            (click)=\"changeTravelType(trip)\"\n        >\n            {{ trip.label | translate }}\n        </div>\n    </div>\n\n    <form\n        [formGroup]=\"searchFormGroup\"\n        class=\"search-fields-container flex\"\n        [ngClass]=\"{\n            'content-wrapped': fieldLength > 3,\n            mob: isModalEditMode,\n            'flex-column': platformService.isMobileDevice\n        }\"\n    >\n        <div\n            *ngIf=\"editMode && !isModalEditMode\"\n            [class]=\"{ 'chosen-service-logo': editing }\"\n            class=\"chosen-service-icon-cont\"\n            data-test=\"result-page-search-bar-icon\"\n        >\n            <i class=\"edit-search-service-icon\" [class]=\"serviceIcon\"></i>\n        </div>\n        <div class=\"search-fields flex\" [ngClass]=\"{ 'tablet-wrap': fieldLength > 3 }\">\n            <ng-container *ngFor=\"let formField of formOrder; let i = index; let last = last\">\n                <ng-container *ngIf=\"formField\">\n                    <div\n                        class=\"search-components-container\"\n                        [attr.form-field-index]=\"i\"\n                        [ngSwitch]=\"formField.fieldType\"\n                        [class]=\"formField.class\"\n                    >\n                        <ng-template [ngIf]=\"(platformService.isMobileDevice$ | async) === false\">\n                            <tz-loc-field\n                                *ngSwitchCase=\"'loc-field'\"\n                                [searchData]=\"search\"\n                                (invertFromTo)=\"invertFromTo()\"\n                                [htmlConf]=\"htmlSearchConf\"\n                                (locSelected)=\"applySearchData($event)\"\n                                [formGroup]=\"searchFormGroup\"\n                                [formField]=\"formField\"\n                                [readonly]=\"!editing\"\n                                [editMode]=\"editMode\"\n                                (searchDropDownToggle)=\"searchDropDownToggle.emit($event)\"\n                                data-test=\"searching-page-input-from-to-address-field\"\n                            >\n                            </tz-loc-field>\n                        </ng-template>\n                        <ng-template [ngIf]=\"platformService.isMobileDevice$ | async\">\n                            <div *ngIf=\"last && platformService.isMobileDevice && !editMode\">\n                                <tz-passenger\n                                    [passenger]=\"passengers\"\n                                    data-mob=\"searching-page-passenger\"\n                                    [passengersFormGroup]=\"passengersFormGroup\"\n                                    [isMobSearch]=\"true\"\n                                    [config]=\"htmlSearchConf[1].persons\"\n                                    [selectedServices]=\"selectedServices\"\n                                    (addNewChild)=\"addNewChild($event)\"\n                                    (applyPax)=\"applyPassenger($event)\"\n                                    (focusInvalid)=\"focusInvalid()\"\n                                ></tz-passenger>\n                            </div>\n\n                            <tz-mob-loc-field\n                                *ngSwitchCase=\"'loc-field'\"\n                                [searchData]=\"search\"\n                                [htmlConf]=\"htmlSearchConf\"\n                                [formGroup]=\"searchFormGroup\"\n                                [editMode]=\"editMode\"\n                                [formField]=\"formField\"\n                                [editMode]=\"editMode\"\n                                (invertFromTo)=\"invertFromTo()\"\n                                (locSelected)=\"applySearchData($event)\"\n                                [isLast]=\"last\"\n                            >\n                            </tz-mob-loc-field>\n                        </ng-template>\n                        <div [class.search-components-container__calendar]=\"!last || !platformService.isMobileDevice\">\n                            <tz-calendar\n                                *ngSwitchCase=\"'cal'\"\n                                [searchData]=\"search\"\n                                (dateSelected)=\"applySearchData($event)\"\n                                (focusInvalid)=\"focusInvalid()\"\n                                [fieldConf]=\"htmlSearchConf[formField.confIdx][formField.field]\"\n                                [formGroup]=\"searchFormGroup\"\n                                [formField]=\"formField\"\n                                [readonly]=\"editing\"\n                                [travelType]=\"context.travelType\"\n                                [isModalEditMode]=\"isModalEditMode\"\n                                [calData]=\"search[formField.field]\"\n                                [selectedServices]=\"selectedServices\"\n                                (searchDropDownToggle)=\"searchDropDownToggle.emit($event)\"\n                                data-test=\"searching-page-trip-dates\"\n                            ></tz-calendar>\n                        </div>\n                    </div>\n                </ng-container>\n            </ng-container>\n            <div *ngIf=\"editMode\" class=\"search-components-container\">\n                <tz-passenger\n                    [passenger]=\"passengers\"\n                    [passengersFormGroup]=\"passengersFormGroup\"\n                    [config]=\"htmlSearchConf[1].persons\"\n                    [selectedServices]=\"selectedServices\"\n                    (addNewChild)=\"addNewChild($event)\"\n                    (applyPax)=\"applyPassenger($event)\"\n                    (focusInvalid)=\"focusInvalid()\"\n                    [editMode]=\"editMode\"\n                    [resetOldValue]=\"resetPassengersValue\"\n                    [readonly]=\"!editing\"\n                    (searchDropDownToggle)=\"searchDropDownToggle.emit($event)\"\n                    [isMobSearch]=\"isModalEditMode\"\n                ></tz-passenger>\n            </div>\n        </div>\n        <button\n            id=\"tabIdx9\"\n            class=\"search-btn btn-yellow\"\n            (click)=\"onSearch(); $event.stopPropagation()\"\n            [class.d-none]=\"platformService.isMobileDevice\"\n            *ngIf=\"editing || !editMode\"\n            data-test=\"searching-page-search-button\"\n        >\n            <img *ngIf=\"!platformService.isMobileDevice\" src=\"/assets/icons/web/icons/search.svg\" alt=\"\" />\n            <span class=\"txt-white body-2-semibold\" *ngIf=\"platformService.isMobileDevice\">\n                {{ 'SEARCH.SEARCH' | translate }}\n            </span>\n        </button>\n        <div\n            id=\"tabIdx9\"\n            class=\"edit-search-btn\"\n            *ngIf=\"editMode && !editing\"\n            [class.d-none]=\"platformService.isMobileDevice\"\n            data-test=\"result-page-searchBar-editButton\"\n        >\n            {{ 'GENERAL.EDIT' | translate }}\n        </div>\n\n        <button *ngIf=\"platformService.isMobileDevice\" class=\"btn-yellow modal-edit-search-btn\" (click)=\"onSearch()\">\n            {{ 'SEARCH.SEARCH' | translate }}\n        </button>\n    </form>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { SearchComponent } from './search.component';\nimport { LocFieldComponent } from './loc-field/loc-field.component';\nimport { SharedModule } from '@shared/shared.module';\nimport { CalendarComponent } from './calendar/calendar.component';\nimport { PassengerComponent } from './passenger/passenger.component';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { FieldNavigationDirective } from './directives/field-navigation.directive';\nimport { MobLocFieldModalComponent } from './mob-loc-field-modal/mob-loc-field-modal.component';\nimport { MobLocFieldResultsComponent } from './components/mob-loc-field-results/mob-loc-field-results.component';\nimport { MobLocFieldComponent } from './mob-loc-field/mob-loc-field.component';\nimport { TrazlerCalendarModule } from './trazler-calendar/trazler-calendar.module';\nimport { MobSearchDetailsComponent } from './mob-search-details/mob-search-details.component';\n@NgModule({\n    declarations: [\n        SearchComponent,\n        LocFieldComponent,\n        CalendarComponent,\n        PassengerComponent,\n        FieldNavigationDirective,\n        MobLocFieldModalComponent,\n        MobLocFieldComponent,\n        MobLocFieldResultsComponent,\n        MobSearchDetailsComponent,\n    ],\n    imports: [CommonModule, SharedModule, FormsModule, ReactiveFormsModule, NgSelectModule, TrazlerCalendarModule],\n    exports: [\n        SearchComponent,\n        LocFieldComponent,\n        SharedModule,\n        CalendarComponent,\n        PassengerComponent,\n        MobSearchDetailsComponent,\n    ],\n})\nexport class SearchModule {}\n","import { Injector } from '@angular/core';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { PlatformService } from '@services/platform.service';\nimport { SettingsService } from '@services/services/settings-service';\nimport { DatesService } from '@services/modules/search/utils/dates.service';\n\nexport class BaseTrazlerCalendar {\n    protected searchDataService: SearchDataService;\n    protected datesService: DatesService;\n    protected listenersService: ListenersService;\n    protected platformService: PlatformService;\n    protected settingsService: SettingsService;\n\n    constructor(injector: Injector) {\n        this.searchDataService = injector.get(SearchDataService);\n        this.datesService = injector.get(DatesService);\n        this.listenersService = injector.get(ListenersService);\n        this.platformService = injector.get(PlatformService);\n        this.settingsService = injector.get(SettingsService);\n    }\n}\n","/* eslint-disable */\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n} from '@angular/core';\nimport { Trip } from '@core/constants/trip';\nimport { CalTypes } from '@core/constants/call-types.const';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { ListenerId } from '@core/constants/listener-id.const';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { PlatformService } from '@services/platform.service';\nimport { ToolsService } from '@core/utils/tools-service';\nimport { SettingsService } from '@services/services/settings-service';\nimport { CalendarUtilsService } from '@services/modules/search/utils/calendar.utils';\nimport { DatesService } from '@services/modules/search/utils/dates.service';\nimport { GeneralSettings } from '@core/constants/general-settings';\n\nexport enum TimeUintMap {\n    w = 604800000,\n    d = 86400000,\n    h = 3600000,\n    m = 60000,\n    s = 1000,\n}\n\nexport enum TimeUnit {\n    W = 'w',\n    d = 'd',\n    h = 'h',\n    m = 'm',\n    s = 's',\n}\n\n@Component({\n    selector: 'tz-trazler-calendar',\n    templateUrl: './trazler-calendar.component.html',\n    styleUrls: ['./trazler-calendar.component.scss'],\n})\nexport class TrazlerCalendarComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() isMobile: boolean = false;\n    @Input() calendarId = '';\n\n    @Input() calendarConf: any = {\n        class: 'col-xl-4 col-md-4 order3',\n        defaultTime: '09',\n        content: CalTypes.CAL_TRIP_TYPE,\n        dateRange: true,\n        fieldRole: 0,\n        mainOrder: 3,\n        editOrder: 3,\n        maxDays: 28,\n        minDays: 1,\n        placeholder: 'SEARCH.TRIP_DATES',\n        showNights: true,\n        showTripOption: true,\n        tabOrder: 3,\n        time: false,\n    };\n    //@Input() search: ISearchData | undefined = undefined;\n    @Input() search: any;\n    @Input() defaultValue: any;\n    @Input() travelOption: string | Trip = Trip.ONE_WAY;\n    @Input() content = CalTypes.CAL_TRIP_TYPE;\n    @Input() formDisplayStrAttribute = false;\n    @Input() calendarData: any = {};\n    @Input() selectedServices: { [key: string]: boolean } = GeneralSettings.defaultSelectedServices;\n    @Output() hideCalDropdown: EventEmitter<void> = new EventEmitter<void>();\n    @Output() clear: EventEmitter<void> = new EventEmitter<void>();\n    @Output() apply: EventEmitter<any> = new EventEmitter<any>();\n\n    public calTypes = CalTypes;\n    public today = new Date();\n    public disableTime = false;\n    public allowTravelChange = true;\n    public isPickUpDisable = true;\n    public isDropOfDisable = true;\n    public monthsArr: any[] = [];\n    public fromCal = 0;\n    public limitCal: any;\n    public weekHeads: string[] = [];\n    public disableRoundTrip: any;\n    public calModel: any;\n    public minDate: any;\n    public maxDate: any;\n    public fromDate: any;\n    public toDate: any;\n    public toTime: any;\n    public hoverDate: any;\n    public tripType: any;\n    public minDateTime: any;\n\n    public hours: any;\n    public mins: any;\n    public toMins: any;\n    public toHours: any;\n    public time1Text: any;\n    public time2Text: any;\n    public showCalendar: any;\n    public noOfNights: any;\n    public showNights = false;\n\n    public calStyle: any;\n    public dateIns: any;\n\n    public childDateNgModel: any;\n    public show2Month: any;\n    public twoDates: any;\n    public singlePicker: any;\n    public disableToHH: any;\n    public disableToMM: any;\n    public disableToHHInc: any;\n    public disableToMMInc: any;\n    public disableFromHHInc: any;\n    public disableFromMMInc: any;\n    public disableFromHH: any;\n    public disableFromMM: any;\n    public isHoverValidDate: any;\n    public isModalEditMode: boolean | undefined;\n\n    private listenerId: number | undefined;\n    private calTravelOption: any;\n    private data!: {\n        travelOption: string | Trip;\n        searchData: any;\n        fieldConf: any;\n        defaultValue: any;\n        calendarData: any;\n        selectedServices: { [key: string]: boolean };\n        isModalEditMode: boolean;\n    };\n\n    constructor(\n        private searchDataService: SearchDataService,\n        private datesService: DatesService,\n        private listenersService: ListenersService,\n        public platformService: PlatformService,\n        private settingsService: SettingsService\n    ) {}\n\n    public static formAndGetDateIns(_date: Date) {\n        if (!_date) return;\n        return DatesService.getDateNoTime(_date);\n    }\n\n    ngOnInit() {\n        this.initializeCalendarComponent();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        console.log(changes);\n        this.content = this.calendarConf.content;\n        // this.initializeCalendarComponent();\n    }\n\n    ngOnDestroy() {\n        if (this.listenerId) {\n            this.listenersService.unregisterListener(this.listenerId);\n        }\n    }\n\n    public formDate(month_idx: any, day: any) {\n        if (!day || !this.monthsArr.length) return;\n        return DatesService.getDateNoTimeFrom(\n            this.monthsArr[month_idx].year,\n            this.monthsArr[month_idx].month,\n            day.toString()\n        );\n    }\n\n    public isInvalid() {\n        let isInvalid = false;\n\n        switch (this.content) {\n            case CalTypes.CAL_RENTAL_TYPE:\n            case CalTypes.CAL_TRANSFER_TYPE:\n                isInvalid =\n                    (this.singlePicker && !CalendarUtilsService.isValidDate(this.fromDate)) ||\n                    (!this.singlePicker &&\n                        (!CalendarUtilsService.isValidDate(this.fromDate) ||\n                            !CalendarUtilsService.isValidDate(this.toDate))) ||\n                    this.validFromAndToDateTime() ||\n                    (this.singlePicker && this.isPickUpDisable) ||\n                    (!this.singlePicker && this.isDropOfDisable) ||\n                    this.disableTime;\n                break;\n            case CalTypes.CAL_TRIP_TYPE:\n            case CalTypes.CAL_MEETING_TYPE:\n                isInvalid =\n                    (this.singlePicker && !CalendarUtilsService.isValidDate(this.fromDate)) ||\n                    (!this.singlePicker &&\n                        (!CalendarUtilsService.isValidDate(this.fromDate) ||\n                            !CalendarUtilsService.isValidDate(this.toDate)));\n\n                break;\n            default:\n                console.log('unknown cal type:' + this.content);\n                return false;\n        }\n\n        return isInvalid;\n    }\n\n    public closeCalendar() {\n        this.hideCalDropdown.emit();\n        setTimeout(() => {\n            this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n                id: 'tabIdx' + this.calendarConf.tabOrder,\n            });\n        }, 300);\n    }\n\n    public cancelBtn(noClear: boolean): void {\n        this.fromDate = null;\n        this.toDate = null;\n        this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.mins = '00';\n        this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.toMins = '00';\n        this.isPickUpDisable = true;\n        this.isDropOfDisable = true;\n\n        this.calModel.fromDisplayStr = '';\n        this.calModel.toDisplayStr = '';\n        this.calModel.displayStr = '';\n        this.calModel.appliedFromDate = '';\n        this.calModel.appliedToDate = '';\n\n        this.calModel.applied = false;\n        this.noOfNights = 0;\n        this.hoverDate = null;\n\n        this.calModel.businessMeeting = false;\n        this.calModel.preferBC = false;\n        this.calModel.translator = false;\n        this.enableDaysOnSelection(false);\n        //this.rollBackCalendarState();\n        if (!this.minDate && !this.maxDate) {\n            this.setMonths();\n        }\n\n        if (this.minDate) {\n            this.assignNoOfNights();\n        }\n\n        if (!noClear) {\n            this.clear.emit();\n        }\n    }\n\n    public selectDate(month_idx: any, day: any, isBan: any, disable: any) {\n        if (isBan || !day || disable || !this.monthsArr[month_idx]) return;\n\n        var year = this.monthsArr[month_idx].year;\n        var month = this.monthsArr[month_idx].month;\n\n        var _date = new Date(year, month, parseInt(day.toString()));\n\n        var nextYearDate = new Date(this.today.getFullYear() + 1, this.today.getMonth(), this.today.getDate());\n        var newToday = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n        if (_date < newToday || _date > nextYearDate) return;\n\n        var minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        var minHours =\n            this.hours !== undefined\n                ? this.hours\n                : this.calendarConf.defaultTime\n                ? this.calendarConf.defaultTime\n                : '09';\n        var minMinutes = this.mins !== undefined ? this.mins : '00';\n\n        if ((this.fromDate && this.toDate) || (this.fromDate && _date < this.fromDate)) {\n            this.disableFromHH = false;\n            this.disableFromMM = false;\n        } else if (this.fromDate && !this.toDate) {\n            this.disableToHH = false;\n            this.disableToMM = false;\n        }\n        this.disableTime = false;\n\n        this.toMins = this.toMins !== undefined ? this.toMins : '00';\n        this.toHours =\n            this.toHours !== undefined\n                ? this.toHours\n                : this.calendarConf.defaultTime\n                ? this.calendarConf.defaultTime\n                : '09';\n\n        var _today = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n        if (this.calendarConf.time && _today.getTime() === _date.getTime()) {\n            this.minDateTime = _today;\n            var hmin = new Date().getHours();\n            var mmin = new Date().getMinutes();\n            var mmin_reminder = mmin % 10;\n            if (mmin_reminder) {\n                mmin = mmin - mmin_reminder;\n                mmin = mmin + 10;\n                if (mmin === 60) {\n                    mmin = 0;\n                    hmin = hmin + 1;\n                }\n            }\n\n            // Check scope time is past than current time\n            var _scopeDate = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n            _scopeDate.setHours(this.hours, this.mins);\n            var _currentDate = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n            _currentDate.setHours(hmin, mmin);\n\n            if (_scopeDate.getTime() <= _currentDate.getTime()) {\n                minHours = hmin < 10 ? '0' + hmin.toString() : hmin.toString();\n                minMinutes = mmin < 10 ? '0' + mmin.toString() : mmin.toString();\n            }\n            this.minDateTime.setHours(hmin, mmin);\n            this.disableFromHH = true;\n            this.disableFromMM = true;\n            this.disableToHH = true;\n            this.disableToMM = true;\n        }\n\n        var maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        if (!this.twoDates) {\n            this.hoverDate = null;\n            if (minDate && minDate > _date) {\n                // alert('Meeting date should be within trip dates');\n                return;\n            }\n            if (maxDate && maxDate < _date) {\n                return;\n            }\n\n            this.isPickUpDisable = false;\n            this.fromDate = _date;\n            if (this.hours !== minHours || this.mins !== minMinutes) {\n                this.hours = minHours;\n                this.mins = minMinutes;\n            }\n            this.toDate = null;\n            // if (this.calendarConf.showNights) {\n            // this.showNights = true;\n            // this.noOfNights = 1;\n            // }\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n\n            if (!this.isInvalid()) {\n                this.doneBtn(true);\n            }\n            return;\n        }\n\n        if ((this.fromDate && this.toDate) || (this.fromDate && _date < this.fromDate)) {\n            if (minDate && minDate > _date) {\n                return;\n            }\n            if (maxDate && maxDate < _date) {\n                return;\n            }\n            this.isDropOfDisable = true;\n            this.toDate = null;\n            this.hoverDate = null;\n            this.fromDate = _date;\n            if (this.hours !== minHours || this.mins !== minMinutes) {\n                this.hours = minHours;\n                this.mins = minMinutes;\n                this.toHours = minHours;\n                this.toMins = minMinutes;\n            }\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n\n            if (this.fromDate && !this.toDate && this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(true);\n            }\n            return;\n        }\n\n        if (this.fromDate && _date >= this.fromDate) {\n            if (this.twoDates) {\n                if (maxDate && maxDate < _date) {\n                    return;\n                }\n                this.isDropOfDisable = false;\n                if (this.calendarConf.maxDays) {\n                    let dateDifference = this.dateDiff(this.fromDate, _date, TimeUnit.d);\n                    if (this.showNights) dateDifference--;\n                    if (dateDifference >= this.calendarConf.maxDays) {\n                        // $rootthis.alert(true, 'Booking is allowed up to ' + this.calendarConf.maxDays + (this.showNights ? ' nights' : ' days') + ' only');\n                        setTimeout(() => {\n                            //  $rootthis.alert(false, \"\");\n                            this.assignNoOfNights();\n                        }, 3000);\n                        return;\n                    }\n                }\n\n                var fromDate = new Date(this.fromDate.getFullYear(), this.fromDate.getMonth(), this.fromDate.getDate());\n                let dateDifference = this.dateDiff(fromDate, _date, TimeUnit.d);\n                if (dateDifference < this.calendarConf.minDays) {\n                    // alertBox.prompt('Check-In and Check-Out dates can not be same');\n                    return;\n                }\n\n                //set 30mins to dropOff time from pickup time if current date is choosed\n                if (dateDifference <= 0) {\n                    var drop_hour = parseInt(this.hours) + 1;\n                    var pick_min = parseInt(this.mins);\n                    var mins = pick_min + 30;\n                    if (mins >= 60) {\n                        mins = mins - 60;\n                        this.toHours = drop_hour;\n                    }\n\n                    if (this.hours > this.toHours) {\n                        this.toHours = this.hours;\n                    }\n\n                    this.toMins = mins < 10 ? '0' + mins : mins;\n                }\n\n                this.toDate = _date;\n                // if (this.calendarConf.showNights) {\n                // this.showNights = true;\n                this.assignNoOfNights(this.fromDate, this.toDate, false);\n                // }\n                this.calModel.updateData = true;\n            }\n\n            if (this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(false);\n            }\n\n            if (this.calendarConf.minDays === 0 && !this.toDate) {\n                this.disableDaysOnSelection(true);\n            }\n\n            if (!this.isInvalid()) {\n                this.doneBtn(true);\n            }\n            return;\n        }\n        if (minDate && minDate > _date) {\n            return;\n        }\n        if (maxDate && maxDate < _date) {\n            return;\n        }\n\n        this.isPickUpDisable = false;\n        this.fromDate = _date;\n        if (this.hours !== minHours || this.mins !== minMinutes) {\n            this.hours = minHours;\n            this.mins = minMinutes;\n            this.toHours = minHours;\n            this.toMins = minMinutes;\n        }\n\n        if (this.fromDate && !this.toDate && this.calendarConf.maxDays) {\n            this.disableDaysOnSelection(true);\n        }\n\n        this.assignNoOfNights(this.fromDate, this.toDate, false);\n    }\n\n    public onApplyDate(data: { newDates: any; keepOpen: boolean }) {\n        this.apply.emit(data);\n    }\n\n    private initLangDates(): void {\n        this.weekHeads = this.datesService.getWeekHeads();\n    }\n\n    // set date range correctly when linked to travel option (this.calendarConf.twoDates === null)\n    private setDateRange(conf: any, search: any, isInit?: boolean) {\n        if (this.calendarConf.dateRange === CalTypes.CAL_RANGE_FREE) {\n            this.allowTravelChange = true; // use can set oneWay/roundTrip\n            this.calTravelOption = this.calModel.tripType ? this.calModel.tripType : Trip.ROUND_TRIP;\n        } else {\n            this.allowTravelChange = false; // use can set oneWay/roundTrip\n            this.calTravelOption = this.travelOption;\n        }\n        if (conf.linked) {\n            for (let dep in conf.linked) {\n                if (search[conf.linked[dep]]) {\n                    switch (dep) {\n                        case 'fromDate':\n                            // case cal is open before the one it depends on\n                            if (search[conf.linked[dep]].fromDate) {\n                                this.minDate = new Date(search[conf.linked[dep]].fromDate);\n                            }\n                            break;\n                        case 'toDate':\n                            // case cal is open before the one it depends on\n                            if (search[conf.linked[dep]].toDate) {\n                                this.maxDate = new Date(search[conf.linked[dep]].toDate);\n                            }\n                            break;\n                    }\n                }\n            }\n        }\n        if (this.calModel.resultSet && isInit) {\n            this.calTravelOption = this.calModel.twoDates ? Trip.ROUND_TRIP : Trip.ONE_WAY;\n        }\n        this.tripType = this.calModel.disableRoundTrip ? Trip.ONE_WAY : this.calTravelOption;\n        this.calTravelOption = this.tripType;\n        this.twoDates = CalendarUtilsService.isTwoDates(this.calendarConf.dateRange, this.calTravelOption);\n        //TODO remove once new mode used (replace singlePicker var on html by !datRange)\n        this.singlePicker = !this.twoDates;\n    }\n\n    private validFromAndToDateTime() {\n        let _fromdate, _todate;\n\n        if (CalendarUtilsService.isValidDate(this.fromDate)) {\n            _fromdate = new Date(this.fromDate.getTime());\n        } else {\n            return false;\n        }\n        if (CalendarUtilsService.isValidDate(this.toDate)) {\n            _todate = new Date(this.toDate.getTime());\n        } else {\n            return false;\n        }\n\n        _fromdate?.setHours(parseInt(this.hours), parseInt(this.mins));\n        if (_todate) _todate.setHours(parseInt(this.toHours), parseInt(this.toMins));\n\n        if (this.calendarConf.time === 'true' && !this.twoDates) {\n            return this.minDateTime && _fromdate.getTime() < this.minDateTime.getTime();\n        }\n        if (this.twoDates && this.calendarConf.time === 'true') {\n            return (\n                _fromdate.getTime() >= _todate.getTime() ||\n                (this.minDateTime && _fromdate.getTime() < this.minDateTime.getTime())\n            );\n        } else {\n            return false;\n        }\n    }\n\n    private enableDaysOnSelection(disable: boolean): void {\n        this.limitCal = this.monthsArr.length;\n        for (var i = 0; i < this.monthsArr.length; i++) {\n            this.monthsArr[i].monthDays.forEach((days: any) => {\n                days.forEach((d: any) => {\n                    d.disable = disable;\n                });\n            });\n        }\n    }\n\n    private disableDaysOnSelection(disable: any): void {\n        // if (calTravelOption === Trip.ONE_WAY) return;\n        if (!this.calendarConf.maxDays) return;\n        if (!disable) {\n            this.enableDaysOnSelection(disable);\n            return;\n        }\n\n        let restrictDays = parseInt(this.calendarConf.maxDays);\n        if (!this.showNights) restrictDays = restrictDays - 1;\n        let _fromDate = new Date(this.fromDate.valueOf());\n        let addDays = _fromDate.getDate() + restrictDays;\n        let restrictDate = new Date(_fromDate.valueOf());\n        restrictDate.setDate(addDays);\n\n        this.limitCal = this.monthsArr.length;\n        for (var i = 0; i < this.monthsArr.length; i++) {\n            this.monthsArr[i].monthDays.forEach((dd: any) => {\n                dd.forEach((d: any) => {\n                    if (!d.text) return;\n\n                    let _d = new Date(this.monthsArr[i].year, this.monthsArr[i].month, d.text);\n                    if (_d > restrictDate) {\n                        d.disable = true;\n                        if (this.limitCal === this.monthsArr.length) {\n                            this.limitCal = i + (d.text === 1 ? 0 : 1);\n                        }\n                    }\n                });\n            });\n        }\n    }\n\n    private doneBtn(keepOpen?: boolean) {\n        let res: any = {};\n\n        if (!(this.fromDate instanceof Date && !isNaN(this.fromDate.getTime()))) return;\n        if (this.twoDates && !(this.toDate instanceof Date)) return;\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        let fromDate = new Date(this.fromDate.getFullYear(), this.fromDate.getMonth(), this.fromDate.getDate());\n        let toDate;\n        if (minDate && minDate > fromDate) {\n            return;\n        }\n        if (maxDate && maxDate < fromDate) {\n            return;\n        }\n\n        if (this.fromDate && this.fromDate instanceof Date) {\n            res.fromDate = DatesService.getDateNoTime(this.fromDate);\n            res.toDisplayStr = '';\n        }\n        if (this.toDate && this.toDate instanceof Date) {\n            res.toDate = DatesService.getDateNoTime(this.toDate);\n            toDate = new Date(this.toDate.getFullYear(), this.toDate.getMonth(), this.toDate.getDate());\n        } else {\n            res.toDate = null;\n        }\n        if (this.twoDates) {\n            if (this.toHours) {\n                res.toTime = this.toHours + ':' + this.toMins;\n            } else {\n                res.toTime = '00:00';\n            }\n        } else {\n            res.toTime = null;\n        }\n        if (this.hours) {\n            res.fromTime = this.hours + ':' + this.mins;\n        } else {\n            res.fromTime = '00:00';\n        }\n\n        if (this.allowTravelChange) {\n            res.tripType = this.tripType;\n        }\n        res.twoDates = this.twoDates;\n\n        if (this.formDisplayStrAttribute) {\n            res.displayStr = this.datesService.formDoubleDate(fromDate, toDate);\n        } else {\n            res.displayStr = this.calModel.fromDisplayStr;\n            if (this.calModel.toDisplayStr) {\n                res.displayStr = res.fromDisplayStr + ' - ' + res.toDisplayStr;\n            }\n        }\n\n        if (this.formDisplayStrAttribute && toDate && this.dateDiff(fromDate, toDate, TimeUnit.d) === 0) {\n            const fromMonth = this.datesService.getMonth(fromDate.getMonth(), true);\n            res.fromDisplayStr = res.fromDisplayStr + ' ' + fromMonth + ', ' + fromDate.getFullYear();\n            res.toDisplayStr = '';\n        }\n\n        this.apply.emit({ newDates: res, keepOpen });\n        if (!keepOpen) {\n            this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n                id: 'tabIdx' + this.calendarConf.tabOrder,\n            });\n        }\n    }\n\n    private initializeCalendarComponent(): void {\n        if (this.platformService.isMobileDevice) {\n            this.travelOption = this.data.travelOption;\n            this.calendarConf = this.data.fieldConf;\n            this.search = this.data.searchData;\n            this.defaultValue = this.data.defaultValue;\n            this.calendarData = this.data.calendarData;\n            this.content = this.data.fieldConf.content;\n            this.selectedServices = this.data.selectedServices;\n            this.isModalEditMode = this.data.isModalEditMode;\n        }\n\n        if (this.listenerId === undefined) {\n            this.listenerId = this.listenersService.registerListener(\n                [ListenerId.LISTEN_LANG, ListenerId.LISTEN_CAL_REFRESH],\n                this.setStaticValues\n            );\n        }\n        this.initLangDates();\n\n        this.isMobile = this.platformService.isMobileDevice;\n\n        this.fromDate = null;\n        this.toDate = null;\n        this.hoverDate = null;\n        this.mins = '00';\n        this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.toMins = '00';\n        this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.time1Text = this.calendarConf.time1Text;\n        this.time2Text = this.calendarConf.time2Text;\n\n        this.showCalendar = false;\n        this.noOfNights = 0;\n        this.showNights = this.calendarConf.showNights; // show number of nights on date range\n\n        let initModel;\n        if (this.calendarData) {\n            this.calModel = ToolsService.deepCopy(this.calendarData);\n        } else {\n            this.calModel = {\n                fromDate: this.fromDate,\n                toDate: this.toDate,\n                showCalendar: this.showCalendar,\n            };\n        }\n        this.disableRoundTrip = this.calModel.disableRoundTrip;\n        this.setDateRange(this.calendarConf, this.search, true);\n\n        if (this.defaultValue) {\n            initModel = this.defaultValue;\n        } else {\n            initModel = this.calModel;\n        }\n        if (!this.twoDates && initModel.toDate) {\n            initModel.toDate = null;\n            initModel.toTime = '';\n        }\n        this.setMonths();\n        this.initDateIns(initModel);\n        this.calStyle = {};\n        this.dateIns = {};\n\n        this.childDateNgModel = '';\n        this.show2Month = true;\n\n        this.assignDefaultValue();\n        setTimeout(() => {\n            if (!this.isMobile || !this.fromDate || this.fromDate === '') return;\n            let scrollEl = document.getElementById(this.fromDate.getMonth() + this.fromDate.getFullYear());\n            if (scrollEl) scrollEl.scrollIntoView();\n        });\n    }\n\n    private setStaticValues(subj: any): void {\n        switch (subj) {\n            case ListenerId.LISTEN_LANG:\n                this.initLangDates();\n                break;\n            case ListenerId.LISTEN_CAL_REFRESH: // on travel options change\n                this.initializeCalendarComponent();\n                break;\n            default:\n                console.log('received unhandled listener subject:' + subj);\n        }\n    }\n\n    private getMonthArr(year: any, month: any) {\n        var monthFirstDay = new Date(year, month, 1);\n        var lastDay = new Date(year, month + 1, 0);\n        var monthsArr = [];\n\n        for (var d = 0; d < this.datesService.getDay(monthFirstDay); d++) {\n            monthsArr.push({\n                id: 'D' + d,\n                text: '',\n            });\n        }\n        for (var i = 1; i <= lastDay.getDate(); i++) {\n            monthsArr.push({\n                id: i,\n                text: i,\n                isLast: i === lastDay.getDate(),\n                disable: false,\n            });\n        }\n        var noOfWeeks = parseInt((monthsArr.length / 7).toString());\n        var _rem = monthsArr.length % 7;\n        if (_rem > 0) {\n            noOfWeeks = noOfWeeks + 1;\n        }\n\n        var months = [];\n        for (var s = 0; s < noOfWeeks; s++) {\n            var sliceArr = monthsArr.slice(s * 7, s * 7 + 7);\n            months.push(sliceArr);\n        }\n\n        return months;\n    }\n\n    private setMonths() {\n        const today = new Date();\n        const fromDate = this.minDate ? this.minDate : today;\n        const toDate = this.maxDate\n            ? this.maxDate\n            : new Date(today.getFullYear(), today.getMonth() + 12, today.getDate());\n        this.monthsArr = [];\n\n        let monthLimit =\n            CalendarUtilsService.monthDiff(fromDate, toDate) > 0\n                ? CalendarUtilsService.monthDiff(fromDate, toDate) + 1\n                : 1;\n        /* Date needs to be always 'one' otherwise if current date is 30 then when we add one month to jan\n        it'll become march 02 since there is only 28 days in feb in normal years */\n\n        let frDate = new Date(fromDate.getFullYear(), fromDate.getMonth(), 1);\n\n        for (var i = 0; i < monthLimit; i++) {\n            frDate.setMonth(frDate.getMonth() + (i === 0 ? 0 : 1));\n            var monthObj = CalendarUtilsService.getMonthAndYear(frDate.getMonth(), frDate.getFullYear());\n            this.monthsArr.push({\n                idx: i,\n                monthObj,\n                month: monthObj.monthNumber,\n                monthTxt: this.datesService.getMonth(monthObj.monthNumber, false),\n                year: monthObj.year,\n                monthDays: this.datesService.getMonthArrayForCalendar(monthObj.year, monthObj.monthNumber),\n            });\n        }\n    }\n\n    private initDateIns(dateIns: any) {\n        this.calModel.showCalendar = dateIns.showCalendar; //Change\n        this.noOfNights = 0;\n        if (dateIns.fromDate) {\n            var fromDate = DatesService.getNewDate(dateIns.fromDate);\n            if (fromDate) {\n                if (dateIns.fromTime) {\n                    let res = dateIns.fromTime.split(':');\n                    this.hours = res[0];\n                    this.mins = res[1];\n                } else {\n                    this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n                    this.mins = '00';\n                }\n\n                this.isPickUpDisable = false;\n                this.fromDate = fromDate;\n                this.calModel.fromDate = fromDate;\n                for (var i = 0; i < this.monthsArr.length; i++) {\n                    this.monthsArr[i].monthDays.forEach((dd: any) => {\n                        dd.forEach((d: any) => {\n                            if (!d.text) return;\n                            let _d = new Date(this.monthsArr[i].year, this.monthsArr[i].month, d.text);\n                            if (_d.getTime() === fromDate.getTime()) this.fromCal = i === 12 ? 11 : i;\n                        });\n                    });\n                }\n                if (this.calendarConf.showNights) {\n                    this.noOfNights = 1;\n                }\n            }\n            var toDate = null;\n            if ((this.calendarConf.dateRange || this.twoDates) && dateIns.toDate)\n                toDate = DatesService.getNewDate(dateIns.toDate);\n            if (toDate) {\n                if (dateIns.toTime) {\n                    let res = dateIns.toTime.split(':');\n                    this.toHours = res[0];\n                    this.toMins = res[1];\n                } else {\n                    this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n                    this.toMins = '00';\n                }\n\n                this.isDropOfDisable = false;\n                this.calModel.toDate = toDate;\n                this.toDate = new Date(toDate.getFullYear(), toDate.getMonth(), parseInt(toDate.getDate().toString()));\n\n                this.assignNoOfNights(fromDate, toDate, false);\n            }\n\n            if ((this.calendarConf.dateRange || this.twoDates) && !this.toDate && this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(true);\n            }\n        }\n    }\n\n    private assignDefaultValue() {\n        if (this.calendarConf.calStyle && this.platformService.isMobileDevice) {\n            this.calStyle = JSON.parse(this.calendarConf.calStyle);\n        }\n\n        if (this.calendarConf.showNights) {\n            this.showNights = this.calendarConf.showNights;\n        }\n\n        if (this.calModel && !this.calModel.fromDate) {\n            this.setMonths();\n            return;\n        }\n        this.initDateIns(this.calModel);\n    }\n\n    private dateDiff(fromdate: Date, toDate: Date, datepart: TimeUnit) {\n        datepart = datepart.toLowerCase() as TimeUnit;\n        const fromD = new Date(fromdate.valueOf());\n        const toD = new Date(toDate.valueOf());\n        if (datepart === 'h') {\n            fromD.setHours(this.hours, this.mins);\n            toD.setHours(this.toHours, this.toMins);\n        }\n        const diff = toD.valueOf() - fromD.valueOf();\n\n        // if we want number of days but have less than 24h return 1 if we are not on\n        // same day, 0 otherwise\n        if (datepart === 'd' && diff < TimeUintMap['d']) {\n            return fromD.getDay() !== toD.getDay() ? 1 : 0;\n        }\n        return Math.floor(diff / TimeUintMap[datepart]);\n    }\n\n    private assignNoOfNights(fromDate?: any, toDate?: any, checkToDateAvail?: any) {\n        if (checkToDateAvail && this.toDate) return;\n\n        if (!fromDate || !toDate) {\n            this.noOfNights = 0;\n            return;\n        }\n\n        let dateDifference = this.dateDiff(fromDate, toDate, TimeUnit.d);\n        if (this.content === CalTypes.CAL_RENTAL_TYPE || this.content === CalTypes.CAL_TRANSFER_TYPE) {\n            dateDifference = this.dateDiff(fromDate, toDate, TimeUnit.h); //calculating the number of hours for the car rental search service\n            this.noOfNights = Math.ceil(dateDifference / 24);\n            return;\n        }\n        if (dateDifference >= 0) {\n            this.noOfNights = dateDifference;\n            if (this.noOfNights === 0 && this.showNights) {\n                this.noOfNights = -1; //if same day is chosen then 1 day to be displayed.\n            }\n        }\n    }\n\n    @HostListener('document:keyup', ['$event'])\n    private onKeyUp(e: KeyboardEvent) {\n        if (e.keyCode !== 13) return;\n        this.doneBtn();\n    }\n\n    @HostListener('document:click', ['$event'])\n    private eventHandlerFunc(e: any) {\n        if (e.target && e.target.id === this.calendarId) return;\n\n        // no close on input field of calendar\n        if (\n            e.target &&\n            e.target.attributes['no-calendar-close'] &&\n            e.target.attributes.calId?.nodeValue === this.calendarId\n        )\n            return;\n        // get calendar to close\n        let doc = document.getElementById(this.calendarId);\n        if (!doc) return;\n        if (e.target.id !== 'cal-clear' && doc.contains(e.target)) {\n            return;\n        }\n\n        if (\n            e.target.parentNode.id === 'trip-check-box' ||\n            e.target.id === 'trip-check-box' ||\n            (!this.isMobile && e.target.id === 'cal-clear') ||\n            e.target.classList.contains('previous-nxt-btn') ||\n            e.target.classList.contains('day-number-text') ||\n            e.target.classList.contains('t-day') ||\n            e.target.parentNode.classList.contains('previous-nxt-btn')\n        ) {\n            return;\n        }\n        this.hideCalDropdown.emit();\n        if (\n            !this.isInvalid() &&\n            e.target.nodeName !== 'INPUT' &&\n            !this.isMobile &&\n            !ToolsService.hasSomeParentTheClass(e.target, 'dropdown-toggle')\n        ) {\n            this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n                id: 'tabIdx' + this.calendarConf.tabOrder,\n            });\n        }\n    }\n}\n","<div class=\"trazler-generic-calendar\" [hidden]=\"platformService.isMobileDevice && content !== calTypes.CAL_TRIP_TYPE\">\n    <ng-container [ngSwitch]=\"content\">\n        <tz-trazler-transfer-calendar\n            *ngSwitchCase=\"calTypes.CAL_TRANSFER_TYPE\"\n            [monthsArr]=\"monthsArr\"\n            [weekHeads]=\"weekHeads\"\n            [search]=\"search\"\n            [defaultValue]=\"defaultValue\"\n            [calendarData]=\"calendarData\"\n            (apply)=\"onApplyDate($event)\"\n            (clear)=\"cancelBtn(false)\"\n            (closeCalendar)=\"closeCalendar()\"\n            [travelOption]=\"travelOption\"\n            [calendarConf]=\"calendarConf\"\n            [calType]=\"calTypes.CAL_TRANSFER_TYPE\"\n            [isMobile]=\"isMobile\"\n        >\n        </tz-trazler-transfer-calendar>\n        <tz-trazler-transfer-calendar\n            *ngSwitchCase=\"calTypes.CAL_RENTAL_TYPE\"\n            [monthsArr]=\"monthsArr\"\n            [weekHeads]=\"weekHeads\"\n            [search]=\"search\"\n            [defaultValue]=\"defaultValue\"\n            [calendarData]=\"calendarData\"\n            (apply)=\"onApplyDate($event)\"\n            (clear)=\"cancelBtn(false)\"\n            (closeCalendar)=\"closeCalendar()\"\n            [travelOption]=\"travelOption\"\n            [calendarConf]=\"calendarConf\"\n            [calType]=\"calTypes.CAL_RENTAL_TYPE\"\n            [isMobile]=\"isMobile\"\n        >\n        </tz-trazler-transfer-calendar>\n        <tz-trazler-trip-dates-calendar\n            *ngSwitchCase=\"calTypes.CAL_TRIP_TYPE\"\n            [monthsArr]=\"monthsArr\"\n            [weekHeads]=\"weekHeads\"\n            [search]=\"search\"\n            [defaultValue]=\"defaultValue\"\n            [calendarData]=\"calendarData\"\n            (apply)=\"onApplyDate($event)\"\n            (clear)=\"cancelBtn(false)\"\n            (closeCalendar)=\"closeCalendar()\"\n            [travelOption]=\"travelOption\"\n            [calendarConf]=\"calendarConf\"\n            [isMobile]=\"isMobile\"\n            [isModalEditMode]=\"isModalEditMode\"\n            [selectedServices]=\"selectedServices\"\n        >\n        </tz-trazler-trip-dates-calendar>\n    </ng-container>\n</div>\n\n<div\n    *ngIf=\"\n        platformService.isMobileDevice &&\n        (content === calTypes.CAL_TRANSFER_TYPE || content === calTypes.CAL_RENTAL_TYPE)\n    \"\n>\n    <tz-datetime-calendar\n        [calendarConf]=\"calendarConf\"\n        [defaultValue]=\"defaultValue\"\n        [calendarType]=\"content\"\n        [travelOption]=\"travelOption\"\n        [search]=\"search\"\n    ></tz-datetime-calendar>\n</div>\n","import {\n    Component,\n    EventEmitter,\n    Injector,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n} from '@angular/core';\nimport { Trip } from '@core/constants/trip';\nimport { CalTypes } from '@core/constants/call-types.const';\nimport { ListenerId } from '@core/constants/listener-id.const';\nimport { TimeUintMap, TimeUnit } from '../trazler-calendar/trazler-calendar.component';\nimport { ToolsService } from '@core/utils/tools-service';\nimport { BaseTrazlerCalendar } from '../base-trazler-calendar';\nimport { CalendarUtilsService } from '@services/modules/search/utils/calendar.utils';\nimport { DatesService } from '@services/modules/search/utils/dates.service';\n\n@Component({\n    selector: 'tz-trazler-transfer-calendar',\n    templateUrl: './trazler-transfer-calendar.component.html',\n    styleUrls: ['./trazler-transfer-calendar.component.scss'],\n})\nexport class TrazlerTransferCalendarComponent extends BaseTrazlerCalendar implements OnInit, OnDestroy, OnChanges {\n    @Input() isMobile = false;\n    @Input() calType!: string;\n    @Input() monthsArr: any[] = [];\n    @Input() monthDaysArr: any[] = [];\n    @Input() weekHeads: string[] = [];\n\n    @Output() closeCalendar: EventEmitter<void> = new EventEmitter<void>();\n\n    @Input() calendarConf: any = {\n        class: 'col-xl-4 col-md-4 order3',\n        content: 'transferCal',\n        dateRange: 'free',\n        fieldRole: 2,\n        editOrder: 3,\n        mainOrder: 2,\n        maxDays: 84,\n        minDays: 0,\n        placeholder: 'SEARCH.TRIP_DATES',\n        showNights: false,\n        showTripOption: true,\n        tabOrder: 3,\n        time: true,\n    };\n    //@Input() search: ISearchData | undefined = undefined;\n    @Input() search: any;\n    @Input() defaultValue: any;\n    @Input() travelOption: string | Trip = Trip.ONE_WAY;\n    @Input() content = CalTypes.CAL_TRANSFER_TYPE;\n    @Input() formDisplayStrAttribute = true;\n    @Input() calendarData: any = {};\n    @Output() hideCalDropdown: EventEmitter<void> = new EventEmitter<void>();\n    @Output() clear: EventEmitter<void> = new EventEmitter<void>();\n    @Output() apply: EventEmitter<any> = new EventEmitter<any>();\n\n    public today = new Date();\n    public disableTime = false;\n    public allowTravelChange = true;\n    public isPickUpDisable = true;\n    public isDropOfDisable = true;\n\n    public fromCal = 0;\n    public limitCal: any;\n\n    public disableRoundTrip: any;\n    public calModel: any;\n    public minDate: any;\n    public maxDate: any;\n    public fromDate: any;\n    public toDate: any;\n    public toTime: any;\n    public hoverDate: any;\n    public tripType: any;\n    public minDateTime: any;\n\n    public hours: any;\n    public mins: any;\n    public toMins: any;\n    public toHours: any;\n    public time1Text: any;\n    public time2Text: any;\n    public showCalendar: any;\n    public noOfNights: any;\n    public showNights = false;\n\n    public calStyle: any;\n    public dateIns: any;\n\n    public childDateNgModel: any;\n    public show2Month: any;\n    public twoDates: any;\n    public singlePicker: any;\n    public disableToHH: any;\n    public disableToMM: any;\n    public disableToHHInc: any;\n    public disableToMMInc: any;\n    public disableFromHHInc: any;\n    public disableFromMMInc: any;\n    public disableFromHH: any;\n    public disableFromMM: any;\n    public isHoverValidDate: any;\n\n    private listenerId: number | undefined;\n    private calTravelOption: any;\n    private calTypes = CalTypes;\n\n    constructor(injector: Injector) {\n        super(injector);\n    }\n\n    public get todayDate(): Date {\n        return new Date();\n    }\n\n    public get isOneWay(): boolean {\n        return this.tripType === 'oneWay' && this.calTypes.CAL_RENTAL_TYPE !== this.calType;\n    }\n\n    ngOnInit() {\n        this.initializeCalendarComponent();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // this.initializeCalendarComponent();\n    }\n\n    ngOnDestroy() {\n        if (this.listenerId) {\n            this.listenersService.unregisterListener(this.listenerId);\n        }\n    }\n\n    public onCloseCalendar() {\n        this.closeCalendar.emit();\n    }\n\n    public todayComparison(year: any, m: any, day: any): boolean {\n        return CalendarUtilsService.todayComparison(year, m, day);\n    }\n\n    public moveToNextMonth(add: number) {\n        const limitThreshold = this.content === CalTypes.CAL_MEETING_TYPE ? 1 : 2;\n        if (\n            (this.fromCal === 0 && add === -1) ||\n            ((this.fromCal + limitThreshold === this.monthsArr.length ||\n                this.fromCal + limitThreshold >= this.limitCal) &&\n                add === 1)\n        ) {\n            return;\n        }\n        this.fromCal += add;\n    }\n\n    public formAndGetDateIns(_date: Date) {\n        if (!_date) {\n            return;\n        }\n        return DatesService.getDateNoTime(_date);\n    }\n\n    public formDate(month_idx: any, day: any) {\n        if (!day || !this.monthsArr.length) {\n            return;\n        }\n        return DatesService.getDateNoTimeFrom(\n            this.monthsArr[month_idx].year,\n            this.monthsArr[month_idx].month,\n            day.toString()\n        );\n    }\n\n    public getDateComparisonFromVal(year: any, month: any, day: any, str: 'minDate' | 'maxDate'): any {\n        if (!this[str]) {\n            return;\n        }\n        if (!day) {\n            return;\n        }\n        const formDateIns = new Date(year, month, day);\n\n        if (!formDateIns) {\n            return;\n        }\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        if (str === 'minDate' && minDate) {\n            return formDateIns < minDate;\n        }\n        if (maxDate) {\n            return formDateIns > maxDate;\n        }\n    }\n\n    public incrementDecrementHours(inc_dec: number, varStr: 'hours' | 'toHours'): void {\n        let hrs = parseInt(this[varStr], 10);\n        if (!hrs) {\n            hrs = 0;\n        }\n        hrs = hrs + inc_dec;\n        if (hrs < 0) {\n            hrs = 23;\n        }\n        if (hrs > 23) {\n            hrs = 0;\n        }\n        this[varStr] = hrs < 10 ? '0' + hrs : hrs;\n        if (this.fromDate || this.toDate) {\n            let isTo = false;\n            let date = new Date(this.fromDate.getTime());\n\n            if (varStr === 'toHours') {\n                date = new Date(this.toDate.getTime());\n                isTo = true;\n            }\n\n            if (date) {\n                // _date.setHours(hrs);\n                this.validateTimeSelection(date, isTo);\n            }\n        }\n\n        if (!this.isInvalid()) {\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n            this.doneBtn(true);\n        }\n    }\n\n    public incrementDecrementMinutes(inc_dec: number, varStr: 'mins' | 'toMins'): void {\n        let mins = parseInt(this[varStr], 10);\n        if (!mins) {\n            mins = 0;\n        }\n        mins = mins - 10;\n        if (inc_dec === 1) {\n            mins = mins + 20;\n        }\n\n        if (mins < 0) {\n            mins = 50;\n        }\n        if (mins >= 59) {\n            mins = 0;\n        }\n        this[varStr] = mins < 10 ? '0' + mins : mins;\n\n        if (this.fromDate || this.toDate) {\n            let isTo = false;\n            let date = new Date(this.fromDate.getTime());\n\n            if (varStr === 'toMins') {\n                date = new Date(this.toDate.getTime());\n                isTo = true;\n            }\n\n            if (date) {\n                this.validateTimeSelection(date, isTo);\n            }\n        }\n\n        if (!this.isInvalid()) {\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n            this.doneBtn(true);\n        }\n    }\n\n    public isInvalid() {\n        let isInvalid = false;\n        isInvalid =\n            (this.singlePicker && !CalendarUtilsService.isValidDate(this.fromDate)) ||\n            (!this.singlePicker &&\n                (!CalendarUtilsService.isValidDate(this.fromDate) || !CalendarUtilsService.isValidDate(this.toDate))) ||\n            this.validFromAndToDateTime() ||\n            (this.singlePicker && this.isPickUpDisable) ||\n            (!this.singlePicker && this.isDropOfDisable) ||\n            this.disableTime;\n\n        return isInvalid;\n    }\n\n    public changeTravelOption(travelOption: any) {\n        if (this.calendarConf.dateRange === CalTypes.CAL_RANGE_FREE) {\n            this.calModel.tripType = travelOption;\n            this.search.transferCal.tripType = travelOption;\n        }\n        if (travelOption === Trip.ONE_WAY && this.search.transferCal.toDate) {\n            this.toDate = null;\n            this.noOfNights = 0;\n            this.hoverDate = null;\n            this.search.transferCal.toDate = null;\n            this.search.transferCal.twoDates = false;\n        }\n\n        this.setDateRange(this.calendarConf, this.search);\n        if (!this.isInvalid()) {\n            this.doneBtn(true);\n            this.enableDaysOnSelection(false);\n        } else {\n            this.disableDaysOnSelection(true);\n        }\n    }\n\n    public cancelBtn(noClear: boolean): void {\n        this.fromDate = null;\n        this.toDate = null;\n        this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.mins = '00';\n        this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.toMins = '00';\n        this.isPickUpDisable = true;\n        this.isDropOfDisable = true;\n\n        this.calModel.fromDisplayStr = '';\n        this.calModel.toDisplayStr = '';\n        this.calModel.displayStr = '';\n        this.calModel.appliedFromDate = '';\n        this.calModel.appliedToDate = '';\n\n        this.calModel.applied = false;\n        this.noOfNights = 0;\n        this.hoverDate = null;\n\n        this.calModel.businessMeeting = false;\n        this.calModel.preferBC = false;\n        this.calModel.translator = false;\n        this.enableDaysOnSelection(false);\n        //this.rollBackCalendarState();\n        if (!this.minDate && !this.maxDate) {\n            this.setMonths();\n        }\n\n        if (this.minDate) {\n            this.assignNoOfNights();\n        }\n\n        if (!noClear) {\n            this.clear.emit();\n        }\n    }\n\n    public selectDate(month_idx: any, day: any, isBan: any, disable: any) {\n        if (isBan || !day || disable || !this.monthsArr[month_idx]) {\n            return;\n        }\n\n        const year = this.monthsArr[month_idx].year;\n        const month = this.monthsArr[month_idx].month;\n\n        const date = new Date(year, month, parseInt(day.toString(), 10));\n\n        const nextYearDate = new Date(this.today.getFullYear() + 1, this.today.getMonth(), this.today.getDate());\n        const newToday = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n        if (date < newToday || date > nextYearDate) {\n            return;\n        }\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let minHours =\n            this.hours !== undefined\n                ? this.hours\n                : this.calendarConf.defaultTime\n                ? this.calendarConf.defaultTime\n                : '09';\n        let minMinutes = this.mins !== undefined ? this.mins : '00';\n\n        if ((this.fromDate && this.toDate) || (this.fromDate && date > this.fromDate)) {\n            this.disableFromHH = false;\n            this.disableFromMM = false;\n        } else if (this.fromDate && !this.toDate) {\n            this.disableToHH = false;\n            this.disableToMM = false;\n        }\n        this.disableTime = false;\n\n        this.toMins = this.toMins !== undefined ? this.toMins : '00';\n        this.toHours =\n            this.toHours !== undefined\n                ? this.toHours\n                : this.calendarConf.defaultTime\n                ? this.calendarConf.defaultTime\n                : '09';\n\n        const today = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n        if (this.calendarConf.time && today.getTime() === date.getTime()) {\n            this.minDateTime = today;\n            let hmin = new Date().getHours();\n            let mmin = new Date().getMinutes();\n            const mmin_reminder = mmin % 10;\n            if (mmin_reminder) {\n                mmin = mmin - mmin_reminder;\n                mmin = mmin + 10;\n                if (mmin === 60) {\n                    mmin = 0;\n                    hmin = hmin + 1;\n                }\n            }\n\n            //Check scope time is past than current time\n            const scopeDate = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n            scopeDate.setHours(this.hours, this.mins);\n            const currentDate = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n            currentDate.setHours(hmin, mmin);\n\n            if (scopeDate.getTime() <= currentDate.getTime()) {\n                minHours = hmin < 10 ? '0' + hmin.toString() : hmin.toString();\n                minMinutes = mmin < 10 ? '0' + mmin.toString() : mmin.toString();\n            }\n            this.minDateTime.setHours(hmin, mmin);\n            this.disableFromHH = true;\n            this.disableFromMM = true;\n            this.disableToHH = true;\n            this.disableToMM = true;\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        if (!this.twoDates) {\n            this.hoverDate = null;\n            if (minDate && minDate > date) {\n                // alert('Meeting date should be within trip dates');\n                return;\n            }\n            if (maxDate && maxDate < date) {\n                return;\n            }\n\n            this.isPickUpDisable = false;\n            this.fromDate = date;\n            if (this.hours !== minHours || this.mins !== minMinutes) {\n                this.hours = minHours;\n                this.mins = minMinutes;\n            }\n            this.toDate = null;\n            // if (this.calendarConf.showNights) {\n            // this.showNights = true;\n            // this.noOfNights = 1;\n            // }\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n\n            if (!this.isInvalid()) {\n                this.doneBtn(true);\n            }\n            return;\n        }\n\n        if ((this.fromDate && this.toDate) || (this.fromDate && date < this.fromDate)) {\n            if (minDate && minDate > date) {\n                return;\n            }\n            if (maxDate && maxDate < date) {\n                return;\n            }\n            this.isDropOfDisable = true;\n            this.toDate = null;\n            this.hoverDate = null;\n            this.fromDate = date;\n            if (this.hours !== minHours || this.mins !== minMinutes) {\n                this.hours = minHours;\n                this.mins = minMinutes;\n                this.toHours = minHours;\n                this.toMins = minMinutes;\n            }\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n\n            if (this.fromDate && !this.toDate && this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(true);\n            }\n            return;\n        }\n\n        if (this.fromDate && date >= this.fromDate) {\n            if (this.twoDates) {\n                if (maxDate && maxDate < date) {\n                    return;\n                }\n                this.isDropOfDisable = false;\n                if (this.calendarConf.maxDays) {\n                    let dateDifferenceFromDate = this.dateDiff(this.fromDate, date, TimeUnit.d);\n                    if (this.showNights) {\n                        dateDifferenceFromDate--;\n                    }\n                    if (dateDifferenceFromDate >= this.calendarConf.maxDays) {\n                        setTimeout(() => {\n                            this.assignNoOfNights();\n                        }, 3000);\n                        return;\n                    }\n                }\n\n                const fromDate = new Date(\n                    this.fromDate.getFullYear(),\n                    this.fromDate.getMonth(),\n                    this.fromDate.getDate()\n                );\n                const dateDifference = this.dateDiff(fromDate, date, TimeUnit.d);\n                if (dateDifference < this.calendarConf.minDays) {\n                    return;\n                }\n\n                //set 30mins to dropOff time from pickup time if current date is choosed\n                if (dateDifference <= 0) {\n                    const drop_hour = parseInt(this.hours, 10) + 1;\n                    const pick_min = parseInt(this.mins, 10);\n                    let mins = pick_min + 30;\n                    if (mins >= 60) {\n                        mins = mins - 60;\n                        this.toHours = drop_hour;\n                    }\n\n                    if (this.hours > this.toHours) {\n                        this.toHours = this.hours;\n                    }\n\n                    this.toMins = mins < 10 ? '0' + mins : mins;\n                }\n\n                this.toDate = date;\n                // if (this.calendarConf.showNights) {\n                // this.showNights = true;\n                this.assignNoOfNights(this.fromDate, this.toDate, false);\n                // }\n                this.calModel.updateData = true;\n            }\n\n            if (this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(false);\n            }\n\n            if (this.calendarConf.minDays === 0 && !this.toDate) {\n                this.disableDaysOnSelection(true);\n            }\n\n            if (!this.isInvalid()) {\n                this.doneBtn(true);\n            }\n            return;\n        }\n        if (minDate && minDate > date) {\n            return;\n        }\n        if (maxDate && maxDate < date) {\n            return;\n        }\n\n        this.isPickUpDisable = false;\n        this.fromDate = date;\n        if (this.hours !== minHours || this.mins !== minMinutes) {\n            this.hours = minHours;\n            this.mins = minMinutes;\n            this.toHours = minHours;\n            this.toMins = minMinutes;\n        }\n\n        if (this.fromDate && !this.toDate && this.calendarConf.maxDays) {\n            this.disableDaysOnSelection(true);\n        }\n\n        this.assignNoOfNights(this.fromDate, this.toDate, false);\n    }\n\n    public hoverOnDate(month_idx: any, day: any): any {\n        this.isHoverValidDate = !!day;\n\n        if (!this.twoDates) {\n            this.hoverDate = this.fromDate;\n            return;\n        }\n\n        if (!this.fromDate || !this.monthsArr[month_idx]) {\n            return;\n        }\n\n        const year = this.monthsArr[month_idx].year;\n        const month = this.monthsArr[month_idx].month;\n\n        const date = new Date(year, month, parseInt(day.toString(), 10));\n        this.hoverDate = null;\n        const nextYearDate = new Date(this.today.getFullYear() + 1, this.today.getMonth(), this.today.getDate());\n\n        if (date > nextYearDate) {\n            return true;\n        }\n\n        if (this.fromDate && date > this.fromDate) {\n            if (this.calendarConf.maxDays) {\n                let dateDifference = this.dateDiff(this.fromDate, date, TimeUnit.d);\n                if (this.showNights) {\n                    dateDifference--;\n                }\n                if (dateDifference >= this.calendarConf.maxDays) {\n                    return;\n                }\n            }\n            if (this.maxDate) {\n                const maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n                if (maxDate < date) {\n                    return;\n                }\n            }\n        }\n\n        if (CalendarUtilsService.isValidDate(date)) {\n            this.hoverDate = date;\n        }\n\n        this.assignNoOfNights(this.fromDate, this.hoverDate, true);\n    }\n\n    public isHoveredClass(monthObj: any, day: any): boolean {\n        const hoveredDate = this.formDate(monthObj.idx, day.text);\n        const selectedDateIsBiggerThanFromDate = hoveredDate\n            ? hoveredDate > this.formAndGetDateIns(this.fromDate)\n            : false;\n        const hoveredDateExistsAndSmallerTanToDate = hoveredDate\n            ? hoveredDate < this.formAndGetDateIns(this.toDate)\n            : false;\n        const hoveredDateSmallerThanToDate =\n            hoveredDateExistsAndSmallerTanToDate ||\n            (!this.toDate && hoveredDate ? hoveredDate <= this.formAndGetDateIns(this.hoverDate) : false);\n\n        return selectedDateIsBiggerThanFromDate && hoveredDateSmallerThanToDate;\n    }\n\n    private validateTimeSelection(selectedDate: any, isTo: any) {\n        if (this.calendarConf.time !== true || selectedDate === null) {\n            return;\n        }\n\n        if (isTo) {\n            this.disableToHH = false;\n            this.disableToMM = false;\n            this.disableToHHInc = false;\n            this.disableToMMInc = false;\n        } else {\n            this.disableFromHH = false;\n            this.disableFromMM = false;\n            this.disableFromHHInc = false;\n            this.disableFromMMInc = false;\n        }\n\n        this.disableTime = false;\n        const fromDate = new Date(this.fromDate.getTime());\n        const f_date = new Date(fromDate.getFullYear(), fromDate.getMonth(), fromDate.getDate());\n        fromDate.setHours(this.hours);\n        fromDate.setMinutes(this.mins);\n        if (this.toDate) {\n            const toDate = new Date(this.toDate.getTime());\n            const t_date = new Date(toDate.getFullYear(), toDate.getMonth(), toDate.getDate());\n            toDate.setHours(this.toHours);\n            toDate.setMinutes(this.toMins);\n            const dateDifference = this.dateDiff(f_date, t_date, TimeUnit.d);\n            if (dateDifference <= 0) {\n                const minutesDifference = this.dateDiff(fromDate, toDate, TimeUnit.m);\n                this.disableTime = minutesDifference < 30;\n            }\n        }\n\n        const today = new Date();\n        const t = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n        const s = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n\n        const newToday = new Date(t.getTime());\n        newToday.setHours(today.getHours());\n\n        let mm = today.getMinutes(); // mins are incremented by 10\n        //mm = parseInt(mm);\n        const mmr = mm % 10;\n        if (mmr) {\n            mm = mm - mmr + 10;\n        }\n        newToday.setMinutes(mm);\n\n        if (t.getTime() !== s.getTime()) {\n            return;\n        }\n\n        if (isTo) {\n            selectedDate.setHours(this.toHours);\n            selectedDate.setMinutes(this.toMins);\n        } else {\n            selectedDate.setHours(this.hours);\n            selectedDate.setMinutes(this.mins);\n        }\n\n        // Disable Dec Hours\n        if (\n            newToday.getHours() >= selectedDate.getHours() ||\n            (newToday.getHours() + 1 === selectedDate.getHours() && newToday.getMinutes() > selectedDate.getMinutes())\n        ) {\n            if (!isTo) {\n                this.disableFromHH = true;\n            }\n            if (isTo) {\n                this.disableToHH = true;\n            }\n        }\n\n        // Disable Inc Hours\n        if (newToday.getHours() > 0 && selectedDate.getHours() === 23) {\n            if (!isTo) {\n                this.disableFromHHInc = true;\n            }\n            if (isTo) {\n                this.disableToHHInc = true;\n            }\n        }\n\n        // Disable Dec Minutes\n        if (newToday.getHours() === selectedDate.getHours() && newToday.getMinutes() >= selectedDate.getMinutes()) {\n            if (!isTo) {\n                this.disableFromMM = true;\n            }\n            if (isTo) {\n                this.disableToMM = true;\n            }\n        }\n\n        // Disable Inc Hours\n        if (\n            newToday.getHours() === selectedDate.getHours() &&\n            newToday.getMinutes() > 0 &&\n            selectedDate.getMinutes() === 50\n        ) {\n            if (!isTo) {\n                this.disableFromMMInc = true;\n            }\n            if (isTo) {\n                this.disableToMMInc = true;\n            }\n        }\n    }\n\n    private updateTripConfig(tripConfig: any) {\n        if (!tripConfig || tripConfig.content !== 'tripCal') {\n            return;\n        }\n        this.calendarConf = tripConfig;\n        setTimeout(() => {\n            this.initializeCalendarComponent();\n        }, 200);\n    }\n\n    // set date range correctly when linked to travel option (this.calendarConf.twoDates === null)\n    private setDateRange(conf: any, search: any, isInit?: boolean) {\n        if (this.calendarConf.dateRange === CalTypes.CAL_RANGE_FREE) {\n            this.allowTravelChange = true; // use can set oneWay/roundTrip\n            this.calTravelOption = this.calModel.tripType ? this.calModel.tripType : Trip.ROUND_TRIP;\n        } else {\n            this.allowTravelChange = false; // use can set oneWay/roundTrip\n            this.calTravelOption = this.travelOption;\n        }\n        if (conf.linked) {\n            for (const dep in conf.linked) {\n                if (search[conf.linked[dep]]) {\n                    switch (dep) {\n                        case 'fromDate':\n                            // case cal is open before the one it depends on\n                            if (search[conf.linked[dep]].fromDate) {\n                                this.minDate = new Date(search[conf.linked[dep]].fromDate);\n                            }\n                            break;\n                        case 'toDate':\n                            // case cal is open before the one it depends on\n                            if (search[conf.linked[dep]].toDate) {\n                                this.maxDate = new Date(search[conf.linked[dep]].toDate);\n                            }\n                            break;\n                    }\n                }\n            }\n        }\n        if (this.calModel.resultSet && isInit) {\n            this.calTravelOption = this.calModel.twoDates ? Trip.ROUND_TRIP : Trip.ONE_WAY;\n        }\n        this.tripType = this.calModel.disableRoundTrip ? Trip.ONE_WAY : this.calTravelOption;\n        this.calTravelOption = this.tripType;\n        this.twoDates = CalendarUtilsService.isTwoDates(this.calendarConf.dateRange, this.calTravelOption);\n        //TODO remove once new mode used (replace singlePicker var on html by !datRange)\n        this.singlePicker = !this.twoDates;\n    }\n\n    private validFromAndToDateTime() {\n        let fromdate;\n        let todate;\n\n        if (CalendarUtilsService.isValidDate(this.fromDate)) {\n            fromdate = new Date(this.fromDate.getTime());\n        } else {\n            return false;\n        }\n        if (CalendarUtilsService.isValidDate(this.toDate)) {\n            todate = new Date(this.toDate.getTime());\n        } else {\n            return false;\n        }\n\n        fromdate?.setHours(parseInt(this.hours, 10), parseInt(this.mins, 10));\n        if (todate) {\n            todate.setHours(parseInt(this.toHours, 10), parseInt(this.toMins, 10));\n        }\n\n        if (this.calendarConf.time === 'true' && !this.twoDates) {\n            return this.minDateTime && fromdate.getTime() < this.minDateTime.getTime();\n        }\n        if (this.twoDates && this.calendarConf.time === 'true') {\n            return (\n                fromdate.getTime() >= todate.getTime() ||\n                (this.minDateTime && fromdate.getTime() < this.minDateTime.getTime())\n            );\n        } else {\n            return false;\n        }\n    }\n\n    private enableDaysOnSelection(disable: boolean): void {\n        this.limitCal = this.monthsArr.length;\n        for (const month of this.monthsArr) {\n            month.monthDays.forEach((days: any) => {\n                days.forEach((d: any) => {\n                    d.disable = disable;\n                });\n            });\n        }\n    }\n\n    private disableDaysOnSelection(disable: any): void {\n        if (this.calTravelOption === Trip.ONE_WAY) {\n            return;\n        }\n        if (!this.calendarConf.maxDays) {\n            return;\n        }\n        if (!disable) {\n            this.enableDaysOnSelection(disable);\n            return;\n        }\n\n        let restrictDays = parseInt(this.calendarConf.maxDays, 10);\n        if (!this.showNights) {\n            restrictDays = restrictDays - 1;\n        }\n        const fromDate = new Date(this.fromDate.getTime());\n        const addDays = fromDate.getDate() + restrictDays;\n        const restrictDate = new Date(fromDate.getTime());\n        restrictDate.setDate(addDays);\n\n        this.limitCal = this.monthsArr.length;\n        for (let i = 0; i < this.monthsArr.length; i++) {\n            this.monthsArr[i].monthDays.forEach((dd: any) => {\n                dd.forEach((day: any) => {\n                    if (!day.text) {\n                        return;\n                    }\n\n                    const d = new Date(this.monthsArr[i].year, this.monthsArr[i].month, day.text);\n                    if (d > restrictDate) {\n                        day.disable = true;\n                        if (this.limitCal === this.monthsArr.length) {\n                            this.limitCal = i + (day.text === 1 ? 0 : 1);\n                        }\n                    }\n                });\n            });\n        }\n    }\n\n    private doneBtn(keepOpen?: boolean) {\n        const res: any = {};\n\n        if (!(this.fromDate instanceof Date && !isNaN(this.fromDate.getTime()))) {\n            return;\n        }\n        if (this.twoDates && !(this.toDate instanceof Date)) {\n            return;\n        }\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        const fromDate = new Date(this.fromDate.getFullYear(), this.fromDate.getMonth(), this.fromDate.getDate());\n        let toDate;\n        if (minDate && minDate > fromDate) {\n            return;\n        }\n        if (maxDate && maxDate < fromDate) {\n            return;\n        }\n\n        if (this.fromDate && this.fromDate instanceof Date) {\n            res.fromDate = DatesService.getDateNoTime(this.fromDate);\n            res.toDisplayStr = '';\n        }\n        if (this.toDate && this.toDate instanceof Date) {\n            res.toDate = DatesService.getDateNoTime(this.toDate);\n            toDate = new Date(this.toDate.getFullYear(), this.toDate.getMonth(), this.toDate.getDate());\n        } else {\n            res.toDate = null;\n        }\n        if (this.twoDates) {\n            if (this.toHours) {\n                res.toTime = this.toHours + ':' + this.toMins;\n            } else {\n                res.toTime = '00:00';\n            }\n        } else {\n            res.toTime = null;\n        }\n        if (this.hours) {\n            res.fromTime = this.hours + ':' + this.mins;\n        } else {\n            res.fromTime = '00:00';\n        }\n\n        if (this.allowTravelChange) {\n            res.tripType = this.tripType;\n        }\n        res.twoDates = this.twoDates;\n\n        if (this.formDisplayStrAttribute) {\n            res.displayStr = this.datesService.formDoubleDate(fromDate, toDate);\n        } else {\n            res.displayStr = this.calModel.fromDisplayStr;\n            if (this.calModel.toDisplayStr) {\n                res.displayStr = res.fromDisplayStr + ' - ' + res.toDisplayStr;\n            }\n        }\n\n        if (this.formDisplayStrAttribute && toDate && this.dateDiff(fromDate, toDate, TimeUnit.d) === 0) {\n            const fromMonth = this.datesService.getMonth(fromDate.getMonth(), true);\n            res.fromDisplayStr = res.fromDisplayStr + ' ' + fromMonth + ', ' + fromDate.getFullYear();\n            res.toDisplayStr = '';\n        }\n\n        this.apply.emit({ newDates: res, keepOpen });\n        if (!keepOpen) {\n            this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n                id: 'tabIdx' + this.calendarConf.tabOrder,\n            });\n        }\n    }\n\n    private initializeCalendarComponent(): void {\n        if (this.listenerId === undefined) {\n            this.listenerId = this.listenersService.registerListener(\n                [ListenerId.LISTEN_LANG, ListenerId.LISTEN_CAL_REFRESH],\n                this.setStaticValues\n            );\n        }\n        this.fromDate = null;\n        this.toDate = null;\n        this.hoverDate = null;\n        this.mins = '00';\n        this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.toMins = '00';\n        this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.time1Text = this.calendarConf.time1Text;\n        this.time2Text = this.calendarConf.time2Text;\n\n        this.showCalendar = false;\n        this.noOfNights = 0;\n        this.showNights = this.calendarConf.showNights; // show number of nights on date range\n\n        let initModel;\n        if (this.calendarData) {\n            this.calModel = ToolsService.deepCopy(this.calendarData);\n        } else {\n            this.calModel = {\n                fromDate: this.fromDate,\n                toDate: this.toDate,\n                showCalendar: this.showCalendar,\n            };\n        }\n        this.disableRoundTrip = this.calModel.disableRoundTrip;\n        this.setDateRange(this.calendarConf, this.search, true);\n\n        if (this.defaultValue) {\n            initModel = this.defaultValue;\n        } else {\n            initModel = this.calModel;\n        }\n        if (!this.twoDates && initModel.toDate) {\n            initModel.toDate = null;\n            initModel.toTime = '';\n        }\n        this.setMonths();\n        this.initDateIns(initModel);\n        this.calStyle = {};\n        this.dateIns = {};\n\n        this.childDateNgModel = '';\n        this.show2Month = true;\n\n        this.assignDefaultValue();\n        setTimeout(() => {\n            if (!this.isMobile || !this.fromDate || this.fromDate === '') {\n                return;\n            }\n            const scrollEl = document.getElementById(this.fromDate.getMonth() + this.fromDate.getFullYear());\n            if (scrollEl) {\n                scrollEl.scrollIntoView();\n            }\n        });\n    }\n\n    private setStaticValues(subj: any): void {\n        switch (subj) {\n            case ListenerId.LISTEN_CAL_REFRESH: // on travel options change\n                this.initializeCalendarComponent();\n                break;\n            default:\n                console.log('received unhandled listener subject:' + subj);\n        }\n    }\n\n    private setMonths() {\n        const today = new Date();\n        const fromDate = this.minDate ? this.minDate : today;\n        const toDate = this.maxDate\n            ? this.maxDate\n            : new Date(today.getFullYear(), today.getMonth() + 12, today.getDate());\n        this.monthsArr = [];\n\n        const monthLimit =\n            CalendarUtilsService.monthDiff(fromDate, toDate) > 0\n                ? CalendarUtilsService.monthDiff(fromDate, toDate) + 1\n                : 1;\n        /* Date needs to be always 'one' otherwise if current date is 30 then when we add one month to jan\n        it'll become march 02 since there is only 28 days in feb in normal years */\n\n        const frDate = new Date(fromDate.getFullYear(), fromDate.getMonth(), 1);\n\n        for (let i = 0; i < monthLimit; i++) {\n            frDate.setMonth(frDate.getMonth() + (i === 0 ? 0 : 1));\n            const monthObj = CalendarUtilsService.getMonthAndYear(frDate.getMonth(), frDate.getFullYear());\n            this.monthsArr.push({\n                idx: i,\n                monthObj,\n                month: monthObj.monthNumber,\n                monthTxt: this.datesService.getMonth(monthObj.monthNumber, false),\n                year: monthObj.year,\n                monthDays: this.datesService.getMonthArrayForCalendar(monthObj.year, monthObj.monthNumber),\n            });\n        }\n    }\n\n    private initDateIns(dateIns: any) {\n        this.calModel.showCalendar = dateIns.showCalendar; //Change\n        this.noOfNights = 0;\n        if (dateIns.fromDate) {\n            const fromDate = DatesService.getNewDate(dateIns.fromDate);\n            if (fromDate) {\n                if (dateIns.fromTime) {\n                    const res = dateIns.fromTime.split(':');\n                    this.hours = res[0];\n                    this.mins = res[1];\n                } else {\n                    this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n                    this.mins = '00';\n                }\n\n                this.isPickUpDisable = false;\n                this.fromDate = fromDate;\n                this.calModel.fromDate = fromDate;\n                for (let i = 0; i < this.monthsArr.length; i++) {\n                    this.monthsArr[i].monthDays.forEach((dd: any) => {\n                        dd.forEach((day: any) => {\n                            if (!day.text) {\n                                return;\n                            }\n                            const d = new Date(this.monthsArr[i].year, this.monthsArr[i].month, day.text);\n                            if (d.getTime() === fromDate.getTime()) {\n                                this.fromCal = i === 12 ? 11 : i;\n                            }\n                        });\n                    });\n                }\n                if (this.calendarConf.showNights) {\n                    this.noOfNights = 1;\n                }\n            }\n            let toDate = null;\n            if ((this.calendarConf.dateRange || this.twoDates) && dateIns.toDate) {\n                toDate = DatesService.getNewDate(dateIns.toDate);\n            }\n            if (toDate) {\n                if (dateIns.toTime) {\n                    const res = dateIns.toTime.split(':');\n                    this.toHours = res[0];\n                    this.toMins = res[1];\n                } else {\n                    this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n                    this.toMins = '00';\n                }\n\n                this.isDropOfDisable = false;\n                this.calModel.toDate = toDate;\n                this.toDate = new Date(\n                    toDate.getFullYear(),\n                    toDate.getMonth(),\n                    parseInt(toDate.getDate().toString(), 10)\n                );\n\n                this.assignNoOfNights(fromDate, toDate, false);\n            }\n\n            if ((this.calendarConf.dateRange || this.twoDates) && !this.toDate && this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(true);\n            }\n        }\n    }\n\n    private assignDefaultValue() {\n        if (this.calendarConf.calStyle && this.platformService.isMobileDevice) {\n            this.calStyle = JSON.parse(this.calendarConf.calStyle);\n        }\n\n        if (this.calendarConf.showNights) {\n            this.showNights = this.calendarConf.showNights;\n        }\n\n        if (this.calModel && !this.calModel.fromDate) {\n            this.setMonths();\n            return;\n        }\n        this.initDateIns(this.calModel);\n    }\n\n    private dateDiff(fromdate: Date, toDate: Date, datepart: TimeUnit) {\n        datepart = datepart.toLowerCase() as TimeUnit;\n        const fromD: any = new Date(fromdate.getTime());\n        const toD: any = new Date(toDate.getTime());\n        if (datepart === 'h') {\n            fromD.setHours(this.hours, this.mins);\n            toD.setHours(this.toHours, this.toMins);\n        }\n        const diff = toD - fromD;\n\n        // if we want number of days but have less than 24h return 1 if we are not on\n        // same day, 0 otherwise\n        if (datepart === 'd' && diff < TimeUintMap.d) {\n            return fromD.getDay() !== toD.getDay() ? 1 : 0;\n        }\n        return Math.floor(diff / TimeUintMap[datepart]);\n    }\n\n    private assignNoOfNights(fromDate?: any, toDate?: any, checkToDateAvail?: any) {\n        if (checkToDateAvail && this.toDate) {\n            return;\n        }\n\n        if (!fromDate || !toDate) {\n            this.noOfNights = 0;\n            return;\n        }\n\n        let dateDifference = this.dateDiff(fromDate, toDate, TimeUnit.d);\n        if (this.content === CalTypes.CAL_RENTAL_TYPE || this.content === CalTypes.CAL_TRANSFER_TYPE) {\n            dateDifference = this.dateDiff(fromDate, toDate, TimeUnit.h);\n            //calculating the number of hours for the car rental search service\n            this.noOfNights = Math.ceil(dateDifference / 24);\n            return;\n        }\n        if (dateDifference >= 0) {\n            this.noOfNights = dateDifference;\n            if (this.noOfNights === 0 && this.showNights) {\n                this.noOfNights = -1; //if same day is chosen then 1 day to be displayed.\n            }\n        }\n    }\n}\n","<div\n    class=\"transfer-calendar notranslate trazler-calendar-container\"\n    ng-style=\"calStyle\"\n    [ngClass]=\"{\n        'transfer-calendar-onemonth': monthsArr.length === 1,\n        'align-calendar': !isMobile && monthsArr.length === 1\n    }\"\n>\n    <div class=\"transfer-calendar-row calendar-row flex\">\n        <div\n            class=\"trip-selector-container\"\n            style=\"margin-left: -1px; z-index: 1\"\n            *ngIf=\"isMobile && allowTravelChange\"\n            (click)=\"changeTravelOption(tripType == 'oneWay' ? 'roundTrip' : 'oneWay')\"\n        >\n            <div style=\"padding: 1.25rem 0\" class=\"trip-check-box\">\n                <i class=\"material-icons\" [ngClass]=\"{ 'trip-checked': tripType == 'oneWay' }\">\n                    {{ tripType == 'oneWay' ? 'check_box' : 'check_box_outline_blank' }}\n                </i>\n                <div>{{ 'GENERAL.One_way' | translate }}</div>\n            </div>\n        </div>\n        <div\n            class=\"transfer-calendar-flex calender-month-container\"\n            id=\"{{ monthObj.month + monthObj.year }}\"\n            [ngClass]=\"{ 'last-container': !isMobile && isLast, 'mt-0': isFirst }\"\n            *ngFor=\"\n                let monthObj of monthsArr\n                    | slice\n                        : (isMobile || monthsArr.length === 2 ? 0 : fromCal)\n                        : fromCal + (!isMobile ? 2 : limitCal ? limitCal : monthsArr.length);\n                let isLast = last;\n                let isFirst = first\n            \"\n        >\n            <div class=\"calendar-mobile-top flex ion-text-center\">\n                <div class=\"mobile-hidden\" [hidden]=\"isLast\">\n                    <button\n                        class=\"previous-nxt-btn\"\n                        data-test=\"calendar-last-month-button\"\n                        (click)=\"moveToNextMonth(-1)\"\n                        [ngClass]=\"{ 'previous-nxt-btn-hover': fromCal !== 0 }\"\n                    >\n                        <img\n                            class=\"material-icons notranslate previous-nxt-btn-icon previous-icon\"\n                            [ngClass]=\"{ 'previous-nxt-btn-icon-disable': fromCal === 0 || monthsArr.length === 2 }\"\n                            src=\"/assets/icons/web/icons/calendar_left_back-primary.svg\"\n                        />\n                    </button>\n                </div>\n\n                <div *ngIf=\"isLast\" class=\"month-txt-empty-block mobile-hidden\"></div>\n\n                <div\n                    class=\"month-txt flex justify-center align-center\"\n                    data-test=\"calendar-top-center\"\n                    [attr.data-year]=\"monthObj.monthTxt + ' ' + monthObj.year\"\n                >\n                    {{ monthObj.monthTxt }} {{ monthObj.year }}\n                </div>\n\n                <div *ngIf=\"isFirst\" class=\"month-txt-empty-block mobile-hidden\"></div>\n\n                <div class=\"mobile-hidden\" [hidden]=\"isFirst\">\n                    <button\n                        class=\"previous-nxt-btn\"\n                        data-test=\"calendar-next-month-button\"\n                        (click)=\"moveToNextMonth(1)\"\n                        [ngClass]=\"{\n                            'previous-nxt-btn-hover': fromCal + 2 !== monthsArr.length && fromCal + 2 < limitCal\n                        }\"\n                    >\n                        <img\n                            class=\"material-icons notranslate previous-nxt-btn-icon next-icon\"\n                            [ngClass]=\"{\n                                'previous-nxt-btn-icon-disable':\n                                    fromCal + 2 === monthsArr.length ||\n                                    fromCal + 2 >= limitCal ||\n                                    monthsArr.length === 2\n                            }\"\n                            src=\"/assets/icons/web/icons/calendar_right_back-primary.svg\"\n                        />\n                    </button>\n                </div>\n            </div>\n            <div class=\"week-ends flex\">\n                <div *ngFor=\"let weekHead of weekHeads\" class=\"week-header flex align-center justify-center\">\n                    {{ weekHead }}\n                </div>\n            </div>\n            <div>\n                <table class=\"border-table-calendar\" data-test=\"calendar-border-table\">\n                    <tr *ngFor=\"let monthDaysArr of monthObj.monthDays\">\n                        <td\n                            role=\"button\"\n                            *ngFor=\"let day of monthDaysArr\"\n                            class=\"t-day\"\n                            (mouseover)=\"hoverOnDate(monthObj.idx, day.text)\"\n                            (click)=\"selectDate(monthObj.idx, day.text, false, day.disable)\"\n                            [ngClass]=\"{\n                                'no-border': !day.text,\n                                't-selected-date':\n                                    (fromDate &&\n                                        formDate(monthObj.idx, day.text)?.toString() ==\n                                            formAndGetDateIns(fromDate)?.toString()) ||\n                                    (toDate &&\n                                        formDate(monthObj.idx, day.text)?.toString() ==\n                                            formAndGetDateIns(toDate)?.toString()),\n                                disableBtnBorder: !isHoverValidDate,\n                                'day-disable':\n                                    todayComparison(monthObj.year, monthObj.month, day.text) ||\n                                    day.disable ||\n                                    getDateComparisonFromVal(monthObj.year, monthObj.month, day.text, 'minDate') ||\n                                    getDateComparisonFromVal(monthObj.year, monthObj.month, day.text, 'maxDate'),\n                                'hover-cls': isHoveredClass(monthObj, day),\n                                't-selected-date--from-date':\n                                    fromDate &&\n                                    formDate(monthObj.idx, day.text)?.toString() ==\n                                        formAndGetDateIns(fromDate).toString(),\n                                't-selected-date--to-date':\n                                    toDate &&\n                                    formDate(monthObj.idx, day.text)?.toString() ==\n                                        formAndGetDateIns(toDate).toString(),\n                                't-day--today':\n                                    todayDate.getFullYear() === monthObj.year &&\n                                    todayDate.getMonth() === monthObj.month &&\n                                    todayDate.getDate() === day.text,\n                                't-day--oneWay': isOneWay\n                            }\"\n                        >\n                            <div class=\"day-number-text\">\n                                {{ day.text }}\n                            </div>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n\n        <div class=\"calendar-additional-info mobile-hidden\">\n            <div class=\"flex trip-type-toggle-container\" *ngIf=\"allowTravelChange\">\n                <button\n                    class=\"one-round-way-btn one-way-btn-b-rad select-btn\"\n                    data-test=\"calendar-one-way-btn\"\n                    (click)=\"changeTravelOption('oneWay')\"\n                    [ngClass]=\"{ 'one-round-way-active': tripType == 'oneWay', selected: tripType == 'oneWay' }\"\n                >\n                    {{ 'GENERAL.One_way' | translate }}\n                </button>\n\n                <button\n                    class=\"one-round-way-btn round-way-btn-b-rad select-btn\"\n                    (click)=\"changeTravelOption('roundTrip')\"\n                    [ngClass]=\"{\n                        'one-round-way-active': tripType == 'roundTrip',\n                        'disable-round-trip': disableRoundTrip,\n                        selected: tripType == 'roundTrip'\n                    }\"\n                >\n                    {{ 'GENERAL.Round_trip' | translate }}\n                </button>\n            </div>\n            <!--\n            <div class=\"mobile-hidden\" [hidden]=\"!allowTravelChange\" style=\"margin-top: 40px\"></div>-->\n\n            <div class=\"pick-up-time-text-block\"></div>\n            <div *ngIf=\"!allowTravelChange\" class=\"pick-up-time-text-block\"></div>\n\n            <div class=\"meeting-hours-cont flex flex-column\">\n                <div\n                    class=\"pick-drop-up-time-txt pick-up-time-text-block\"\n                    [ngClass]=\"{ 'displat-text-disable': isPickUpDisable }\"\n                >\n                    {{\n                        (calendarConf.content === 'rentalCal' ? 'GENERAL.PICK_UP_TIME' : 'SEARCH.PICK_UP_TIME')\n                            | translate\n                    }}\n                </div>\n                <div class=\"flex\">\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromHH || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            data-test=\"calendar-depart-hour-minus\"\n                            [disabled]=\"disableFromHH || isPickUpDisable\"\n                            (click)=\"incrementDecrementHours(-1, 'hours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n\n                        <div class=\"meeting-hr-time-txt\" data-test=\"depart-time-hour\">\n                            {{ hours }}\n                        </div>\n\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromHHInc || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            data-test=\"calendar-depart-hour-plus\"\n                            [disabled]=\"disableFromHHInc || isPickUpDisable\"\n                            (click)=\"incrementDecrementHours(1, 'hours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n\n                    <div class=\"meeting-colon-txt\">:</div>\n\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromMM || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            data-test=\"calendar-depart-minute-minus\"\n                            [disabled]=\"disableFromMM || isPickUpDisable\"\n                            (click)=\"incrementDecrementMinutes(0, 'mins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n\n                        <div class=\"meeting-hr-time-txt\" data-test=\"depart-time-mins\">\n                            {{ mins }}\n                        </div>\n\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromMMInc || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            data-test=\"calendar-depart-minute-plus\"\n                            [disabled]=\"disableFromMMInc || isPickUpDisable\"\n                            (click)=\"incrementDecrementMinutes(1, 'mins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div *ngIf=\"twoDates\" class=\"meeting-hours-cont flex flex-column\">\n                <div\n                    class=\"pick-drop-up-time-txt pick-up-time-text-block\"\n                    [ngClass]=\"{ 'displat-text-disable': isDropOfDisable }\"\n                >\n                    {{\n                        (calendarConf.content === 'rentalCal' ? 'GENERAL.DROP_OFF_TIME' : 'SEARCH.RETURN_PICK_UP_TIME')\n                            | translate\n                    }}\n                </div>\n\n                <div class=\"flex\">\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToHH || isDropOfDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            data-test=\"calendar-return-hour-minus\"\n                            [disabled]=\"disableToHH || isDropOfDisable\"\n                            (click)=\"incrementDecrementHours(-1, 'toHours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n\n                        <div class=\"meeting-hr-time-txt\" data-test=\"return-time-hour\">\n                            {{ toHours }}\n                        </div>\n\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToHHInc || isDropOfDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            data-test=\"calendar-return-hour-plus\"\n                            [disabled]=\"disableToHHInc || isDropOfDisable\"\n                            (click)=\"incrementDecrementHours(1, 'toHours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n\n                    <div class=\"meeting-colon-txt\">:</div>\n\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToMM || isDropOfDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            data-test=\"calendar-return-minute-minus\"\n                            [disabled]=\"disableToMM || isDropOfDisable\"\n                            (click)=\"incrementDecrementMinutes(0, 'toMins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n\n                        <div class=\"meeting-hr-time-txt\" data-test=\"return-time-mins\">\n                            {{ toMins }}\n                        </div>\n\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToMMInc || isDropOfDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            data-test=\"calendar-return-minute-plus\"\n                            [disabled]=\"disableToMMInc || isDropOfDisable\"\n                            (click)=\"incrementDecrementMinutes(1, 'toMins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"bottom-cal-footer transfer-calendar-footer calendar-footer\" [hidden]=\"isMobile && isPickUpDisable\">\n        <div class=\"mobile-hours-cont mobile-only desktop-hide\" *ngIf=\"!isPickUpDisable\">\n            <div class=\"trip-hour-cont\">\n                <div class=\"pick-drop-up-time-txt\" [ngClass]=\"{ 'displat-text-disable': isPickUpDisable }\">\n                    {{ 'GENERAL.DEPART' | translate }}\n                </div>\n                <div class=\"meeting-hours-cont flex\">\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromHH || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            [disabled]=\"disableFromHH || isPickUpDisable\"\n                            (click)=\"incrementDecrementHours(-1, 'hours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n                        <div class=\"meeting-hr-time-txt\">\n                            {{ hours }}\n                        </div>\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromHHInc || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            [disabled]=\"disableFromHHInc || isPickUpDisable\"\n                            (click)=\"incrementDecrementHours(1, 'hours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n                    <div class=\"meeting-colon-txt\">:</div>\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromMM || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            [disabled]=\"disableFromMM || isPickUpDisable\"\n                            (click)=\"incrementDecrementMinutes(0, 'mins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n                        <div class=\"meeting-hr-time-txt\">\n                            {{ mins }}\n                        </div>\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableFromMMInc || isPickUpDisable }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            [disabled]=\"disableFromMMInc || isPickUpDisable\"\n                            (click)=\"incrementDecrementMinutes(1, 'mins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"trip-hour-cont\" ng-show=\"twoDates\">\n                <div class=\"pick-drop-up-time-txt\" [ngClass]=\"{ 'displat-text-disable': isDropOfDisable || !toDate }\">\n                    {{ 'GENERAL.RETURN' | translate }}\n                </div>\n                <div class=\"meeting-hours-cont flex\">\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToHH || isDropOfDisable || !toDate }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            [disabled]=\"disableToHH || isDropOfDisable || !toDate\"\n                            (click)=\"incrementDecrementHours(-1, 'toHours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n                        <div class=\"meeting-hr-time-txt\">\n                            {{ toHours }}\n                        </div>\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToHHInc || isDropOfDisable || !toDate }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            [disabled]=\"disableToHHInc || isDropOfDisable || !toDate\"\n                            (click)=\"incrementDecrementHours(1, 'toHours')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n                    <div class=\"meeting-colon-txt\">:</div>\n                    <div class=\"meeting-hour-div flex\">\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToMM || isDropOfDisable || !toDate }\"\n                            class=\"meeting-inc-dec-btn meeting-dec-btn\"\n                            [disabled]=\"disableToMM || isDropOfDisable || !toDate\"\n                            (click)=\"incrementDecrementMinutes(0, 'toMins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-dec-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-minus-icon.svg\"\n                            />\n                        </button>\n                        <div class=\"meeting-hr-time-txt\">\n                            {{ toMins }}\n                        </div>\n                        <button\n                            [ngClass]=\"{ 'disable-dec': disableToMMInc || isDropOfDisable || !toDate }\"\n                            class=\"meeting-inc-dec-btn meeting-inc-btn\"\n                            [disabled]=\"disableToMMInc || isDropOfDisable || !toDate\"\n                            (click)=\"incrementDecrementMinutes(1, 'toMins')\"\n                        >\n                            <img\n                                class=\"material-icons meeting-inc-btn-icon\"\n                                src=\"/assets/icons/web/img/icons/calendar-plus-icon.svg\"\n                            />\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"footer-row space-between\" [hidden]=\"isMobile && isInvalid\">\n            <div>\n                <div class=\"nights flex align-center mobile-hidden\" *ngIf=\"noOfNights > 0\">\n                    <span>\n                        <span *ngIf=\"fromDate && (singlePicker || toDate || hoverDate || noOfNights > 1)\">\n                            {{ noOfNights }}\n                            {{ (noOfNights > 1 ? 'GENERAL.DAYS' : 'GENERAL.DAY') | translate }}\n                        </span>\n                    </span>\n                </div>\n            </div>\n            <div class=\"calender-action-btns flex flex-row\">\n                <div>\n                    <button\n                        data-test=\"car-calendar-clear-btn\"\n                        id=\"cal-clear\"\n                        class=\"tz-btn clear-btn calendar-button btn tz-btn-secondary\"\n                        (click)=\"cancelBtn(false)\"\n                        [ngClass]=\"{ passive: (singlePicker && !fromDate) || (!singlePicker && !fromDate) }\"\n                    >\n                        {{ 'GENERAL.CLEAR' | translate }}\n                    </button>\n                </div>\n                <div>\n                    <button\n                        data-test=\"car-calendar-apply-btn\"\n                        class=\"tz-btn apply-transfer-btn calendar-button calendar-button tz-btn-primary\"\n                        (click)=\"onCloseCalendar()\"\n                        [ngClass]=\"{\n                            passive:\n                                (singlePicker && !fromDate) || (!singlePicker && (!fromDate || !toDate)) || disableTime\n                        }\"\n                        [disabled]=\"isInvalid()\"\n                    >\n                        {{ 'SEARCH.APPLY' | translate }}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","import { Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { Trip } from '@core/constants/trip';\nimport { CalTypes } from '@core/constants/call-types.const';\nimport { SearchDataService } from '@services/searchEngine/services/search-data.service';\nimport { ListenersService } from '@services/modules/core/listeners-service';\nimport { PlatformService } from '@services/platform.service';\nimport { SettingsService } from '@services/services/settings-service';\nimport { ListenerId } from '@core/constants/listener-id.const';\nimport { TimeUintMap, TimeUnit } from '../trazler-calendar/trazler-calendar.component';\nimport { ToolsService } from '@core/utils/tools-service';\nimport { ModalService } from '@services/modal.service';\nimport { TzDatePipe } from '@shared/pipes/tz-date.pipe';\nimport { CalendarUtilsService } from '@services/modules/search/utils/calendar.utils';\nimport { DatesService } from '@services/modules/search/utils/dates.service';\nimport { GeneralSettings } from '@core/constants/general-settings';\nimport { ScrollService } from '@services/modules/core/scroll-service';\n\n@Component({\n    selector: 'tz-trazler-trip-dates-calendar',\n    templateUrl: './trazler-trip-dates-calendar.component.html',\n    styleUrls: ['./trazler-trip-dates-calendar.component.scss'],\n})\nexport class TrazlerTripDatesCalendarComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() isMobile = false;\n    @Input() monthsArr: any[] = [];\n    @Input() monthDaysArr: any[] = [];\n    @Input() weekHeads: string[] = [];\n    @Input() selectedServices: { [key: string]: boolean } = GeneralSettings.defaultSelectedServices;\n    @Output() closeCalendar: EventEmitter<void> = new EventEmitter<void>();\n\n    @Input() calendarConf: any = {\n        class: 'col-xl-4 col-md-4 order3',\n        content: 'tripCal',\n        dateRange: true,\n        fieldRole: 0,\n        mainOrder: 3,\n        maxDays: 28,\n        minDays: 1,\n        placeholder: 'SEARCH.TRIP_DATES',\n        showNights: true,\n        showTripOption: true,\n        tabOrder: 3,\n        time: false,\n    };\n    //@Input() search: ISearchData | undefined = undefined;\n    @Input() search: any;\n    @Input() defaultValue: any;\n    @Input() travelOption: string | Trip = Trip.ONE_WAY;\n    @Input() content = CalTypes.CAL_TRIP_TYPE;\n    @Input() calendarData: any = {};\n    @Input() formDisplayStrAttribute = true;\n    @Input() isModalEditMode: boolean | undefined;\n    @Output() hideCalDropdown: EventEmitter<void> = new EventEmitter<void>();\n    @Output() clear: EventEmitter<void> = new EventEmitter<void>();\n    @Output() apply: EventEmitter<any> = new EventEmitter<any>();\n\n    public calTypes = CalTypes;\n    public today = new Date();\n    public disableTime = false;\n    public isPickUpDisable = true;\n    public isDropOfDisable = true;\n\n    public fromCal = 0;\n    public limitCal: any;\n    public disableRoundTrip: any;\n    public calModel: any;\n    public minDate: any;\n    public maxDate: any;\n    public fromDate: any;\n    public toDate: any;\n    public toTime: any;\n    public hoverDate: any;\n    public tripType: any;\n    public minDateTime: any;\n\n    public hours: any;\n    public mins: any;\n    public toMins: any;\n    public toHours: any;\n    public showCalendar: any;\n    public noOfNights: any;\n    public showNights = false;\n\n    public calStyle: any;\n    public dateIns: any;\n\n    public twoDates: any;\n    public singlePicker: any;\n    public disableToHH: any;\n    public disableToMM: any;\n    public disableToHHInc: any;\n    public disableToMMInc: any;\n    public disableFromHHInc: any;\n    public disableFromMMInc: any;\n    public disableFromHH: any;\n    public disableFromMM: any;\n    public isHoverValidDate: any;\n\n    private listenerId: number | undefined;\n    private calTravelOption: any;\n\n    private newDates:\n        | {\n              displayStr: string;\n              fromDate: string;\n              fromTime: string;\n              showCalendar: boolean;\n              toDate: string;\n              toDisplayStr: string;\n              toTime: string;\n              twoDates: boolean;\n          }\n        | undefined;\n\n    constructor(\n        private searchDataService: SearchDataService,\n        private datesService: DatesService,\n        private listenersService: ListenersService,\n        public platformService: PlatformService,\n        private settingsService: SettingsService,\n        private modalService: ModalService,\n        private scrollService: ScrollService,\n        private datePipe: TzDatePipe\n    ) {\n        /* this.monthsTxt = this.settingsService.locales.DATETIME_FORMATS.SHORTMONTH;\n         this.months = this.settingsService.locales.DATETIME_FORMATS.MONTH;*/\n    }\n\n    public get todayDate(): Date {\n        return new Date();\n    }\n\n    public get isOneWay(): boolean {\n        return !this.selectedServices['accommodation'] && this.tripType === 'oneWay';\n    }\n\n    public get selectedDate(): string {\n        this.doneBtn(true);\n\n        const calData = this.newDates;\n        if (calData) {\n            return this.datesService.getCalendarDateString(\n                calData.fromDate,\n                calData.toDate,\n                calData.displayStr,\n                this.calendarConf,\n                calData.fromTime,\n                calData.toTime,\n                this.tripType\n            );\n        }\n\n        return '';\n    }\n\n    ngOnInit() {\n        this.initializeCalendarComponent();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // this.initializeCalendarComponent();\n    }\n\n    ngOnDestroy() {\n        if (this.listenerId) {\n            this.listenersService.unregisterListener(this.listenerId);\n        }\n    }\n\n    public onCloseCalendar() {\n        if (this.platformService.isMobileDevice) {\n            this.modalService.dismiss({ newDates: this.newDates });\n        } else {\n            this.closeCalendar.emit();\n        }\n    }\n\n    public todayComparison(year: any, m: any, day: any): boolean {\n        return CalendarUtilsService.todayComparison(year, m, day);\n    }\n\n    public moveToNextMonth(add: number) {\n        const limitThreshold = this.content === CalTypes.CAL_MEETING_TYPE ? 1 : 2;\n        if (\n            (this.fromCal === 0 && add === -1) ||\n            ((this.fromCal + limitThreshold === this.monthsArr.length ||\n                this.fromCal + limitThreshold >= this.limitCal) &&\n                add === 1)\n        ) {\n            return;\n        }\n        this.fromCal += add;\n    }\n\n    public formAndGetDateIns(_date: Date) {\n        if (!_date) {\n            return;\n        }\n        return DatesService.getDateNoTime(_date);\n    }\n\n    public formDate(month_idx: any, day: any) {\n        if (!day || !this.monthsArr.length) {\n            return;\n        }\n        return DatesService.getDateNoTimeFrom(\n            this.monthsArr[month_idx].year,\n            this.monthsArr[month_idx].month,\n            day.toString()\n        );\n    }\n\n    public getDateComparisonFromVal(year: any, month: any, day: any, str: 'minDate' | 'maxDate'): any {\n        if (!this[str]) {\n            return;\n        }\n        if (!day) {\n            return;\n        }\n        const formDateIns = new Date(year, month, day);\n\n        if (!formDateIns) {\n            return;\n        }\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        if (str === 'minDate' && minDate) {\n            return formDateIns < minDate;\n        }\n        if (maxDate) {\n            return formDateIns > maxDate;\n        }\n    }\n\n    public isInvalid() {\n        let isInvalid = false;\n        isInvalid =\n            (this.singlePicker && !CalendarUtilsService.isValidDate(this.fromDate)) ||\n            (!this.singlePicker &&\n                (!CalendarUtilsService.isValidDate(this.fromDate) || !CalendarUtilsService.isValidDate(this.toDate))) ||\n            this.validFromAndToDateTime() ||\n            (this.singlePicker && this.isPickUpDisable) ||\n            (!this.singlePicker && this.isDropOfDisable) ||\n            this.disableTime;\n\n        return isInvalid;\n    }\n\n    public cancelBtn(noClear: boolean): void {\n        this.fromDate = null;\n        this.toDate = null;\n        this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.mins = '00';\n        this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.toMins = '00';\n        this.isPickUpDisable = true;\n        this.isDropOfDisable = true;\n\n        this.calModel.fromDisplayStr = '';\n        this.calModel.toDisplayStr = '';\n        this.calModel.displayStr = '';\n        this.calModel.appliedFromDate = '';\n        this.calModel.appliedToDate = '';\n\n        this.calModel.applied = false;\n        this.noOfNights = 0;\n        this.hoverDate = null;\n\n        this.calModel.businessMeeting = false;\n        this.calModel.preferBC = false;\n        this.calModel.translator = false;\n        this.enableDaysOnSelection(false);\n        //this.rollBackCalendarState();\n        if (!this.minDate && !this.maxDate) {\n            this.setMonths();\n        }\n\n        if (this.minDate) {\n            this.assignNoOfNights();\n        }\n\n        if (!noClear) {\n            this.clear.emit();\n        }\n    }\n\n    public selectDate(month_idx: any, day: any, isBan: any, disable: any) {\n        if (isBan || !day || disable || !this.monthsArr[month_idx]) {\n            return;\n        }\n\n        const year = this.monthsArr[month_idx].year;\n        const month = this.monthsArr[month_idx].month;\n\n        const date = new Date(year, month, parseInt(day.toString(), 10));\n\n        const nextYearDate = new Date(this.today.getFullYear() + 1, this.today.getMonth(), this.today.getDate());\n        const newToday = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n        if (date < newToday || date > nextYearDate) {\n            return;\n        }\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let minHours =\n            this.hours !== undefined\n                ? this.hours\n                : this.calendarConf.defaultTime\n                ? this.calendarConf.defaultTime\n                : '09';\n        let minMinutes = this.mins !== undefined ? this.mins : '00';\n\n        if ((this.fromDate && this.toDate) || (this.fromDate && date < this.fromDate)) {\n            this.disableFromHH = false;\n            this.disableFromMM = false;\n        } else if (this.fromDate && !this.toDate) {\n            this.disableToHH = false;\n            this.disableToMM = false;\n        }\n        this.disableTime = false;\n\n        this.toMins = this.toMins !== undefined ? this.toMins : '00';\n        this.toHours =\n            this.toHours !== undefined\n                ? this.toHours\n                : this.calendarConf.defaultTime\n                ? this.calendarConf.defaultTime\n                : '09';\n\n        const today = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n        if (this.calendarConf.time && today.getTime() === date.getTime()) {\n            this.minDateTime = today;\n            let hmin = new Date().getHours();\n            let mmin = new Date().getMinutes();\n            const mmin_reminder = mmin % 10;\n            if (mmin_reminder) {\n                mmin = mmin - mmin_reminder;\n                mmin = mmin + 10;\n                if (mmin === 60) {\n                    mmin = 0;\n                    hmin = hmin + 1;\n                }\n            }\n\n            //Check scope time is past than current time\n            const scopeDate = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n            scopeDate.setHours(this.hours, this.mins);\n            const currentDate = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate());\n            currentDate.setHours(hmin, mmin);\n\n            if (scopeDate.getTime() <= currentDate.getTime()) {\n                minHours = hmin < 10 ? '0' + hmin.toString() : hmin.toString();\n                minMinutes = mmin < 10 ? '0' + mmin.toString() : mmin.toString();\n            }\n            this.minDateTime.setHours(hmin, mmin);\n            this.disableFromHH = true;\n            this.disableFromMM = true;\n            this.disableToHH = true;\n            this.disableToMM = true;\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        if (!this.twoDates) {\n            this.hoverDate = null;\n            if (minDate && minDate > date) {\n                // alert('Meeting date should be within trip dates');\n                return;\n            }\n            if (maxDate && maxDate < date) {\n                return;\n            }\n\n            this.isPickUpDisable = false;\n            this.fromDate = date;\n            if (this.hours !== minHours || this.mins !== minMinutes) {\n                this.hours = minHours;\n                this.mins = minMinutes;\n            }\n            this.toDate = null;\n            // if (this.calendarConf.showNights) {\n            // this.showNights = true;\n            // this.noOfNights = 1;\n            // }\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n\n            if (!this.isInvalid()) {\n                this.doneBtn(true);\n            }\n            return;\n        }\n\n        if ((this.fromDate && this.toDate) || (this.fromDate && date < this.fromDate)) {\n            if (minDate && minDate > date) {\n                return;\n            }\n            if (maxDate && maxDate < date) {\n                return;\n            }\n            this.isDropOfDisable = true;\n            this.toDate = null;\n            this.hoverDate = null;\n            this.fromDate = date;\n            if (this.hours !== minHours || this.mins !== minMinutes) {\n                this.hours = minHours;\n                this.mins = minMinutes;\n                this.toHours = minHours;\n                this.toMins = minMinutes;\n            }\n            this.assignNoOfNights(this.fromDate, this.toDate, false);\n\n            if (this.fromDate && !this.toDate && this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(true);\n            }\n            return;\n        }\n\n        if (this.fromDate && date >= this.fromDate) {\n            if (this.twoDates) {\n                if (maxDate && maxDate < date) {\n                    return;\n                }\n                this.isDropOfDisable = false;\n                if (this.calendarConf.maxDays) {\n                    let dateDifferenceFromDate = this.dateDiff(this.fromDate, date, TimeUnit.d);\n                    if (this.showNights) {\n                        dateDifferenceFromDate--;\n                    }\n                    if (dateDifferenceFromDate >= this.calendarConf.maxDays) {\n                        setTimeout(() => {\n                            this.assignNoOfNights();\n                        }, 3000);\n                        return;\n                    }\n                }\n\n                const fromDate = new Date(\n                    this.fromDate.getFullYear(),\n                    this.fromDate.getMonth(),\n                    this.fromDate.getDate()\n                );\n                const dateDifference = this.dateDiff(fromDate, date, TimeUnit.d);\n                if (dateDifference < this.calendarConf.minDays) {\n                    return;\n                }\n\n                //set 30mins to dropOff time from pickup time if current date is choosed\n                if (dateDifference <= 0) {\n                    const drop_hour = parseInt(this.hours, 10) + 1;\n                    const pick_min = parseInt(this.mins, 10);\n                    let mins = pick_min + 30;\n                    if (mins >= 60) {\n                        mins = mins - 60;\n                        this.toHours = drop_hour;\n                    }\n\n                    if (this.hours > this.toHours) {\n                        this.toHours = this.hours;\n                    }\n\n                    this.toMins = mins < 10 ? '0' + mins : mins;\n                }\n\n                this.toDate = date;\n                // if (this.calendarConf.showNights) {\n                // this.showNights = true;\n                this.assignNoOfNights(this.fromDate, this.toDate, false);\n                // }\n                this.calModel.updateData = true;\n            }\n\n            if (this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(false);\n            }\n\n            if (this.calendarConf.minDays === 0 && !this.toDate) {\n                this.disableDaysOnSelection(true);\n            }\n\n            if (!this.isInvalid()) {\n                this.doneBtn(true);\n            }\n            return;\n        }\n        if (minDate && minDate > date) {\n            return;\n        }\n        if (maxDate && maxDate < date) {\n            return;\n        }\n\n        this.isPickUpDisable = false;\n        this.fromDate = date;\n        if (this.hours !== minHours || this.mins !== minMinutes) {\n            this.hours = minHours;\n            this.mins = minMinutes;\n            this.toHours = minHours;\n            this.toMins = minMinutes;\n        }\n\n        if (this.fromDate && !this.toDate && this.calendarConf.maxDays) {\n            this.disableDaysOnSelection(true);\n        }\n\n        this.assignNoOfNights(this.fromDate, this.toDate, false);\n    }\n\n    public scrollSelectedElement(el: HTMLElement): void {\n        if (!this.platformService.isMobileDevice) {\n            return;\n        }\n\n        requestAnimationFrame(() => {\n            this.scrollService.scrollToVisibleArea(el, 'mobCalendarFooterBlock', {\n                scrollTop: this.isModalEditMode ? 95 : 84,\n            });\n        });\n    }\n\n    public hoverOnDate(month_idx: any, day: any): any {\n        this.isHoverValidDate = !!day;\n\n        if (!this.twoDates) {\n            this.hoverDate = this.fromDate;\n            return;\n        }\n\n        if (!this.fromDate || !this.monthsArr[month_idx]) {\n            return;\n        }\n\n        const year = this.monthsArr[month_idx].year;\n        const month = this.monthsArr[month_idx].month;\n\n        const date = new Date(year, month, parseInt(day.toString(), 10));\n        this.hoverDate = null;\n        const nextYearDate = new Date(this.today.getFullYear() + 1, this.today.getMonth(), this.today.getDate());\n\n        if (date > nextYearDate) {\n            return true;\n        }\n\n        if (this.fromDate && date > this.fromDate) {\n            if (this.calendarConf.maxDays) {\n                let dateDifference = this.dateDiff(this.fromDate, date, TimeUnit.d);\n                if (this.showNights) {\n                    dateDifference--;\n                }\n                if (dateDifference >= this.calendarConf.maxDays) {\n                    return;\n                }\n            }\n            if (this.maxDate) {\n                const maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n                if (maxDate < date) {\n                    return;\n                }\n            }\n        }\n\n        if (CalendarUtilsService.isValidDate(date)) {\n            this.hoverDate = date;\n        }\n\n        this.assignNoOfNights(this.fromDate, this.hoverDate, true);\n    }\n\n    public isHoveredClass(monthObj: any, day: any): boolean {\n        const hoveredDate = this.formDate(monthObj.idx, day.text);\n        const selectedDateIsBiggerThanFromDate = hoveredDate\n            ? hoveredDate > this.formAndGetDateIns(this.fromDate)\n            : false;\n        const hoveredDateExistsAndSmallerTanToDate = hoveredDate\n            ? hoveredDate < this.formAndGetDateIns(this.toDate)\n            : false;\n        const hoveredDateSmallerThanToDate =\n            hoveredDateExistsAndSmallerTanToDate ||\n            (!this.toDate && hoveredDate ? hoveredDate <= this.formAndGetDateIns(this.hoverDate) : false);\n\n        return selectedDateIsBiggerThanFromDate && hoveredDateSmallerThanToDate;\n    }\n\n    private validateTimeSelection(selectedDate: any, isTo: any) {\n        console.log(selectedDate === null);\n        if (this.calendarConf.time !== true || selectedDate === null) {\n            return;\n        }\n\n        if (isTo) {\n            this.disableToHH = false;\n            this.disableToMM = false;\n            this.disableToHHInc = false;\n            this.disableToMMInc = false;\n        } else {\n            this.disableFromHH = false;\n            this.disableFromMM = false;\n            this.disableFromHHInc = false;\n            this.disableFromMMInc = false;\n        }\n\n        this.disableTime = false;\n        const fromDate = new Date(this.fromDate.getTime());\n        const f_date = new Date(fromDate.getFullYear(), fromDate.getMonth(), fromDate.getDate());\n        fromDate.setHours(this.hours);\n        fromDate.setMinutes(this.mins);\n        if (this.toDate) {\n            const toDate = new Date(this.toDate.getTime());\n            const t_date = new Date(toDate.getFullYear(), toDate.getMonth(), toDate.getDate());\n            toDate.setHours(this.toHours);\n            toDate.setMinutes(this.toMins);\n            const dateDifference = this.dateDiff(f_date, t_date, TimeUnit.d);\n            if (dateDifference <= 0) {\n                const minutesDifference = this.dateDiff(f_date, t_date, TimeUnit.m);\n                this.disableTime = minutesDifference < 30;\n            }\n        }\n\n        const today = new Date();\n        const t = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n        const s = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n\n        const newToday = new Date(t.getTime());\n        newToday.setHours(today.getHours());\n\n        let mm = today.getMinutes(); // mins are incremented by 10\n        //mm = parseInt(mm);\n        const mmr = mm % 10;\n        if (mmr) {\n            mm = mm - mmr + 10;\n        }\n        newToday.setMinutes(mm);\n\n        if (t.getTime() !== s.getTime()) {\n            return;\n        }\n\n        if (isTo) {\n            selectedDate.setHours(this.toHours);\n            selectedDate.setMinutes(this.toMins);\n        } else {\n            selectedDate.setHours(this.hours);\n            selectedDate.setMinutes(this.mins);\n        }\n\n        // Disable Dec Hours\n        if (\n            newToday.getHours() >= selectedDate.getHours() ||\n            (newToday.getHours() + 1 === selectedDate.getHours() && newToday.getMinutes() > selectedDate.getMinutes())\n        ) {\n            if (!isTo) {\n                this.disableFromHH = true;\n            }\n            if (isTo) {\n                this.disableToHH = true;\n            }\n        }\n\n        // Disable Inc Hours\n        if (newToday.getHours() > 0 && selectedDate.getHours() === 23) {\n            if (!isTo) {\n                this.disableFromHHInc = true;\n            }\n            if (isTo) {\n                this.disableToHHInc = true;\n            }\n        }\n\n        // Disable Dec Minutes\n        if (newToday.getHours() === selectedDate.getHours() && newToday.getMinutes() >= selectedDate.getMinutes()) {\n            if (!isTo) {\n                this.disableFromMM = true;\n            }\n            if (isTo) {\n                this.disableToMM = true;\n            }\n        }\n\n        // Disable Inc Hours\n        if (\n            newToday.getHours() === selectedDate.getHours() &&\n            newToday.getMinutes() > 0 &&\n            selectedDate.getMinutes() === 50\n        ) {\n            if (!isTo) {\n                this.disableFromMMInc = true;\n            }\n            if (isTo) {\n                this.disableToMMInc = true;\n            }\n        }\n    }\n\n    private updateTripConfig(tripConfig: any) {\n        if (!tripConfig || tripConfig.content !== 'tripCal') {\n            return;\n        }\n        this.calendarConf = tripConfig;\n        setTimeout(() => {\n            this.initializeCalendarComponent();\n        }, 200);\n    }\n\n    // set date range correctly when linked to travel option (this.calendarConf.twoDates === null)\n    private setDateRange(conf: any, search: any, isInit?: boolean) {\n        this.calTravelOption = this.travelOption;\n\n        if (conf.linked) {\n            for (const dep in conf.linked) {\n                if (search[conf.linked[dep]]) {\n                    switch (dep) {\n                        case 'fromDate':\n                            // case cal is open before the one it depends on\n                            if (search[conf.linked[dep]].fromDate) {\n                                this.minDate = new Date(search[conf.linked[dep]].fromDate);\n                            }\n                            break;\n                        case 'toDate':\n                            // case cal is open before the one it depends on\n                            if (search[conf.linked[dep]].toDate) {\n                                this.maxDate = new Date(search[conf.linked[dep]].toDate);\n                            }\n                            break;\n                    }\n                }\n            }\n        }\n        if (this.calModel.resultSet && isInit) {\n            this.calTravelOption = this.calModel.twoDates ? Trip.ROUND_TRIP : Trip.ONE_WAY;\n        }\n        this.tripType = this.calModel.disableRoundTrip ? Trip.ONE_WAY : this.calTravelOption;\n        this.calTravelOption = this.tripType;\n        this.twoDates = CalendarUtilsService.isTwoDates(this.calendarConf.dateRange, this.calTravelOption);\n        //TODO remove once new mode used (replace singlePicker var on html by !datRange)\n        this.singlePicker = !this.twoDates;\n    }\n\n    private validFromAndToDateTime() {\n        let fromdate;\n        let todate;\n\n        if (CalendarUtilsService.isValidDate(this.fromDate)) {\n            fromdate = new Date(this.fromDate.getTime());\n        } else {\n            return false;\n        }\n        if (CalendarUtilsService.isValidDate(this.toDate)) {\n            todate = new Date(this.toDate.getTime());\n        } else {\n            return false;\n        }\n\n        fromdate?.setHours(parseInt(this.hours, 10), parseInt(this.mins, 10));\n        if (todate) {\n            todate.setHours(parseInt(this.toHours, 10), parseInt(this.toMins, 10));\n        }\n\n        if (this.calendarConf.time === 'true' && !this.twoDates) {\n            return this.minDateTime && fromdate.getTime() < this.minDateTime.getTime();\n        }\n        if (this.twoDates && this.calendarConf.time === 'true') {\n            return (\n                fromdate.getTime() >= todate.getTime() ||\n                (this.minDateTime && fromdate.getTime() < this.minDateTime.getTime())\n            );\n        } else {\n            return false;\n        }\n    }\n\n    private enableDaysOnSelection(disable: boolean): void {\n        this.limitCal = this.monthsArr.length;\n        for (const month of this.monthsArr) {\n            month.monthDays.forEach((days: any) => {\n                days.forEach((d: any) => {\n                    d.disable = disable;\n                });\n            });\n        }\n    }\n\n    private disableDaysOnSelection(disable: any): void {\n        // if (calTravelOption === Trip.ONE_WAY) return;\n        if (!this.calendarConf.maxDays) {\n            return;\n        }\n        if (!disable) {\n            this.enableDaysOnSelection(disable);\n            return;\n        }\n\n        let restrictDays = parseInt(this.calendarConf.maxDays, 10);\n        if (!this.showNights) {\n            restrictDays = restrictDays - 1;\n        }\n        const fromDate = new Date(this.fromDate.getTime());\n        const addDays = fromDate.getDate() + restrictDays;\n        const restrictDate = new Date(fromDate.getTime());\n        restrictDate.setDate(addDays);\n\n        this.limitCal = this.monthsArr.length;\n        for (let i = 0; i < this.monthsArr.length; i++) {\n            this.monthsArr[i].monthDays.forEach((dd: any) => {\n                dd.forEach((day: any) => {\n                    if (!day.text) {\n                        return;\n                    }\n\n                    const d = new Date(this.monthsArr[i].year, this.monthsArr[i].month, day.text);\n                    if (d > restrictDate) {\n                        day.disable = true;\n                        if (this.limitCal === this.monthsArr.length) {\n                            this.limitCal = i + (day.text === 1 ? 0 : 1);\n                        }\n                    }\n                });\n            });\n        }\n    }\n\n    private doneBtn(keepOpen?: boolean) {\n        const res: any = {};\n\n        if (!(this.fromDate instanceof Date && !isNaN(this.fromDate.getTime()))) {\n            return;\n        }\n        if (this.twoDates && !(this.toDate instanceof Date)) {\n            return;\n        }\n\n        let minDate = null;\n        if (this.minDate) {\n            minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());\n        }\n\n        let maxDate = null;\n        if (this.maxDate) {\n            maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate());\n        }\n\n        const fromDate = new Date(this.fromDate.getFullYear(), this.fromDate.getMonth(), this.fromDate.getDate());\n        let toDate;\n        if (minDate && minDate > fromDate) {\n            return;\n        }\n        if (maxDate && maxDate < fromDate) {\n            return;\n        }\n\n        if (this.fromDate && this.fromDate instanceof Date) {\n            res.fromDate = DatesService.getDateNoTime(this.fromDate);\n            res.toDisplayStr = '';\n        }\n        if (this.toDate && this.toDate instanceof Date) {\n            res.toDate = DatesService.getDateNoTime(this.toDate);\n            toDate = new Date(this.toDate.getFullYear(), this.toDate.getMonth(), this.toDate.getDate());\n        } else {\n            res.toDate = null;\n        }\n        if (this.twoDates) {\n            if (this.toHours) {\n                res.toTime = this.toHours + ':' + this.toMins;\n            } else {\n                res.toTime = '00:00';\n            }\n        } else {\n            res.toTime = null;\n        }\n        if (this.hours) {\n            res.fromTime = this.hours + ':' + this.mins;\n        } else {\n            res.fromTime = '00:00';\n        }\n\n        res.twoDates = this.twoDates;\n\n        if (this.formDisplayStrAttribute) {\n            res.displayStr = this.datesService.formDoubleDate(fromDate, toDate);\n        } else {\n            res.displayStr = this.calModel.fromDisplayStr;\n            if (this.calModel.toDisplayStr) {\n                res.displayStr = res.fromDisplayStr + ' - ' + res.toDisplayStr;\n            }\n        }\n\n        if (this.formDisplayStrAttribute && toDate && this.dateDiff(fromDate, toDate, TimeUnit.d) === 0) {\n            const fromMonth = this.datesService.getMonth(fromDate.getMonth(), true);\n            res.fromDisplayStr = res.fromDisplayStr + ' ' + fromMonth + ', ' + fromDate.getFullYear();\n            res.toDisplayStr = '';\n        }\n\n        this.newDates = res;\n        this.apply.emit({ newDates: res, keepOpen });\n        if (!keepOpen) {\n            this.listenersService.NotifyListeners(ListenerId.LISTEN_FOCUS_NEXT, {\n                id: 'tabIdx' + this.calendarConf.tabOrder,\n            });\n        }\n    }\n\n    private initializeCalendarComponent(): void {\n        if (this.listenerId === undefined) {\n            this.listenerId = this.listenersService.registerListener(\n                [ListenerId.LISTEN_LANG, ListenerId.LISTEN_CAL_REFRESH],\n                this.setStaticValues\n            );\n        }\n        this.fromDate = null;\n        this.toDate = null;\n        this.hoverDate = null;\n        this.mins = '00';\n        this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n        this.toMins = '00';\n        this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n\n        this.showCalendar = false;\n        this.noOfNights = 0;\n        this.showNights = this.calendarConf.showNights; // show number of nights on date range\n\n        let initModel;\n        if (this.calendarData) {\n            this.calModel = ToolsService.deepCopy(this.calendarData);\n        } else {\n            this.calModel = {\n                fromDate: this.fromDate,\n                toDate: this.toDate,\n                showCalendar: this.showCalendar,\n            };\n        }\n        this.disableRoundTrip = this.calModel.disableRoundTrip;\n        this.setDateRange(this.calendarConf, this.search, true);\n\n        if (this.defaultValue) {\n            initModel = this.defaultValue;\n        } else {\n            initModel = this.calModel;\n        }\n        if (!this.twoDates && initModel.toDate) {\n            initModel.toDate = null;\n            initModel.toTime = '';\n        }\n        this.setMonths();\n        this.initDateIns(initModel);\n        this.calStyle = {};\n        this.dateIns = {};\n\n        this.assignDefaultValue();\n        setTimeout(() => {\n            if (!this.isMobile || !this.fromDate || this.fromDate === '') {\n                return;\n            }\n            const scrollEl = document.getElementById(this.fromDate.getMonth() + this.fromDate.getFullYear());\n            if (scrollEl) {\n                scrollEl.scrollIntoView();\n            }\n        });\n    }\n\n    private setStaticValues(subj: any): void {\n        switch (subj) {\n            case ListenerId.LISTEN_CAL_REFRESH: // on travel options change\n                this.initializeCalendarComponent();\n                break;\n            default:\n                console.log('received unhandled listener subject:' + subj);\n        }\n    }\n\n    private setMonths() {\n        const today = new Date();\n        const fromDate = this.minDate ? this.minDate : today;\n        const toDate = this.maxDate\n            ? this.maxDate\n            : new Date(today.getFullYear(), today.getMonth() + 12, today.getDate());\n        this.monthsArr = [];\n\n        const monthLimit =\n            CalendarUtilsService.monthDiff(fromDate, toDate) > 0\n                ? CalendarUtilsService.monthDiff(fromDate, toDate) + 1\n                : 1;\n        /* Date needs to be always 'one' otherwise if current date is 30 then when we add one month to jan\n        it'll become march 02 since there is only 28 days in feb in normal years */\n\n        const frDate = new Date(fromDate.getFullYear(), fromDate.getMonth(), 1);\n\n        for (let i = 0; i < monthLimit; i++) {\n            frDate.setMonth(frDate.getMonth() + (i === 0 ? 0 : 1));\n            const monthObj = CalendarUtilsService.getMonthAndYear(frDate.getMonth(), frDate.getFullYear());\n            this.monthsArr.push({\n                idx: i,\n                monthObj,\n                month: monthObj.monthNumber,\n                monthTxt: this.datesService.getMonth(monthObj.monthNumber, false),\n                year: monthObj.year,\n                monthDays: this.datesService.getMonthArrayForCalendar(monthObj.year, monthObj.monthNumber),\n            });\n        }\n    }\n\n    private initDateIns(dateIns: any) {\n        this.calModel.showCalendar = dateIns.showCalendar; //Change\n        this.noOfNights = 0;\n        if (dateIns.fromDate) {\n            const fromDate = DatesService.getNewDate(dateIns.fromDate);\n            if (fromDate) {\n                if (dateIns.fromTime) {\n                    const res = dateIns.fromTime.split(':');\n                    this.hours = res[0];\n                    this.mins = res[1];\n                } else {\n                    this.hours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n                    this.mins = '00';\n                }\n\n                this.isPickUpDisable = false;\n                this.fromDate = fromDate;\n                this.calModel.fromDate = fromDate;\n                for (let i = 0; i < this.monthsArr.length; i++) {\n                    this.monthsArr[i].monthDays.forEach((dd: any) => {\n                        dd.forEach((day: any) => {\n                            if (!day.text) {\n                                return;\n                            }\n                            const d = new Date(this.monthsArr[i].year, this.monthsArr[i].month, day.text);\n                            if (d.getTime() === fromDate.getTime()) {\n                                this.fromCal = i === 12 ? 11 : i;\n                            }\n                        });\n                    });\n                }\n                if (this.calendarConf.showNights) {\n                    this.noOfNights = 1;\n                }\n            }\n            let toDate = null;\n            if ((this.calendarConf.dateRange || this.twoDates) && dateIns.toDate) {\n                toDate = DatesService.getNewDate(dateIns.toDate);\n            }\n            if (toDate) {\n                if (dateIns.toTime) {\n                    const res = dateIns.toTime.split(':');\n                    this.toHours = res[0];\n                    this.toMins = res[1];\n                } else {\n                    this.toHours = this.calendarConf.defaultTime ? this.calendarConf.defaultTime : '09';\n                    this.toMins = '00';\n                }\n\n                this.isDropOfDisable = false;\n                this.calModel.toDate = toDate;\n                this.toDate = new Date(\n                    toDate.getFullYear(),\n                    toDate.getMonth(),\n                    parseInt(toDate.getDate().toString(), 10)\n                );\n\n                this.assignNoOfNights(fromDate, toDate, false);\n            }\n\n            if ((this.calendarConf.dateRange || this.twoDates) && !this.toDate && this.calendarConf.maxDays) {\n                this.disableDaysOnSelection(true);\n            }\n        }\n    }\n\n    private assignDefaultValue() {\n        if (this.calendarConf.calStyle && this.platformService.isMobileDevice) {\n            this.calStyle = JSON.parse(this.calendarConf.calStyle);\n        }\n\n        if (this.calendarConf.showNights) {\n            this.showNights = this.calendarConf.showNights;\n        }\n\n        if (this.calModel && !this.calModel.fromDate) {\n            this.setMonths();\n            return;\n        }\n        this.initDateIns(this.calModel);\n    }\n\n    private dateDiff(fromdate: Date, toDate: Date, datepart: TimeUnit) {\n        datepart = datepart.toLowerCase() as TimeUnit;\n        const fromD: any = new Date(fromdate.getTime());\n        const toD: any = new Date(toDate.getTime());\n        if (datepart === 'h') {\n            fromD.setHours(this.hours, this.mins);\n            toD.setHours(this.toHours, this.toMins);\n        }\n        const diff = toD - fromD;\n\n        // if we want number of days but have less than 24h return 1 if we are not on\n        // same day, 0 otherwise\n        if (datepart === 'd' && diff < TimeUintMap.d) {\n            return fromD.getDay() !== toD.getDay() ? 1 : 0;\n        }\n        return Math.floor(diff / TimeUintMap[datepart]);\n    }\n\n    private assignNoOfNights(fromDate?: any, toDate?: any, checkToDateAvail?: any) {\n        if (checkToDateAvail && this.toDate) {\n            return;\n        }\n\n        if (!fromDate || !toDate) {\n            this.noOfNights = 0;\n            return;\n        }\n\n        let dateDifference = this.dateDiff(fromDate, toDate, TimeUnit.d);\n        if (this.content === CalTypes.CAL_RENTAL_TYPE || this.content === CalTypes.CAL_TRANSFER_TYPE) {\n            dateDifference = this.dateDiff(fromDate, toDate, TimeUnit.h);\n            //calculating the number of hours for the car rental search service\n            this.noOfNights = Math.ceil(dateDifference / 24);\n            return;\n        }\n        if (dateDifference >= 0) {\n            this.noOfNights = dateDifference;\n            if (this.noOfNights === 0 && this.showNights) {\n                this.noOfNights = -1; //if same day is chosen then 1 day to be displayed.\n            }\n        }\n    }\n}\n","<div class=\"trip-dates-calendar notranslate trazler-calendar-container\" ng-style=\"dateStyle\">\n    <div class=\"calendar-week-days-wrapper\">\n        <div *ngIf=\"isMobile\" class=\"calendar-week-days-box\">\n            <div *ngFor=\"let weekHead of weekHeads\" class=\"calendar-week-day-title\">\n                {{ weekHead }}\n            </div>\n        </div>\n    </div>\n\n    <div\n        class=\"trip-dates-calendar-row calendar-row flex\"\n        [ngClass]=\"{ 'trip-dates-calendar-row--selected': !isInvalid() }\"\n    >\n        <div\n            class=\"trip-dates-calendar-flex calender-month-container\"\n            data-test=\"calendar-month-container\"\n            id=\"{{ monthObj.month + monthObj.year }}\"\n            [ngClass]=\"{ 'last-container': !isMobile && isLast, 'mt-0': isFirst }\"\n            *ngFor=\"\n                let monthObj of monthsArr\n                    | slice\n                        : (isMobile ? 0 : fromCal)\n                        : fromCal + (!isMobile ? 2 : limitCal ? limitCal : monthsArr.length);\n                let isLast = last;\n                let isFirst = first\n            \"\n        >\n            <div class=\"calendar-mobile-top\" style=\"display: flex; text-align: center\" data-test=\"calendar-top\">\n                <div class=\"mobile-hidden\" [hidden]=\"isLast\">\n                    <button\n                        class=\"previous-nxt-btn\"\n                        (click)=\"moveToNextMonth(-1)\"\n                        [ngClass]=\"{ 'previous-nxt-btn-hover': fromCal !== 0 }\"\n                        data-test=\"calendar-previous-month-button\"\n                    >\n                        <img\n                            class=\"material-icons notranslate previous-nxt-btn-icon previous-icon\"\n                            [ngClass]=\"{ 'previous-nxt-btn-icon-disable': fromCal === 0 }\"\n                            src=\"/assets/icons/web/icons/calendar_left_back-primary.svg\"\n                        />\n                    </button>\n                </div>\n\n                <div *ngIf=\"isLast\" class=\"month-txt-empty-block mobile-hidden\"></div>\n\n                <div\n                    class=\"month-txt align-center justify-center flex\"\n                    data-test=\"calendar-top-center\"\n                    [attr.data-year]=\"monthObj.monthTxt + ' ' + monthObj.year\"\n                >\n                    {{ monthObj.monthTxt }} {{ monthObj.year }}\n                </div>\n\n                <div *ngIf=\"isFirst\" class=\"month-txt-empty-block mobile-hidden\"></div>\n\n                <div class=\"mobile-hidden\" [hidden]=\"isFirst\">\n                    <button\n                        class=\"previous-nxt-btn\"\n                        (click)=\"moveToNextMonth(1)\"\n                        [ngClass]=\"{\n                            'previous-nxt-btn-hover': fromCal + 2 !== monthsArr.length && fromCal + 2 < limitCal\n                        }\"\n                        data-test=\"calendar-next-month-button\"\n                    >\n                        <img\n                            class=\"material-icons notranslate previous-nxt-btn-icon next-icon\"\n                            [ngClass]=\"{\n                                'previous-nxt-btn-icon-disable':\n                                    fromCal + 2 === monthsArr.length || fromCal + 2 >= limitCal\n                            }\"\n                            src=\"/assets/icons/web/icons/calendar_right_back-primary.svg\"\n                        />\n                    </button>\n                </div>\n            </div>\n            <div *ngIf=\"!isMobile\" class=\"week-ends flex\">\n                <div *ngFor=\"let weekHead of weekHeads\" class=\"week-header flex align-center justify-center\">\n                    {{ weekHead }}\n                </div>\n            </div>\n            <div>\n                <table class=\"border-table-calendar\" data-test=\"calendar-border-table\">\n                    <tr *ngFor=\"let monthDaysArr of monthObj.monthDays; let trFirst = first; let trLast = last\">\n                        <td\n                            #dayElement\n                            role=\"button\"\n                            *ngFor=\"let day of monthDaysArr; let first = first; let last = last\"\n                            class=\"t-day\"\n                            (mouseover)=\"hoverOnDate(monthObj.idx, day.text)\"\n                            (click)=\"\n                                selectDate(monthObj.idx, day.text, false, day.disable);\n                                scrollSelectedElement(dayElement)\n                            \"\n                            [ngClass]=\"{\n                                'no-border': !day.text,\n                                't-selected-date':\n                                    (fromDate &&\n                                        formDate(monthObj.idx, day.text)?.toString() ==\n                                            formAndGetDateIns(fromDate).toString()) ||\n                                    (toDate &&\n                                        formDate(monthObj.idx, day.text)?.toString() ==\n                                            formAndGetDateIns(toDate).toString()),\n                                disableBtnBorder: !isHoverValidDate,\n                                'day-disable': todayComparison(monthObj.year, monthObj.month, day.text) || day.disable,\n                                'hover-cls': isHoveredClass(monthObj, day),\n                                't-day-first': first,\n                                't-day-last': last,\n                                't-selected-date--from-date':\n                                    fromDate &&\n                                    formDate(monthObj.idx, day.text)?.toString() ==\n                                        formAndGetDateIns(fromDate).toString(),\n                                't-selected-date--to-date':\n                                    toDate &&\n                                    formDate(monthObj.idx, day.text)?.toString() ==\n                                        formAndGetDateIns(toDate).toString(),\n                                't-day--today':\n                                    todayDate.getFullYear() === monthObj.year &&\n                                    todayDate.getMonth() === monthObj.month &&\n                                    todayDate.getDate() === day.text,\n                                't-day--oneWay': isOneWay\n                            }\"\n                        >\n                            <div\n                                class=\"day-number-text t-day-col-box\"\n                                [ngClass]=\"{\n                                    't-day-col-text-box-first-day': trFirst && day.text === 1,\n                                    't-day-col-text-box-last-day': trLast && last && day.text\n                                }\"\n                            >\n                                <div class=\"t-day-col-text-box\">\n                                    {{ day.text ? day.text : '&nbsp;' }}\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"bottom-cal-footer trip-dates-calendar-footer calendar-footer\">\n        <div\n            id=\"mobCalendarFooterBlock\"\n            class=\"footer-row space-between calendar-footer-block\"\n            [hidden]=\"isMobile && isInvalid()\"\n            [ngClass]=\"{ 'flight-train': calendarConf.showTripOption }\"\n        >\n            <div class=\"nights\" data-test=\"calendar-show-nights\" ng-show=\"noOfNights >= -1\">\n                <span *ngIf=\"isMobile\">\n                    {{ selectedDate }}\n                </span>\n\n                <span [hidden]=\"!(showNights && noOfNights >= 1)\"\n                    >{{ platformService.isMobileDevice ? ' (' : ' ' }}{{ noOfNights }}\n                    {{ (noOfNights > 1 ? 'GENERAL.nights' : 'GENERAL.night') | translate\n                    }}{{ platformService.isMobileDevice ? ')' : ' ' }}</span\n                >\n\n                <span [hidden]=\"!(showNights && noOfNights === -1)\"> 1 {{ 'GENERAL.DAY' | translate }} </span>\n\n                <span [hidden]=\"showNights\">\n                    <span [hidden]=\"!(fromDate && (singlePicker || toDate || hoverDate || noOfNights > 1))\"\n                        >{{ platformService.isMobileDevice ? ' (' : ' ' }}{{ noOfNights + 1 }}\n                        {{ (noOfNights + 1 > 1 ? 'GENERAL.DAYS' : 'GENERAL.DAY') | translate\n                        }}{{ platformService.isMobileDevice ? ')' : ' ' }}</span\n                    >\n                </span>\n            </div>\n\n            <div class=\"calender-action-btns flex flex-row\">\n                <div>\n                    <button\n                        *ngIf=\"!platformService.isMobileDevice\"\n                        id=\"cal-clear\"\n                        data-test=\"calendar-clear-button\"\n                        class=\"tz-btn calendar-button tz-btn-secondary\"\n                        (click)=\"cancelBtn(false)\"\n                        [ngClass]=\"{ passive: (singlePicker && !fromDate) || (!singlePicker && !fromDate) }\"\n                    >\n                        {{ 'GENERAL.CLEAR' | translate }}\n                    </button>\n                </div>\n                <div class=\"calendar-apply-block\">\n                    <button\n                        class=\"tz-btn calendar-button tz-btn-primary\"\n                        (click)=\"onCloseCalendar()\"\n                        [ngClass]=\"{\n                            passive: (singlePicker && !fromDate) || (!singlePicker && (!fromDate || !toDate))\n                        }\"\n                        [disabled]=\"isInvalid()\"\n                        id=\"done-date-btn\"\n                        data-test=\"calendar-apply-button\"\n                    >\n                        {{ 'SEARCH.APPLY' | translate }}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TrazlerTripDatesCalendarComponent } from './components/trazler-trip-dates-calendar/trazler-trip-dates-calendar.component';\nimport { TrazlerTransferCalendarComponent } from './components/trazler-transfer-calendar/trazler-transfer-calendar.component';\nimport { TrazlerCalendarComponent } from './components/trazler-calendar/trazler-calendar.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { TRANSLATION_CONFIG } from 'src/app/config/translation.config';\nimport { DatetimeCalendarComponent } from '../datetime-calendar/datetime-calendar.component';\nimport { MbscDatepickerModule } from '@mobiscroll/angular';\nimport { FormsModule } from '@angular/forms';\nimport { SharedModule } from '@shared/shared.module';\n\n@NgModule({\n    declarations: [\n        TrazlerCalendarComponent,\n        TrazlerTripDatesCalendarComponent,\n        TrazlerTransferCalendarComponent,\n        DatetimeCalendarComponent,\n    ],\n    imports: [\n        MbscDatepickerModule,\n        CommonModule,\n        TranslateModule.forChild(TRANSLATION_CONFIG),\n        FormsModule,\n        SharedModule,\n    ],\n    exports: [TrazlerCalendarComponent],\n})\nexport class TrazlerCalendarModule {}\n","import { Injectable } from '@angular/core';\nimport { Trip } from '@core/constants/trip';\nimport { CalTypes } from '@core/constants/call-types.const';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class CalendarUtilsService {\n    constructor() {}\n\n    public static isTwoDates(\n        dateRange: boolean | string,\n        travelType: Trip | string,\n        hasAcc?: boolean\n    ): boolean | undefined {\n        switch (dateRange) {\n            case CalTypes.CAL_RANGE_TRAVEL:\n                return hasAcc || travelType === Trip.ROUND_TRIP;\n            case CalTypes.CAL_RANGE_FREE:\n                return travelType ? travelType === Trip.ROUND_TRIP : undefined;\n            case CalTypes.CAL_RANGE_ONE_DATE:\n                return false;\n            case CalTypes.CAL_RANGE_TWO_DATES:\n                return true;\n            default:\n                return;\n        }\n    }\n\n    public static monthDiff(d1: Date, d2: Date) {\n        let months;\n        months = (d2.getFullYear() - d1.getFullYear()) * 12;\n        months -= d1.getMonth();\n        months += d2.getMonth();\n        return months <= 0 ? 0 : months;\n    }\n\n    public static getMonthAndYear(monthNumber: number, year: number) {\n        return {\n            monthNumber,\n            year,\n        };\n    }\n\n    public static todayComparison(year: any, m: any, day: any): boolean {\n        const todayDate = new Date();\n        const formDateIns = new Date(year, m, day);\n        const nextYearDate = new Date(todayDate.getFullYear() + 1, todayDate.getMonth(), todayDate.getDate());\n\n        if (formDateIns > nextYearDate) {\n            return true;\n        }\n\n        return new Date(todayDate.getFullYear(), todayDate.getMonth(), todayDate.getDate()) > formDateIns;\n    }\n\n    public static isValidDate(date: any): boolean {\n        return date instanceof Date && !isNaN(date.getTime());\n    }\n\n    public static isTheSameDaySelectedForAccommodation(tripCal: string, searchConf: any, calData: any) {\n        return (\n            calData.toDate &&\n            calData.toDate !== '' &&\n            CalendarUtilsService.isSelectedDateRangeCheck('tripCal', searchConf, calData)\n        );\n    }\n\n    public static isSelectedDateRangeCheck(calType: string, searchConf: any, calData: any): boolean {\n        let resetDate = false;\n        for (let confIdx = searchConf.length - 1; confIdx >= 0; confIdx--) {\n            for (const field in searchConf[confIdx]) {\n                if (field !== calType) {\n                    continue;\n                }\n                const fromDate = new Date(calData.fromDate).getTime();\n                const toDate = new Date(calData.toDate).getTime();\n                resetDate =\n                    Math.floor((toDate - fromDate) / 86400000) > searchConf[confIdx][calType].maxDays ||\n                    toDate === fromDate;\n            }\n        }\n        return resetDate;\n    }\n\n    public static shouldResetTransferCalendar(transferCal: any, tripCal: any, selectedServices: any): boolean {\n        if (selectedServices.accommodation && selectedServices.transfer && tripCal.toDate && tripCal.toDate !== '') {\n            if (\n                transferCal &&\n                transferCal.tripType === Trip.ONE_WAY &&\n                transferCal.fromDate &&\n                transferCal.fromDate !== ''\n            ) {\n                return (\n                    new Date(tripCal.fromDate) > new Date(transferCal.fromDate) ||\n                    new Date(transferCal.fromDate) > new Date(tripCal.toDate)\n                );\n            } else if (transferCal && transferCal.toDate && transferCal.toDate !== '') {\n                return (\n                    new Date(tripCal.fromDate) > new Date(transferCal.fromDate) ||\n                    new Date(transferCal.toDate) > new Date(tripCal.toDate)\n                );\n            }\n        }\n\n        return false;\n    }\n\n    public static shouldResetPreselectedDates(calType: string, htmlSearchConf: any, search: any): boolean {\n        if (!htmlSearchConf) {\n            return false;\n        }\n        for (let confIdx = htmlSearchConf.length - 1; confIdx >= 0; confIdx--) {\n            for (const field in htmlSearchConf[confIdx]) {\n                if (field !== calType || !htmlSearchConf[confIdx][field].linked) {\n                    continue;\n                }\n\n                let minDate;\n                let maxDate;\n\n                if (\n                    htmlSearchConf[confIdx][field].linked.fromDate &&\n                    search[htmlSearchConf[confIdx][field].linked.fromDate] &&\n                    search[htmlSearchConf[confIdx][field].linked.fromDate].fromDate !== ''\n                ) {\n                    minDate = new Date(search[htmlSearchConf[confIdx][field].linked.fromDate].fromDate);\n                }\n\n                if (\n                    htmlSearchConf[confIdx][field].linked.toDate &&\n                    search[htmlSearchConf[confIdx][field].linked.toDate] &&\n                    search[htmlSearchConf[confIdx][field].linked.toDate].toDate !== ''\n                ) {\n                    maxDate = new Date(search[htmlSearchConf[confIdx][field].linked.toDate].toDate);\n                }\n\n                if (\n                    (minDate && minDate > new Date(search[calType].fromDate)) ||\n                    (maxDate && maxDate < new Date(search[calType].toDate))\n                ) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    public static getDefaultCalendarValue(keepOpen = false): any {\n        return {\n            fromDate: '',\n            toDate: '',\n            showCalendar: keepOpen,\n            updateTime: false,\n            fromDisplayStr: '',\n            toDisplayStr: '',\n            businessMeeting: false,\n            preferBC: false,\n            translator: false,\n            travelOption: 'roundTrip',\n            displayStr: '',\n        };\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { of, Observable, Subject, Subscriber } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { ApiAccessService } from '@services/searchEngine/services/api-access.service';\nimport { EngineRuleService } from '@services/searchEngine/services/engine-rule-service';\nimport { GeneralSettings } from '@core/constants/general-settings';\nimport { SettingsService } from '@services/services/settings-service';\nimport { environment } from '@environments/environment';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n    AddressSource,\n    LinkedFieldInfo,\n    LocationConfig,\n    SearchAddress,\n    SearchConfigOrder,\n} from '@schemas/modules/core/search-address';\nimport { DialogService } from '@services/dialog.service';\nimport { RecentSearchService } from './recent-search.service';\n\nconst sameAddressMsg = 'NOTIFS.FROM_TO_DIFFERENT';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class AddressService {\n    private myLocation!: SearchAddress;\n\n    constructor(\n        private apiAccessService: ApiAccessService,\n        private engineRuleService: EngineRuleService,\n        private settingsService: SettingsService,\n        private translateService: TranslateService,\n        private dialogService: DialogService,\n        private recentSearchService: RecentSearchService\n    ) {}\n\n    private static getLinkedData(conf: any, searchData: any): any {\n        const linkedField = conf.linked ? conf.linked.field : '';\n\n        if (searchData[linkedField]) {\n            return {\n                lat: searchData[linkedField].latitude,\n                lng: searchData[linkedField].longitude,\n                country: searchData[linkedField].countryCodes,\n                radius: conf.linked ? conf.linked.radius : 0,\n                placeId: searchData[linkedField].placeId,\n            };\n        }\n\n        return undefined;\n    }\n\n    public getPlace(fieldObj: any, selectedObj: any, filterType: string, deferred: any): void {\n        // no request when place id empty\n        if (!selectedObj.placeId || selectedObj.placeId === '') {\n            deferred.resolve(fieldObj);\n            return;\n        }\n\n        fieldObj.waitForReq = true;\n        this.apiAccessService.getPlace(selectedObj.placeId, filterType).then(\n            (data: any) => {\n                console.log('DATA from place', data);\n                fieldObj.waitForReq = false;\n                fieldObj.countryCode = data.countryISOCode;\n                fieldObj.latitude = data.location.latitude;\n                fieldObj.longitude = data.location.longitude;\n                fieldObj.formattedAddress = selectedObj.mainText;\n                fieldObj.cityName = data.cityName;\n                fieldObj.country = data.country;\n                fieldObj.isDirty = false;\n                fieldObj.hotelName = data.hotelName;\n                fieldObj.placeType = data.placeType;\n                fieldObj.fieldName = selectedObj.inputName;\n                fieldObj.detailsAddress = data.detailsAddress;\n                fieldObj.displayStr = selectedObj.mainText;\n\n                /*addressData.countryCode = data.countryISOCode;\n                addressData.latitude = data.location.latitude;\n                addressData.longitude = data.location.longitude;\n                addressData.formattedAddress = data.detailsAddress;\n                addressData.cityName = data.cityName;\n                addressData.country = data.country;\n                addressData.countryISOCode = data.countryISOCode;\n                addressData.isDirty = false;\n                addressData.hotelName = data.hotelName;\n                addressData.placeType = data.placeType;\n                addressData.fieldName = scopeFieldName;\n                cacheRecent(addressData, engineRuleService.GOOGLE, filterType);\n\n                if (cb) {\n                    let fullAddress = '';\n                    fullAddress += data.addrCityName ? data.addrCityName + ',' : '';\n                    fullAddress += data.country ? data.country : '';\n                    cb(fullAddress);\n                }\n                //return fieldObj.formattedAddress;*/\n                deferred.resolve(fieldObj);\n            },\n            (err: any) => {\n                fieldObj.isDirty = true;\n                fieldObj.waitForReq = false;\n                console.log('Error on google place request' + JSON.stringify(err));\n                deferred.resolve(fieldObj);\n            }\n        );\n    }\n\n    public getPlaceData(searchStr: string): Observable<SearchAddress> {\n        const placeData$ = new Subject<SearchAddress>();\n        const url = GeneralSettings.mapbox.placesURL + searchStr + '.json?' + this.getMapboxQueryArgs();\n        this.apiAccessService.getPlaceMapboxData(url).then(\n            (response) => {\n                if (!response || !response.features) {\n                    placeData$.error('Response data or data.features are empty');\n                }\n\n                let record;\n                for (const feature of response.features) {\n                    for (const placeType of feature.place_type) {\n                        if (placeType === 'place') {\n                            record = feature;\n                            break;\n                        }\n                    }\n                }\n                if (record === undefined) {\n                    record = response.features[0];\n                }\n\n                let countryName;\n                let countryCode;\n                const country = record.context[record.context.length - 1];\n                if (country) {\n                    countryCode = country.short_code.toString().toUpperCase();\n                    countryName = country.text;\n                }\n                const city = record.text;\n                const locationStr = countryName ? city + ', ' + countryName : city;\n\n                placeData$.next({\n                    countryCode,\n                    countryName,\n                    placeId: record.id,\n                    isDirty: false,\n                    cityName: city,\n                    showText: city,\n                    latitude: record.center[1],\n                    longitude: record.center[0],\n                    formattedAddress: record.place_name_en,\n                    displayStr: locationStr,\n                    selectedStr: locationStr,\n                } as SearchAddress);\n            },\n            (failure) => {\n                console.log('Get City info failure = ', failure);\n                placeData$.error('city failure');\n            }\n        );\n        return placeData$;\n    }\n\n    public makeAddress(selectedObj: any, fieldConf: any, searchData: any, deferred: any): void {\n        let fieldObj: any = {};\n\n        selectedObj.fieldRole = fieldConf.fieldRole;\n        const uniqueError = this.checkUniqueSelection(searchData, selectedObj, fieldConf.type);\n        if (uniqueError) {\n            this.dialogService.openSnackBar({\n                message: uniqueError,\n            });\n            deferred.reject(undefined);\n            return;\n        }\n\n        fieldObj.formattedAddress = selectedObj.shortDescription;\n        fieldObj.mainText = selectedObj.mainText;\n\n        if (selectedObj.havingGroup) {\n            fieldObj.formattedAddress = selectedObj.longDescription;\n        }\n\n        fieldObj.countryCode = selectedObj.countryISOCode;\n        // noChange is used to avoid cleaning field linked to this one when no change\n        fieldObj.noChange = fieldObj.placeId === selectedObj.placeId;\n        fieldObj.placeId = selectedObj.placeId;\n        fieldObj.icon = selectedObj.icon;\n        fieldObj.api_source = selectedObj.api_source;\n        fieldObj.searchTxt = selectedObj.searchTxt;\n        fieldObj.types = selectedObj.types;\n        fieldObj.hotelName = selectedObj.hotelName;\n        fieldObj.placeType = selectedObj.placeType;\n        fieldObj.stationType = selectedObj.stationType;\n        fieldObj.fieldRole = selectedObj.fieldRole;\n\n        if (fieldObj.stationType) {\n            fieldObj = this.hdlStationType(selectedObj, fieldObj);\n            fieldObj.formattedAddress = fieldObj.displayStr;\n            fieldObj.isPlace = true;\n        }\n\n        if (fieldConf.provider === EngineRuleService.GOOGLE) {\n            if (selectedObj.isCached) {\n                fieldObj.latitude = selectedObj.latitude;\n                fieldObj.longitude = selectedObj.longitude;\n                fieldObj.codes = selectedObj.iataCode;\n                fieldObj.iataCode = selectedObj.iataCode;\n                fieldObj.cityName = selectedObj.cityName;\n                fieldObj.formattedAddress = selectedObj.mainText;\n                fieldObj.addressSelected = selectedObj.addressSelected;\n                fieldObj.trainCodes = selectedObj.trainCodes;\n                fieldObj.displayStr = selectedObj.displayStr;\n                fieldObj.isDirty = false;\n\n                if (fieldObj.countryCode === '') {\n                    fieldObj.countryCode = selectedObj.countryCode;\n                }\n\n                if (selectedObj.placeType === 'CITY') {\n                    fieldObj.cityCode = selectedObj.iataCode;\n                }\n\n                /* below call is used in pushing the selected place or address to the top of list of recent search,\n                 which is already available in our recent list */\n                // cacheRecent(selectedObj, engineRuleService.GOOGLE, filterType);\n                deferred.resolve(fieldObj);\n            } else {\n                this.getPlace(fieldObj, selectedObj, fieldConf.type, deferred);\n            }\n        } else {\n            if (selectedObj.isHeader || selectedObj.isCityHeader) {\n                fieldObj.latitude = selectedObj.cityLatitude;\n                fieldObj.longitude = selectedObj.cityLongitude;\n            } else {\n                fieldObj.latitude = selectedObj.location.latitude;\n                fieldObj.longitude = selectedObj.location.longitude;\n            }\n            fieldObj.fieldName = selectedObj.inputName;\n            fieldObj.codes = selectedObj.iataCode;\n            fieldObj.iataCode = selectedObj.iataCode;\n            fieldObj.trainCodes = selectedObj.trainCodes;\n            fieldObj.isDirty = false;\n            if (selectedObj.placeType === 'CITY') {\n                fieldObj.cityCode = selectedObj.iataCode;\n            }\n            console.log('IN MAKE ADDRESS');\n            // cacheRecent(selectedObj, engineRuleService.MAPBOX, filterType);\n            deferred.resolve(fieldObj);\n        }\n    }\n\n    public selectPlace(selectedObj: any, htmlConf: any, searchData: any, deferred: any): void {\n        let fieldObj: any = {};\n\n        let code = selectedObj.code;\n        if (!code && selectedObj.iataCode) {\n            code = selectedObj.iataCode;\n        }\n\n        let filledScopeStr = 'to';\n        if (selectedObj.inputName === 'to') {\n            filledScopeStr = 'from';\n        }\n\n        // check the second field is used by this configuration, ignore otherwise\n        if (htmlConf[0][filledScopeStr] || htmlConf[1][filledScopeStr]) {\n            /*if (!selectedObj.stationType && selectedObj.showMyLocation) {\n                deferred.resolve(fieldObj);\n                return;\n            }*/\n\n            if (EngineRuleService.areInconsistent(selectedObj, searchData[filledScopeStr])) {\n                this.dialogService.openSnackBar({ message: this.translateService.instant(sameAddressMsg) });\n                deferred.reject(undefined);\n                return;\n            }\n        }\n\n        let noChange = false; // noChange is used to avoid cleaning field linked to this one when no change\n        if (fieldObj.placeId === selectedObj.placeId) {\n            noChange = true;\n        }\n        fieldObj = selectedObj;\n        fieldObj.noChange = noChange;\n        fieldObj.countryName = selectedObj.country;\n        fieldObj.cityName = selectedObj.cityName;\n        fieldObj.latitude = selectedObj.location.latitude;\n        fieldObj.longitude = selectedObj.location.longitude;\n        fieldObj.codes = code;\n        fieldObj.icon = '';\n        fieldObj.isDirty = false;\n\n        fieldObj = this.hdlStationType(selectedObj, fieldObj);\n\n        if (fieldObj.isHeader || fieldObj.isCityHeader) {\n            fieldObj.latitude = selectedObj.cityLatitude;\n            fieldObj.longitude = selectedObj.cityLongitude;\n        }\n\n        deferred.resolve(fieldObj);\n    }\n\n    public formSelectedAddress(selectedObj: any, htmlConf: any, fieldConf: any, searchData: any): any {\n        return new Promise((resolve, reject) => {\n            const deferred: any = {\n                resolve,\n                reject,\n            };\n\n            switch (fieldConf.provider) {\n                case EngineRuleService.GOOGLE:\n                    return this.makeAddress(selectedObj, fieldConf, searchData, deferred);\n                case EngineRuleService.MAPBOX:\n                    if (fieldConf.type === 'type6' || fieldConf.type === 'type7') {\n                        return this.makeAddress(selectedObj, fieldConf, searchData, deferred);\n                    } else {\n                        return this.selectPlace(selectedObj, htmlConf, searchData, deferred);\n                    }\n                default:\n                    console.error('unknown provider:' + fieldConf.provider);\n                    reject(undefined);\n            }\n        });\n    }\n\n    public getTypeAheadList(\n        searchKey: string,\n        formField: any,\n        fieldConf: any,\n        searchData: any\n    ): Observable<SearchAddress[]> {\n        switch (fieldConf.provider) {\n            case EngineRuleService.GOOGLE:\n                return this.placeAutoComplete(searchKey, formField, fieldConf, searchData);\n            case EngineRuleService.MAPBOX:\n                if (fieldConf.type === 'type6' || fieldConf.type === 'type7') {\n                    return this.placeAutoComplete(searchKey, formField, fieldConf, searchData);\n                } else {\n                    return this.airportSearch(searchKey, formField, fieldConf, searchData);\n                }\n            default:\n                console.error('unknown provider:' + fieldConf.provider);\n                return of([] as SearchAddress[]);\n        }\n    }\n\n    // When do not prompt is true we try to get initialised location in background\n    // If you user has not yet allowed/denied access we abort\n    public checkGeoLocationAllowed() {\n        return new Observable<SearchAddress>((subscriber: Subscriber<SearchAddress>) => {\n            if (this.myLocation && this.myLocation.placeId) {\n                subscriber.next(this.myLocation);\n                return;\n            }\n\n            if (!navigator.geolocation) {\n                subscriber.error(this.translateService.instant('SEARCH.GEO_LOC_NOT_SUPPORTED'));\n                return;\n            }\n\n            if (!navigator.permissions) {\n                // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions\n                // Safari won't support permission. so directly call getMyLocation and display the error message\n                console.log('Browser does not support navigator.permissions');\n                this.getCurrentLocation(subscriber);\n                return;\n            }\n\n            navigator.permissions.query({ name: 'geolocation' }).then((result) => {\n                if (result.state === 'granted' || result.state === 'prompt') {\n                    // Some browser won't give state as denied. always it will state 'prompt'.\n                    // Here in this case getCurrentLocation handle the 'PERMISSION DENIED' error.\n                    /*if (result.state === 'prompt') {\n                        console.log('access denied to location');\n                        subscriber.error(undefined);\n                        return;\n                    }*/\n\n                    this.getCurrentLocation(subscriber);\n                }\n\n                if (result.state === 'denied') {\n                    subscriber.error(this.translateService.instant('SEARCH.ENABLE_GEO_LOC'));\n                }\n            });\n        });\n    }\n\n    public cacheSelectedLocation(\n        selectedLocation: SearchAddress,\n        formField: SearchConfigOrder,\n        fieldConf: LocationConfig\n    ): void {\n        if (!selectedLocation.placeId) {\n            return;\n        }\n\n        selectedLocation.inputName = formField.field;\n        this.recentSearchService.setRecentAddress(selectedLocation, fieldConf.provider, fieldConf.type);\n    }\n\n    private getCurrentLocation(subscriber: Subscriber<SearchAddress>): void {\n        navigator.geolocation.getCurrentPosition(\n            (position) => {\n                const coords = position.coords;\n                if (!coords) {\n                    subscriber.error(this.translateService.instant('SEARCH.GEO_LOC_NOT_SUPPORTED'));\n                    return;\n                }\n\n                const myLocation = {\n                    latitude: coords.latitude,\n                    longitude: coords.longitude,\n                    header: false,\n                    stationType: 'city',\n                    icon: 'location',\n                    isMyLocation: true,\n                } as SearchAddress;\n\n                this.getPlaceData(coords.longitude + ',' + coords.latitude).subscribe(\n                    (place) => {\n                        const placeData = {\n                            ...myLocation,\n                            ...place,\n                        };\n                        placeData.displayStr = placeData.selectedStr;\n\n                        this.myLocation = placeData;\n                        subscriber.next(placeData);\n                    },\n                    () => {\n                        console.log('Cannot get place');\n                        subscriber.error(undefined);\n                    }\n                );\n            },\n            (errorResp) => {\n                const errorMsg =\n                    errorResp.code === 1182\n                        ? this.translateService.instant('SEARCH.ENABLE_GEO_LOC')\n                        : errorResp.message;\n                console.log('My Location error: ', errorMsg);\n                subscriber.error(errorMsg);\n            }\n        );\n    }\n\n    private airportSearch(\n        searchKey: string,\n        formField: SearchConfigOrder,\n        fieldConf: LocationConfig,\n        searchData: any\n    ): Observable<SearchAddress[]> {\n        let passiveCheck = 'to';\n        if (formField.field === 'to') {\n            passiveCheck = 'from';\n        }\n\n        const loadCache = !searchKey || searchKey === ' ' || searchKey.length < 3;\n        if (loadCache) {\n            const dep = searchData[passiveCheck].placeId\n                ? ({\n                      placeId: searchData[passiveCheck].placeId,\n                      radius: 0,\n                  } as LinkedFieldInfo)\n                : undefined;\n\n            return this.fetchCacheAddress(formField.field, (searchKey && searchKey.length) || 0, fieldConf, dep);\n        }\n\n        let searchTxt = searchKey;\n        if (searchKey) {\n            const splitKey = searchKey.split('-') || [];\n            if (splitKey.length > 0) {\n                searchKey = splitKey[0];\n            }\n        }\n\n        //after selection-all airports & all stations have to replaced with already searched data\n        if (searchKey && searchKey.length > 3 && searchData[formField.field].searchTxt) {\n            if (\n                searchData[formField.field].searchTxt &&\n                searchData[formField.field].searchTxt.trim().startsWith(searchTxt)\n            ) {\n                searchTxt = searchData[formField.field].searchTxt;\n            }\n        }\n        const selectedId = searchData[formField.field].uniqueKey;\n\n        return this.apiAccessService\n            .SearchAirportCities({\n                query: searchKey.trim(),\n            })\n            .pipe(\n                map((success) => {\n                    if (!success.places || success.places.length === 0) {\n                        return [];\n                    }\n\n                    const mapPlaceKeys: any = {}; // used to remove identical entries\n                    for (let i = 0; i < (success.places || []).length; i++) {\n                        success.places[i].inputName = formField.field;\n                        success.places[i].searchTxt = searchKey.trim();\n                        success.places[i].showMyLocation = false;\n                        success.places[i].fieldRole = EngineRuleService.FIELD_ROLE_TRIP_TRANSPORT;\n                        success.places[i].api_source = AddressSource.SRC_AIRPORT_CITIES;\n                        success.places[i].uniqueKey =\n                            success.places[i].placeId + success.places[i].placeType + success.places[i].code;\n\n                        if (mapPlaceKeys[success.places[i].uniqueKey]) {\n                            success.places.splice(i, 1);\n                            i--;\n                            continue;\n                        } else {\n                            mapPlaceKeys[success.places[i].uniqueKey] = true;\n                        }\n\n                        if (selectedId === success.places[i].uniqueKey) {\n                            success.places[i].selectedAddress = true;\n                        }\n\n                        success.places[i].isPlace = true;\n                        success.places[i].All_airports = this.translateService.instant('SEARCH.ALL_AIRPORTS');\n                        success.places[i].All_trains = this.translateService.instant('SEARCH.ALL_TRAINS');\n                    }\n\n                    return success.places && success.places.length ? success.places : [];\n                })\n            );\n    }\n\n    private placeAutoComplete(searchKey: string, formField: any, fieldConf: any, searchData: any): any {\n        const dep = AddressService.getLinkedData(fieldConf, searchData);\n        const fieldName = formField.field;\n\n        const loadCache = !searchKey || searchKey === ' ' || searchKey.length < 3;\n        if (loadCache) {\n            return this.fetchCacheAddress(fieldName, searchKey ? searchKey.length : 0, fieldConf, dep);\n        }\n\n        /*if (\n            searchData[fieldName] &&\n            searchData[fieldName].detailsAddress &&\n            searchData[fieldName].detailsAddress !== ''\n        ) {\n            searchKey = searchData[fieldName].detailsAddress;\n        }*/\n\n        const params: any = {\n            input: searchKey,\n            inputType: fieldConf.type,\n        };\n\n        if (dep) {\n            if (dep.lat && dep.lng) {\n                params.location = dep.lat + ',' + dep.lng;\n                params.radius = dep.radius;\n            }\n\n            if (dep.country) {\n                params.country = dep.country;\n            }\n        }\n\n        const selectedId = searchData[fieldName].placeId;\n        return this.apiAccessService.dropDown(fieldConf.provider === EngineRuleService.GOOGLE, params).pipe(\n            map((response) => {\n                if (!response.data.predictions) {\n                    return [];\n                }\n\n                for (const prediction of response.data.predictions) {\n                    prediction.inputName = fieldName;\n                    prediction.api_source =\n                        fieldConf.provider === EngineRuleService.GOOGLE\n                            ? AddressSource.SRC_GOOGLE\n                            : AddressSource.SRC_MAPBOX;\n                    prediction.name = prediction.mainText;\n\n                    if (prediction.placeId === selectedId) {\n                        prediction.selectedAddress = true;\n                    }\n\n                    if (fieldConf.provider === EngineRuleService.GOOGLE) {\n                        prediction.displayStr = prediction.mainText;\n                    }\n\n                    if (prediction.stationType !== '') {\n                        prediction.isPlace = true;\n                        prediction.All_airports = this.translateService.instant('SEARCH.ALL_AIRPORTS');\n                        prediction.All_trains = this.translateService.instant('SEARCH.ALL_TRAINS');\n                    }\n                }\n\n                return response.data.predictions;\n            })\n        );\n    }\n\n    private getDisplayStringOfFromAndTo(obj: any): string {\n        if (obj.stationType === 'rail_stations') {\n            return obj.cityName + ' - ' + this.translateService.instant('SEARCH.ALL_TRAINS');\n        }\n\n        if (obj.isCityHeader) {\n            return obj.cityName + ', ' + obj.country;\n        }\n\n        if (obj.isHeader && obj.stationType === 'airports') {\n            return obj.cityName + ' - ' + this.translateService.instant('SEARCH.ALL_AIRPORTS');\n        }\n\n        if (!obj.isHeader && !obj.isCityHeader) {\n            if (obj.stationType === 'airport') {\n                return obj.cityName + ' - ' + (obj.code ? obj.code : obj.iataCode);\n            }\n\n            if (obj.stationType === 'rail_station') {\n                return obj.name;\n            }\n        }\n        return obj.displayStr;\n    }\n\n    private hdlStationType(selectedObj: any, fieldObj: any): any {\n        if (selectedObj.stationType === 'airport' || selectedObj.stationType === 'airports') {\n            fieldObj.icon = 'flight';\n        }\n\n        if (selectedObj.stationType === 'rail_station' || selectedObj.stationType === 'rail_stations') {\n            fieldObj.icon = 'train';\n            fieldObj.latitude = selectedObj.cityLatitude;\n            fieldObj.longitude = selectedObj.cityLongitude;\n        }\n\n        if (selectedObj.stationType === 'city') {\n            let displayStr = selectedObj.name !== '' ? selectedObj.name : selectedObj.cityName;\n            if (!displayStr.includes(selectedObj.country)) {\n                displayStr = displayStr + ', ' + selectedObj.country;\n            }\n            fieldObj.displayStr = displayStr;\n        } else {\n            fieldObj.displayStr = this.getDisplayStringOfFromAndTo(selectedObj);\n        }\n\n        return fieldObj;\n    }\n\n    private checkUniqueSelection(searchData: any, addressData: any, filterType: string): string | undefined {\n        if (addressData.fieldRole === EngineRuleService.FIELD_ROLE_TRANSFER) {\n            switch (addressData.inputName) {\n                case 'to':\n                    if (searchData.address && searchData.address.placeId === addressData.placeId) {\n                        return this.translateService.instant(sameAddressMsg);\n                    }\n                    break;\n                case 'address':\n                    if (searchData.to && searchData.to.placeId === addressData.placeId) {\n                        return this.translateService.instant(sameAddressMsg);\n                    }\n            }\n            return;\n        }\n\n        switch (addressData.inputName) {\n            case 'to' || 'address':\n                if (searchData.from && searchData.from.placeId === addressData.placeId) {\n                    return this.translateService.instant(sameAddressMsg);\n                }\n                break;\n            case 'from' || 'address':\n                if (searchData.to && searchData.to.placeId === addressData.placeId) {\n                    return this.translateService.instant(sameAddressMsg);\n                }\n                break;\n        }\n\n        return undefined;\n    }\n\n    private getMapboxQueryArgs(): string {\n        const queryArgs: { [key: string]: string } = {\n            type: 'place',\n            access_token: environment.mapboxGLToken,\n            language: this.settingsService.langCode,\n        };\n\n        const params = [];\n        for (const key in queryArgs) {\n            if (queryArgs.hasOwnProperty(key)) {\n                params.push(key + '=' + queryArgs[key]);\n            }\n        }\n        return params.join('&');\n    }\n\n    private fetchCacheAddress(\n        fieldName: string,\n        searchLength: number,\n        conf: LocationConfig,\n        linkedField?: LinkedFieldInfo\n    ): Observable<SearchAddress[]> {\n        const searchAddress: SearchAddress[] = [];\n\n        const showMyLocation = !!(conf.extra && conf.extra.myLoc);\n        if (showMyLocation) {\n            searchAddress.push(\n                this.myLocation && this.myLocation.placeId\n                    ? this.myLocation\n                    : ({\n                          isMyLocation: true,\n                          displayStr: '',\n                      } as SearchAddress)\n            );\n        }\n\n        if (searchLength > 0) {\n            return of(searchAddress);\n        }\n\n        const cacheAddresses = this.recentSearchService.getRecentAddress(\n            conf.provider.toString(),\n            conf.type,\n            fieldName,\n            linkedField\n        );\n        for (const address of cacheAddresses) {\n            address.inputName = fieldName;\n            address.codes = address.code;\n\n            searchAddress.push(address);\n        }\n\n        return of(searchAddress);\n    }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SearchState {\n    private searchState: any;\n    private passengers: any;\n\n    public init(initialState: any) {\n        this.searchState = initialState;\n    }\n\n    public saveState(fieldName: string, data: any) {\n        if (this.searchState[fieldName]) {\n            this.searchState[fieldName] = data;\n        }\n    }\n\n    public getState(fieldName: string) {\n        if (fieldName) {\n            return this.searchState[fieldName];\n        }\n        return this.searchState;\n    }\n\n    public setPassengers(passengers: any): any {\n        this.passengers = passengers;\n    }\n\n    public getPassengers(): any {\n        return this.passengers;\n    }\n}\n"],"names":["EventEmitter","FormGroup","Subject","SearchDataService","debounceTime","distinctUntilChanged","takeUntil","ListenerId","TzFocusType","MobLocFieldModalComponent","i0","ctx_r5","ctx_r7","ctx_r4","_r1","MobLocFieldComponent","constructor","addressService","searchDataService","screenSizeDetectorService","listenersService","dialogService","platformService","modalService","showInvertBtn","formField","field","fieldConf","mainOrder","searchData","from","_a","displayStr","to","_b","ngOnInit","htmlConf","confIdx","initSearch","ngAfterViewInit","setValuesForm","ngOnDestroy","destroy$","next","complete","onSearchClick","isModal","isModalOpen","isInputValueSet","editMode","clearInputTxt","cssClass","modal","createMainModal","data","formGroup","itemSelected","item","controls","setValue","onItemSelected","res","dismiss","invertFieldVals","invertFromTo","emit","onInputBlockClick","fieldRef","nativeElement","focus","clear","dispatchEvent","KeyboardEvent","keyCode","bubbles","locationSelected","selectedData","placeId","value","updateSearch","selectedObj","getNewLoc","inputValue","isMyLocation","updateUserLocation","address","requestAnimationFrame","console","log","selectedStr","focusNextField","checkGeoLocationAllowed","pipe","subscribe","currentLocationInfo","error","reset","openSnackBar","message","isCachedAddress","isCached","formSelectedAddress","then","updateLocData","cacheSelectedLocation","Object","resetOnNewInput","fieldVal","trim","input","clearSelectedAddress","length","substring","newInput","getNewInput","newLoc","onInputEnterKey","results","onFocusInput","isInputFocused","filter","result","onBlurInput","getDefaultResults","valueChanges","text","getTypeAheadList","setTimeout","obj","locSelected","formedAddr","i","undefined","NotifyListeners","LISTEN_FOCUS_NEXT","id","tabOrder","moveTo","MOVE_NEXT","selectors","viewQuery","ctx","FormControl","Validators","EngineRuleService","ToolsService","SearchHelpers","ServiceId","Trip","TRIPTYPES","AddressSource","GeneralSettings","TzPassengerUtil","SearchUtilsService","CalTypes","CalendarUtilsService","ctx_r10","ctx_r8","ctx_r12","ctx_r14","ctx_r15","ctx_r9","ctx_r18","ctx_r28","ctx_r30","ctx_r31","ctx_r27","formField_r20","ctx_r35","ctx_r37","ctx_r38","ctx_r33","ctx_r39","ctx_r41","ctx_r34","last_r22","ctx_r44","ctx_r46","ctx_r47","ctx_r26","ctx_r50","ctx_r52","ctx_r53","ctx_r54","ctx_r57","$event","ctx_r59","SearchComponent","userSearchService","toolsService","engineRuleService","searchState","fb","translateService","loaderService","cartService","recentSearchService","router","renderer","defaultSelectedServices","INVALID","LIST","label","rating","selected","searchFormGroup","childAgesFormArray","passengersFormGroup","isMobileDevice","selectedServices","editing","currentService","isModalEditMode","initializeTzSearch","resetSearch$","ngOnChanges","changes","resultPageSwitched","firstChange","currentValue","previousValue","unregisterListeners","resetSearch","isOldPassengerDataSet","onSearch","removeClass","document","body","invalid","valid","markAllAsTouched","focusInvalid","formValidity","isFormInvalid","isValid","firstField","isNewSearch","getSearch","getFirstServiceId","getServiceValue","search","passengers","context","travelType","editingClose","closeAllCalendars","searchDropDownToggle","params","getSearchParams","searchReq","deepCopy","services","hotelCode","hotelName","storeRecentAddress","resetSortingValue","triggerLoading","loading","textKey","clearCart","makeSearch","selectedFrom","selectedTo","inputName","setRecentAddress","applySearchData","fieldEvent","fieldType","latitude","cleanLinkedField","CAL_TRIP_TYPE","checkIfSecondaryCalendarsShouldBeReset","applyPassenger","paxEvent","passenger","oldPassenger","isRatingSelected","ratingList","some","changeTravelType","tripType","MULTI_CITY","ROUND_TRIP","changeFlyType","addNewChild","age","childAgeCtrl","setValidators","required","min","max","passengerRules","childMaxAge","push","group","childAge","moveToInvalid","MOVE_TO_INVALID","validSearch","listenerId","listeners","unregisterListener","searchStatus","searchResHandler","needEditRefresh","searchInProgress","formValues","passengersFormValues","passengersOldValue","oldSearch","setSearchToCurrent","serviceInfo","getServiceInfo","service","serviceIcon","icon","isDefault","rentCar","isRental","initEditSearch","setListener","registerListener","LISTEN_EDIT_EXT_CHANGE","setPassengers","init","buildSearchForm","editingChange","fieldOrderType","getEmptySearch","FormPax","LISTEN_SERVICES","updateFieldConfig","LISTEN_TRAVEL_OPTION","LISTEN_SERVICE_REINIT","resetSearchToDefault","indexOf","isAccDetailEdit","url","split","pop","combinationParams","buildSearchFieldsObj","tempSearch","resultSearch","k","uniqueKey","bookedServiceId","serviceId","ACC_DETAILS","ACC","decodeURI","resetCalendar","fromDate","toDate","fromTime","toTime","showCalendar","CAL_RENTAL_TYPE","CAL_TRANSFER_TYPE","buildFormGroup","fieldOrders","selectedServiceConf","fieldCount","fieldOrder","conf","optional","editMandatory","dispStr","fieldLength","formSearchFieldOrder","formOrder","htmlSearchConf","buildPassengerFormGroup","subj","serviceChange","runMode","runningMode","childAges","array","passengerConf","persons","driver","driversAge","minDriverAge","maxDriverAge","rentalOnly","infantAges","childrenAges","youthAges","notifyLocInconsistency","inconsistencyType","c","fieldName","hasOwnProperty","instant","placeholder","formatAddress","addr","noChange","hasLinkedField","linked","_c","dep","distance","longitude","isNaN","addressLocTooFar","radius","addressLocTooNear","minRadius","validateSelectedAddress","isFromValidAirportCity","api_source","SRC_AIRPORT_CITIES","isToValidAirportCity","transport","accommodation","shouldReset","isTheSameDaySelectedForAccommodation","tripCal","resetDate","resetPassengersValue","clearPassengerFormArray","patchValue","resetPassengerValues","map","shouldResetTransferCalendar","transferCal","shouldResetPreselectedDates","keepOpen","getDefaultCalendarValue","inputs","outputs","features","decls","vars","consts","template"],"sourceRoot":"webpack:///"}